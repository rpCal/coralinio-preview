(this.webpackJsonpcoralinio=this.webpackJsonpcoralinio||[]).push([[0],{35:function(e,t,a){e.exports=a(59)},40:function(e,t,a){},42:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n,i=a(0),s=a.n(i),r=a(20),o=a.n(r),c=(a(40),a(41),a(42),a(13));!function(e){e.Idle="Move",e.EditLines="Edit",e.AddLine="Add Line",e.EditBeads="EditBeads"}(n||(n={}));var d=a(11),l=a(12),u=a(2),f=a(19),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(f.a)({x:e,y:t},c.immerable,!0)},h=function(e){var t=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)}(e),a=0===t,n=a?0:e.x/t,i=a?0:e.y/t;return m(n,i)},v=function(e,t){return m(e.x*t,e.y*t)},S=function(e,t,a){return m(e.x+t,e.y+a)},b=function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},p=function(e,t){return Math.atan2(e,t)},E=function(e,t,a){return a.x>e.x&&a.x<t.x&&a.y>e.y&&a.y<t.y},y=a(4),g=a(6),x=a(7),I=a(9),D=a(8),M=a(10),O=a(22),j=function(e){var t=Object(O.generate)();return Object(f.a)({id:t,position:e},c.immerable,!0)},C=function(e){var t=e.start,a=e.end,n=e.beadIds,i=Object(O.generate)();return Object(f.a)({id:i,start:t,end:a,beadIds:n&&n.length>0?n:[],settings:{beadCount:0,autoFill:!0}},c.immerable,!0)},N=function(e){function t(){return Object(g.a)(this,t),Object(I.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(x.a)(t,[{key:"action_onAddLine",value:function(e,t){var a=this.draftState.ui.lineSettings.autoFill,i=C({start:e,end:t,beadIds:[]});i.settings.autoFill=a,this.draftState.appData.lines[i.id]=i,this.draftState.mode=n.EditLines,this.updateBeadsPositions(i.id),this.draftState.ui.saveInfo.saved=!1}},{key:"action_onStartPointDrag",value:function(e,t){if(this.draftState.appData.lines[e]){var a=this.draftState.appData.lines[e];a.start.x=t.x-5,a.start.y=t.y-5,this.updateBeadsPositions(a.id),this.draftState.ui.saveInfo.saved=!1}}},{key:"action_onEndPointDrag",value:function(e,t){if(this.draftState.appData.lines[e]){var a=this.draftState.appData.lines[e];a.end.x=t.x-5,a.end.y=t.y-5,this.updateBeadsPositions(a.id),this.draftState.ui.saveInfo.saved=!1}}},{key:"action_onLineDrag",value:function(e,t){if(this.draftState.appData.lines[e]){var a=this.draftState.appData.lines[e];a.start.x=a.start.x+t.deltaX,a.start.y=a.start.y+t.deltaY,a.end.x=a.end.x+t.deltaX,a.end.y=a.end.y+t.deltaY,this.updateBeadsPositions(a.id),this.draftState.ui.saveInfo.saved=!1}}},{key:"action_onGroupLineDrag",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){if(t.draftState.appData.lines[a]){var n=t.draftState.appData.lines[a];n.start.x=n.start.x+e.deltaX,n.start.y=n.start.y+e.deltaY,n.end.x=n.end.x+e.deltaX,n.end.y=n.end.y+e.deltaY,t.updateBeadsPositions(n.id),t.draftState.ui.saveInfo.saved=!1}}))}},{key:"action_onGroupBeadsDrag",value:function(e){}},{key:"action_onClickLine",value:function(e){this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIds[e]=!0,this.draftState.ui.selectedLinesIdsCount=1}},{key:"action_onClickBead",value:function(e){this.draftState.ui.selectedBeadsIds={},this.draftState.ui.selectedBeadsIds[e]=!0,this.draftState.ui.selectedBeadsIdsCount=1}},{key:"updateBeadsPositions",value:function(e){var t=this,a=this.draftState.appData.lines[e],n=a.start,i=a.end,s=a.beadIds,r=b(n,i),o=Math.floor((r-25-5)/25),c=s.length;if(o>c)for(var d=o-c,l=0;l<d;l++){var u=m(),f=j(u);this.draftState.appData.beads[f.id]=f,this.draftState.appData.lines[e].beadIds.push(f.id)}else if(o<c)for(var p=c-o,E=0;E<p;E++){var y=this.draftState.appData.lines[e].beadIds.length,g=this.draftState.appData.lines[e].beadIds.splice(y-1,1);delete this.draftState.appData.beads[g[0]]}var x=25;this.draftState.appData.lines[e].beadIds.forEach((function(e){var a=function(e,t,a,n,i){var s=m(a-e,n-t);return s=h(s),s=v(s,i),s=S(s,e,t)}(n.x,n.y,i.x,i.y,x),s=a.x-10+5,r=a.y-10+5;t.draftState.appData.beads[e].position.x=s,t.draftState.appData.beads[e].position.y=r,x+=25}))}}]),t}(y.ImmerReducer),k=function(e){function t(){return Object(g.a)(this,t),Object(I.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(x.a)(t,[{key:"action_onClearCanvas",value:function(){this.draftState.appData.beads={},this.draftState.appData.lines={},this.draftState.ui.saveInfo.saved=!1}},{key:"action_readSavedCanvas",value:function(){var e=this;if(this.draftState.ui.saveInfo.saved=!0,"localStorage"in window){var t=localStorage.getItem("appData");if(null!==t){this.draftState.appData={beads:{},lines:{}};var a=JSON.parse(t);Object.keys(a.beads).forEach((function(t){var n=a.beads[t],i=j(n.position);i.id=n.id,e.draftState.appData.beads[t]=i})),Object.keys(a.lines).forEach((function(t){var n=a.lines[t],i=C({start:n.start,end:n.end,beadIds:n.beadIds});i.id=n.id,e.draftState.appData.lines[t]=i})),console.log("action_readSavedCanvas loaded")}else console.info("No data in localstorage")}else console.info("No localstorage available")}},{key:"action_onSaveCanvas",value:function(){"localStorage"in window?(localStorage.setItem("appData",JSON.stringify(this.draftState.appData)),this.draftState.ui.saveInfo.saved=!0,console.log("action_onSaveCanvas saved")):console.info("No localstorage available")}}]),t}(y.ImmerReducer),L=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(I.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(i)))).clearSelectedBeads=function(){a.draftState.ui.selectedBeadsIdsCount>0&&(a.draftState.ui.selectedBeadsIds={},a.draftState.ui.selectedBeadsIdsCount=0)},a.clearSelectedLines=function(){a.draftState.ui.selectedLinesIdsCount&&(a.draftState.ui.selectedLinesIds={},a.draftState.ui.selectedLinesIdsCount=0)},a}return Object(M.a)(t,e),Object(x.a)(t,[{key:"action_onChangeEditorMode",value:function(e){this.draftState.mode=e,this.clearSelectedBeads(),this.clearSelectedLines()}},{key:"action_setSaveInfo",value:function(e){this.draftState.ui.saveInfo.saved=e}}]),t}(y.ImmerReducer),_=function(e){function t(){return Object(g.a)(this,t),Object(I.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(x.a)(t,[{key:"action_test",value:function(){}}]),t}(y.ImmerReducer),B=a(33),w=function(e){function t(){return Object(g.a)(this,t),Object(I.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(x.a)(t,[{key:"action_onEditBeadsMouseDown",value:function(e,t){this.draftState.ui.mouseSelection.isDragStarted=!0,this.draftState.ui.mouseSelection.start.x=e,this.draftState.ui.mouseSelection.start.y=t,this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t}},{key:"action_onEditBeadsMouseMove",value:function(e,t){var a=this;if(this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t,!1===this.draftState.ui.mouseSelection.isDragged){var n=this.draftState.ui.mouseSelection,i=n.start,s=n.end,r=s.x-i.x,o=s.y-i.y;(Math.abs(r)>5||Math.abs(o)>5)&&(this.draftState.ui.mouseSelection.isDragged=!0)}if(!0===this.draftState.ui.mouseSelection.isDragged){var c=this.draftState.ui.mouseSelection,d=c.start,l=c.end,u=m(Math.min(d.x,l.x),Math.min(d.y,l.y)),f=m(Math.max(d.x,l.x),Math.max(d.y,l.y));this.draftState.ui.selectedBeadsIds={},this.draftState.ui.selectedBeadsIdsCount=0,Object.keys(this.draftState.appData.beads).forEach((function(e){var t=a.draftState.appData.beads[e],n=m(t.position.x+10,t.position.y+10);E(u,f,n)&&(a.draftState.ui.selectedBeadsIds[e]=!0,a.draftState.ui.selectedBeadsIdsCount=a.draftState.ui.selectedBeadsIdsCount+1)}))}}},{key:"action_onEditBeadsMouseUp",value:function(){!1===this.draftState.ui.mouseSelection.isDragged&&this.draftState.ui.selectedBeadsIdsCount>0&&(this.draftState.ui.selectedBeadsIds={}),this.draftState.ui.mouseSelection.isDragStarted=!1,this.draftState.ui.mouseSelection.isDragged=!1,this.draftState.ui.mouseSelection.start.x=0,this.draftState.ui.mouseSelection.start.y=0,this.draftState.ui.mouseSelection.end.x=0,this.draftState.ui.mouseSelection.end.y=0}},{key:"action_onEditLinesMouseDown",value:function(e,t){this.draftState.ui.mouseSelection.isDragStarted=!0,this.draftState.ui.mouseSelection.start.x=e,this.draftState.ui.mouseSelection.start.y=t,this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t}},{key:"action_onEditLinesMouseMove",value:function(e,t){var a=this;if(this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t,!1===this.draftState.ui.mouseSelection.isDragged){var n=this.draftState.ui.mouseSelection,i=n.start,s=n.end,r=s.x-i.x,o=s.y-i.y;(Math.abs(r)>5||Math.abs(o)>5)&&(this.draftState.ui.mouseSelection.isDragged=!0)}if(!0===this.draftState.ui.mouseSelection.isDragged){var c=this.draftState.ui.mouseSelection,d=c.start,l=c.end,u=m(Math.min(d.x,l.x),Math.min(d.y,l.y)),f=m(Math.max(d.x,l.x),Math.max(d.y,l.y)),h=Object.keys(this.draftState.ui.selectedLinesIds),v=[];Object.keys(this.draftState.appData.lines).forEach((function(e){var t=a.draftState.appData.lines[e];(E(u,f,t.start)||E(u,f,t.end))&&v.push(e)})),Object(B.difference)(v,h).length>0&&(this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIdsCount=0,v.forEach((function(e){a.draftState.ui.selectedLinesIds[e]=!0,a.draftState.ui.selectedLinesIdsCount=a.draftState.ui.selectedLinesIdsCount+1})))}}},{key:"action_onEditLinesMouseUp",value:function(){!1===this.draftState.ui.mouseSelection.isDragged&&this.draftState.ui.selectedLinesIdsCount>0&&(this.draftState.ui.selectedLinesIds={}),this.draftState.ui.mouseSelection.isDragStarted=!1,this.draftState.ui.mouseSelection.isDragged=!1,this.draftState.ui.mouseSelection.start.x=0,this.draftState.ui.mouseSelection.start.y=0,this.draftState.ui.mouseSelection.end.x=0,this.draftState.ui.mouseSelection.end.y=0}}]),t}(y.ImmerReducer),A={appData:{beads:{},lines:{}},ui:{lineSettings:{autoFill:!0},saveInfo:{saved:!1},selectedLinesIds:{},selectedLinesIdsCount:0,selectedBeadsIds:{},selectedBeadsIdsCount:0,mouseSelection:{start:m(0,0),end:m(0,0),isDragStarted:!1,isDragged:!1}},mode:n.Idle},R={Main:Object(y.createActionCreators)(_),Draggable:Object(y.createActionCreators)(N),Persist:Object(y.createActionCreators)(k),ChangeEditorMode:Object(y.createActionCreators)(L),MouseSelection:Object(y.createActionCreators)(w)},F=Object(y.composeReducers)(Object(y.createReducerFunction)(_,A),Object(y.createReducerFunction)(N,A),Object(y.createReducerFunction)(k,A),Object(y.createReducerFunction)(L,A),Object(y.createReducerFunction)(w,A)),X=function(e){var t=e.editorMode,a=Object(u.b)(),i=function(e){a(R.ChangeEditorMode.action_onChangeEditorMode(e))};return s.a.createElement("div",{className:""},s.a.createElement("div",{className:"\n              button \n              ".concat(t===n.Idle?"is-active":"","\n            "),onClick:function(){return i(n.Idle)}},s.a.createElement("span",{className:"icon is-small"},s.a.createElement(d.a,{icon:l.a,color:"#aeaeae"})),s.a.createElement("span",null,"Idle")),s.a.createElement("div",{className:"\n              button \n              ".concat(t===n.EditLines?"is-active":"","\n            "),onClick:function(){return i(n.EditLines)}},s.a.createElement("span",{className:"icon is-small"},s.a.createElement(d.a,{icon:l.c,color:"#aeaeae"})),s.a.createElement("span",null,"EditLines")),s.a.createElement("div",{className:"\n              button \n              ".concat(t===n.EditBeads?"is-active":"","\n            "),onClick:function(){return i(n.EditBeads)}},s.a.createElement("span",{className:"icon is-small"},s.a.createElement(d.a,{icon:l.c,color:"#aeaeae"})),s.a.createElement("span",null,"Edit Beads")),s.a.createElement("div",{className:"\n              button \n              ".concat(t===n.AddLine?"is-active":"","\n            "),onClick:function(){return i(n.AddLine)}},s.a.createElement("span",{className:"icon is-small"},s.a.createElement(d.a,{icon:l.d,color:"#aeaeae"})),s.a.createElement("span",null,"AddLine")))},P=a(25),Y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"translate3d(".concat(e,"px, ").concat(t,"px, ").concat(a,"px)")},G=function(e){return"rotate(".concat(e,"rad)")},z=function(e){var t=e.start,a=e.end,n=b(t,a),i=p(a.y-t.y,a.x-t.x);return s.a.createElement("div",{style:{height:1,width:n,transform:"".concat(Y(t.x+5,t.y+5)," ").concat(G(i)),transformOrigin:"left center"},className:"line"},"\xa0")},U=function(e){return!1===e.isActive?s.a.createElement(s.a.Fragment,null):s.a.createElement(T,null)},T=function(){var e=Object(i.useState)({x:0,y:0}),t=Object(P.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)({x:0,y:0}),o=Object(P.a)(r,2),c=o[0],d=o[1],l=Object(i.useState)(!1),f=Object(P.a)(l,2),m=f[0],h=f[1],v=Object(i.useRef)(null),S=function(e){if(m&&v.current){var t=v.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;d({x:n,y:i}),p(a,c),h(!1)}},b=Object(u.b)(),p=function(e,t){b(R.Draggable.action_onAddLine(e,t))};return s.a.createElement("div",null,s.a.createElement("div",{onMouseDown:function(e){if(v.current){var t=v.current.getBoundingClientRect(),a=e.clientX-t.left,i=e.clientY-t.top;n({x:a,y:i}),d({x:a,y:i}),h(!0)}},onMouseUp:S,onMouseMove:function(e){if(m&&v.current){var t=v.current.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;d({x:a,y:n})}},onMouseLeave:S,className:"add-line-wrapper",ref:v}),m?s.a.createElement("div",null,s.a.createElement("div",{style:{transform:Y(a.x,a.y),width:10,height:10},className:"line-start"},"\xa0"),s.a.createElement("div",{style:{transform:Y(c.x,c.y),width:10,height:10},className:"line-end"},"\xa0"),s.a.createElement(z,{start:a,end:c})):null)},V=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui.saveInfo.saved}));return s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:" button ",onClick:function(){e(R.Persist.action_onClearCanvas())}},s.a.createElement("span",{className:"icon is-small"},s.a.createElement(d.a,{icon:l.f,color:"#aeaeae"})),s.a.createElement("span",null,"Clear canvas"))),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:" button ".concat(t?"is-success":""),onClick:function(){e(R.Persist.action_onSaveCanvas())}},s.a.createElement("span",{className:"icon is-small"},s.a.createElement(d.a,{icon:l.e,color:"#aeaeae"})),s.a.createElement("span",null,"Save canvas"))),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:" button ",onClick:function(){e(R.Persist.action_readSavedCanvas())}},s.a.createElement("span",{className:"icon is-small"},s.a.createElement(d.a,{icon:l.b})),s.a.createElement("span",null,"Load from localstorage"))))},J=function(e){var t=e.value,a=e.onChange;return s.a.createElement("div",{className:"fieldset"},s.a.createElement("span",{className:"label"},"W:"),s.a.createElement("input",{className:"input",type:"number",value:t,onChange:a}))},W=function(e){var t=e.isVisible,a=Object(i.useRef)(null),n=Object(u.c)((function(e){return e.ui.mouseSelection.start})),r=Object(u.c)((function(e){return e.ui.mouseSelection.end})),o=Object(u.c)((function(e){return e.ui.mouseSelection.isDragStarted}));if(!1===t)return s.a.createElement(s.a.Fragment,null);var c=!0===o,d=e.onMouseDown,l=e.onMouseUp,f=e.onMouseMove,m=Math.abs(r.x-n.x),h=Math.abs(r.y-n.y),v=Math.min(r.x,n.x),S=Math.min(r.y,n.y);return s.a.createElement("div",{className:"mouse-selection",ref:a,onMouseDown:function(e){if(a.current){var t=a.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;d(n,i)}},onMouseUp:function(e){l()},onMouseMove:function(e){if(c&&a.current){var t=a.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;f(n,i)}},style:{zIndex:c?23:9}},c?s.a.createElement("div",{style:{width:m,height:h,backgroundColor:"rgba(0,0,0, 0.05)",border:"1px solid rgba(0,0,0,.3)",transform:Y(v,S)}}):null)},q=function(e){var t=e.isVisible,a=Object(u.b)();return s.a.createElement(W,{isVisible:t,onMouseDown:function(e,t){a(R.MouseSelection.action_onEditBeadsMouseDown(e,t))},onMouseMove:function(e,t){a(R.MouseSelection.action_onEditBeadsMouseMove(e,t))},onMouseUp:function(){a(R.MouseSelection.action_onEditBeadsMouseUp())}})},$=function(e){var t=e.isVisible,a=Object(u.b)();return s.a.createElement(W,{isVisible:t,onMouseDown:function(e,t){a(R.MouseSelection.action_onEditLinesMouseDown(e,t))},onMouseMove:function(e,t){a(R.MouseSelection.action_onEditLinesMouseMove(e,t))},onMouseUp:function(){a(R.MouseSelection.action_onEditLinesMouseUp())}})},H=function(e){var t=e.bead,a=e.opacity,n=e.zIndex,i=e.isSelected,r=void 0!==a&&a>=0&&a<=1,o=void 0!==n&&n>=0&&n<=9999,c=Object(u.b)();return s.a.createElement("div",{className:"bead-item",onClick:function(){c(R.Draggable.action_onClickBead(t.id))},style:{transform:Y(t.position.x,t.position.y),opacity:r?a:1,zIndex:o?n:void 0,border:i?"2px solid #000":""}},"\xa0")},K=function(e){var t=e.mode,a=t===n.EditLines,i=t===n.EditBeads,r=Object(u.c)((function(e){return Object.values(e.appData.beads)})),o=Object(u.c)((function(e){return e.ui.selectedBeadsIds}));return s.a.createElement(s.a.Fragment,null,r.map((function(e){return s.a.createElement(H,{key:e.id,bead:e,opacity:a?.5:1,isSelected:void 0!==o[e.id],zIndex:a?10:i?20:void 0})})))},Q=a(23),Z=a(17),ee=function(e){var t=e.start,a=e.end,n=e.onClick,i=b(t,a),r=p(a.y-t.y,a.x-t.x);return s.a.createElement("div",{style:{height:10,width:i,backgroundColor:"rgba(0,0,0,0.0)",transform:"".concat(Y(t.x+0,t.y+0)," ").concat(G(r)),transformOrigin:"left center",cursor:"pointer",zIndex:20},onClick:n,className:"line"},"\xa0")},te=function(e){var t=e.lineId,a=e.start,n=e.end,i=b(a,n),r=p(n.y-a.y,n.x-a.x),o=Object(u.b)(),c=function(e,a){var n=a.deltaX,i=a.deltaY;o(R.Draggable.action_onLineDrag(t,{deltaX:n,deltaY:i}))};return s.a.createElement(Z.DraggableCore,{onStart:c,onDrag:c,onStop:c,disabled:!1,scale:1},s.a.createElement("div",{style:{height:10,width:i,backgroundColor:"rgba(0,0,0,0.05)",border:"1px dashed rgba(0,0,0,0.60)",transform:"".concat(Y(a.x+0,a.y+0)," ").concat(G(r)),transformOrigin:"left center",cursor:"move",zIndex:21},className:"line"},"\xa0"))},ae=function(e){var t=e.isSelected,a=e.line,n=Object(u.b)(),i=function(e,t){var i=t.x,s=t.y;n(R.Draggable.action_onStartPointDrag(a.id,{x:i,y:s}))},r=function(e,t){var i=t.x,s=t.y;n(R.Draggable.action_onEndPointDrag(a.id,{x:i,y:s}))};return s.a.createElement("div",null,s.a.createElement(Z.DraggableCore,{onStart:i,onDrag:i,onStop:i,scale:1,disabled:!1},s.a.createElement("div",{style:{transform:Y(a.start.x,a.start.y),zIndex:!0===t?22:20,width:10,height:10},className:"line-start"},"\xa0")),s.a.createElement(Z.DraggableCore,{onStart:r,onDrag:r,onStop:r,disabled:!1,scale:1},s.a.createElement("div",{style:{transform:Y(a.end.x,a.end.y),zIndex:!0===t?22:20,width:10,height:10},className:"line-end"},"\xa0")),!0===t?s.a.createElement(te,{start:a.start,end:a.end,lineId:a.id}):s.a.createElement(ee,{start:a.start,end:a.end,onClick:function(){n(R.Draggable.action_onClickLine(a.id))}}),s.a.createElement(z,{start:a.start,end:a.end}))},ne=a(24),ie=function(e){var t=e.lines,a=e.selectedLinesIds;return s.a.createElement(Q.b,{backend:ne.a},t.map((function(e){return s.a.createElement(ae,{key:e.id,line:e,isSelected:void 0!==a[e.id]})})))},se=function(e){var t=e.line;return s.a.createElement("div",null,s.a.createElement(z,{start:t.start,end:t.end}))},re=function(e){var t=e.mode===n.EditLines,a=Object(u.c)((function(e){return Object.values(e.appData.lines)})),i=Object(u.c)((function(e){return e.ui.selectedLinesIds}));return t?s.a.createElement(ie,{lines:a,selectedLinesIds:i}):s.a.createElement(s.a.Fragment,null,a.map((function(e){return s.a.createElement(se,{key:e.id,line:e})})))},oe=function(e){var t=e.location,a=e.onDrag,n=t.x,i=t.y,r=t.w,o=t.h;return s.a.createElement(Q.b,{backend:ne.a},s.a.createElement(Z.DraggableCore,{onStart:a,onDrag:a,onStop:a,scale:1,disabled:!1},s.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:r,height:o,transform:Y(n,i),opacity:1,zIndex:22,border:"1px dashed rgba(0,0,0,0.2)",background:"rgba(0,0,0,0.05)",cursor:"move"}},"\xa0")))},ce=s.a.memo((function(e){e.selectedLinesIdsCount;var t=Object(u.c)((function(e){return Object.keys(e.ui.selectedLinesIds).map((function(t){return e.appData.lines[t]}))})),a=Number.MAX_SAFE_INTEGER,n=-1*Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,r=-1*Number.MAX_SAFE_INTEGER;t.forEach((function(e){var t=e.start,s=e.end;a=Math.min(a,t.x,s.x),n=Math.max(n,t.x,s.x),i=Math.min(i,t.y,s.y),r=Math.max(r,t.y,s.y)}));var o={x:a,y:i,w:n-a+10,h:r-i+10},c=Object(u.b)();return s.a.createElement(oe,{location:o,onDrag:function(e,t){var a=t.deltaX,n=t.deltaY;c(R.Draggable.action_onGroupLineDrag({deltaX:a,deltaY:n}))}})})),de=function(e){var t=e.location,a=t.x,n=t.y,i=t.w,r=t.h;return s.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:i,height:r,transform:Y(a,n),opacity:1,zIndex:22,border:"1px dashed rgba(0,0,0,0.2)",background:"rgba(0,0,0,0.05)"}},"\xa0")},le=s.a.memo((function(e){e.selectedBeadsIdsCount;var t=Object(u.c)((function(e){return Object.keys(e.ui.selectedBeadsIds).map((function(t){return e.appData.beads[t]}))})),a=Number.MAX_SAFE_INTEGER,n=-1*Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,r=-1*Number.MAX_SAFE_INTEGER;t.forEach((function(e){var t=e.position.x,s=e.position.x+10,o=e.position.y,c=e.position.y+10;a=Math.min(a,t,s),n=Math.max(n,t,s),i=Math.min(i,o,c),r=Math.max(r,o,c)}));var o={x:a,y:i,w:n-a+10,h:r-i+10};return s.a.createElement(de,{location:o})})),ue=function(e){var t=e.mode,a=Object(u.c)((function(e){return e.ui.selectedBeadsIdsCount})),i=Object(u.c)((function(e){return e.ui.selectedLinesIdsCount}));return t===n.EditBeads&&a>=2?s.a.createElement(le,{selectedBeadsIdsCount:a}):t===n.EditLines&&i>=2?s.a.createElement(ce,{selectedLinesIdsCount:i}):s.a.createElement(s.a.Fragment,null)},fe=function(){var e=Object(u.c)((function(e){return e.mode}));return s.a.createElement("div",{className:"scene"},s.a.createElement("div",{className:"topbar-wrapper"},s.a.createElement(V,null)),s.a.createElement("div",{className:"actions-wrapper"},s.a.createElement(X,{editorMode:e})),s.a.createElement("div",{className:"scene-wrapper"},s.a.createElement(U,{isActive:e===n.AddLine}),s.a.createElement($,{isVisible:e===n.EditLines}),s.a.createElement(q,{isVisible:e===n.EditBeads}),s.a.createElement(K,{mode:e}),s.a.createElement(re,{mode:e}),s.a.createElement(ue,{mode:e})),s.a.createElement("div",{className:"toolbar-wrapper"},s.a.createElement(J,{value:10,onChange:function(){}})))},me=a(18),he=function(){var e=Object(me.b)(F);return s.a.createElement("div",{className:"App"},s.a.createElement(u.a,{store:e},s.a.createElement(fe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.4fe80792.chunk.js.map