(this.webpackJsonpcoralinio=this.webpackJsonpcoralinio||[]).push([[0],{35:function(e,t,a){e.exports=a(59)},40:function(e,t,a){},42:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n,i,r=a(0),c=a.n(r),s=a(20),o=a.n(s),l=(a(40),a(41),a(42),a(13));!function(e){e.BasicRectangle="BasicRectangle",e.BasicCircle="BasicCircle"}(n||(n={})),function(e){e[e.Idle=0]="Idle",e[e.EditLines=1]="EditLines",e[e.AddLine=2]="AddLine",e[e.EditBeads=3]="EditBeads"}(i||(i={}));var d=a(11),u=a(12),f=a(2),m=a(14),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(m.a)({x:e,y:t},l.immerable,!0)},p=function(e){var t=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)}(e),a=0===t,n=a?0:e.x/t,i=a?0:e.y/t;return b(n,i)},h=function(e,t){return b(e.x*t,e.y*t)},v=function(e,t,a){return b(e.x+t,e.y+a)},g=function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},E=function(e,t){return Math.atan2(e,t)},S=function(e,t,a){return a.x>e.x&&a.x<t.x&&a.y>e.y&&a.y<t.y},y=a(4),x=a(6),O=a(7),j=a(9),I=a(8),D=a(10),C=a(22);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B=function(e,t){var a,i=Object(C.generate)(),r=t||n.BasicCircle,c=(a={id:i,position:e},Object(m.a)(a,l.immerable,!0),Object(m.a)(a,"type",r),a);return r===n.BasicCircle?_(c):r===n.BasicRectangle?w(c):_(c)},_=function(e){return M({},e,{width:20,height:20,fill:"linear-gradient(\n      to bottom,\n      rgba(254, 204, 177, 1) 0%,\n      rgba(241, 116, 50, 1) 50%,\n      rgba(234, 85, 7, 1) 51%,\n      rgba(251, 149, 94, 1) 100%\n    )",settings:{radius:20}})},w=function(e){return M({},e,{width:20,height:40,fill:"#b1b1b1"})},N=function(e){var t=e.start,a=e.end,n=e.beadIds,i=Object(C.generate)();return Object(m.a)({id:i,start:t,end:a,beadIds:n&&n.length>0?n:[],settings:{beadCount:0,autoFill:!0}},l.immerable,!0)},L=function(e){function t(){return Object(x.a)(this,t),Object(j.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(O.a)(t,[{key:"action_onAddLine",value:function(e,t){var a=this.draftState.ui.lineSettings.autoFill,n=N({start:e,end:t,beadIds:[]});n.settings.autoFill=a,this.draftState.appData.lines[n.id]=n,this.draftState.mode=i.EditLines,this.updateBeadsPositions(n.id),this.draftState.ui.saveInfo.saved=!1}},{key:"action_onStartPointDrag",value:function(e,t){if(this.draftState.appData.lines[e]){var a=this.draftState.appData.lines[e];a.start.x=t.x-5,a.start.y=t.y-5,this.updateBeadsPositions(a.id),this.draftState.ui.saveInfo.saved=!1}}},{key:"action_onEndPointDrag",value:function(e,t){if(this.draftState.appData.lines[e]){var a=this.draftState.appData.lines[e];a.end.x=t.x-5,a.end.y=t.y-5,this.updateBeadsPositions(a.id),this.draftState.ui.saveInfo.saved=!1}}},{key:"action_onLineDrag",value:function(e,t){if(this.draftState.appData.lines[e]){var a=this.draftState.appData.lines[e];a.start.x=a.start.x+t.deltaX,a.start.y=a.start.y+t.deltaY,a.end.x=a.end.x+t.deltaX,a.end.y=a.end.y+t.deltaY,this.updateBeadsPositions(a.id),this.draftState.ui.saveInfo.saved=!1}}},{key:"action_onGroupLineDrag",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){if(t.draftState.appData.lines[a]){var n=t.draftState.appData.lines[a];n.start.x=n.start.x+e.deltaX,n.start.y=n.start.y+e.deltaY,n.end.x=n.end.x+e.deltaX,n.end.y=n.end.y+e.deltaY,t.updateBeadsPositions(n.id),t.draftState.ui.saveInfo.saved=!1}}))}},{key:"action_onGroupBeadsDrag",value:function(e){}},{key:"action_onClickLine",value:function(e){this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIds[e]=!0,this.draftState.ui.selectedLinesIdsCount=1}},{key:"action_onClickBead",value:function(e){this.draftState.ui.selectedBeadsIds={},this.draftState.ui.selectedBeadsIds[e]=!0,this.draftState.ui.selectedBeadsIdsCount=1}},{key:"updateBeadsPositions",value:function(e){var t=this,a=this.draftState.appData.lines[e],n=a.start,i=a.end,r=a.beadIds,c=g(n,i),s=Math.floor((c-25-5)/25),o=r.length;if(s>o)for(var l=s-o,d=0;d<l;d++){var u=b(),f=B(u);this.draftState.appData.beads[f.id]=f,this.draftState.appData.lines[e].beadIds.push(f.id)}else if(s<o)for(var m=o-s,E=0;E<m;E++){var S=this.draftState.appData.lines[e].beadIds.length,y=this.draftState.appData.lines[e].beadIds.splice(S-1,1);delete this.draftState.appData.beads[y[0]]}var x=25;this.draftState.appData.lines[e].beadIds.forEach((function(e){var a=function(e,t,a,n,i){var r=b(a-e,n-t);return r=p(r),r=h(r,i),r=v(r,e,t)}(n.x,n.y,i.x,i.y,x),r=a.x-10+5,c=a.y-10+5;t.draftState.appData.beads[e].position.x=r,t.draftState.appData.beads[e].position.y=c,x+=25}))}}]),t}(y.ImmerReducer),R=function(e){function t(){return Object(x.a)(this,t),Object(j.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(O.a)(t,[{key:"action_onClearCanvas",value:function(){this.draftState.appData.beads={},this.draftState.appData.lines={},this.draftState.ui.saveInfo.saved=!1}},{key:"action_readSavedCanvas",value:function(){var e=this;if(this.draftState.ui.saveInfo.saved=!0,"localStorage"in window){var t=localStorage.getItem("appData");if(null!==t){this.draftState.appData={beads:{},lines:{}};var a=JSON.parse(t);Object.keys(a.beads).forEach((function(t){var n=a.beads[t],i=B(n.position);i.id=n.id,e.draftState.appData.beads[t]=i})),Object.keys(a.lines).forEach((function(t){var n=a.lines[t],i=N({start:n.start,end:n.end,beadIds:n.beadIds});i.id=n.id,e.draftState.appData.lines[t]=i})),console.log("action_readSavedCanvas loaded")}else console.info("No data in localstorage")}else console.info("No localstorage available")}},{key:"action_onSaveCanvas",value:function(){"localStorage"in window?(localStorage.setItem("appData",JSON.stringify(this.draftState.appData)),this.draftState.ui.saveInfo.saved=!0,console.log("action_onSaveCanvas saved")):console.info("No localstorage available")}}]),t}(y.ImmerReducer),F=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(j.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(i)))).clearSelectedBeads=function(){a.draftState.ui.selectedBeadsIdsCount>0&&(a.draftState.ui.selectedBeadsIds={},a.draftState.ui.selectedBeadsIdsCount=0)},a.clearSelectedLines=function(){a.draftState.ui.selectedLinesIdsCount&&(a.draftState.ui.selectedLinesIds={},a.draftState.ui.selectedLinesIdsCount=0)},a}return Object(D.a)(t,e),Object(O.a)(t,[{key:"action_onChangeEditorMode",value:function(e){this.draftState.mode=e,this.clearSelectedBeads(),this.clearSelectedLines()}},{key:"action_setSaveInfo",value:function(e){this.draftState.ui.saveInfo.saved=e}}]),t}(y.ImmerReducer),A=function(e){function t(){return Object(x.a)(this,t),Object(j.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(O.a)(t,[{key:"action_test",value:function(){}}]),t}(y.ImmerReducer),X=a(29),P=function(e){function t(){return Object(x.a)(this,t),Object(j.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(O.a)(t,[{key:"action_onEditBeadsMouseDown",value:function(e,t){this.draftState.ui.mouseSelection.isDragStarted=!0,this.draftState.ui.mouseSelection.start.x=e,this.draftState.ui.mouseSelection.start.y=t,this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t}},{key:"action_onEditBeadsMouseMove",value:function(e,t){var a=this;if(this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t,!1===this.draftState.ui.mouseSelection.isDragged){var n=this.draftState.ui.mouseSelection,i=n.start,r=n.end,c=r.x-i.x,s=r.y-i.y;(Math.abs(c)>5||Math.abs(s)>5)&&(this.draftState.ui.mouseSelection.isDragged=!0)}if(!0===this.draftState.ui.mouseSelection.isDragged){var o=this.draftState.ui.mouseSelection,l=o.start,d=o.end,u=b(Math.min(l.x,d.x),Math.min(l.y,d.y)),f=b(Math.max(l.x,d.x),Math.max(l.y,d.y)),m=Object.keys(this.draftState.ui.selectedBeadsIds),p=[];Object.keys(this.draftState.appData.beads).forEach((function(e){var t=a.draftState.appData.beads[e],n=b(t.position.x+10,t.position.y+10);S(u,f,n)&&p.push(e)})),Object(X.difference)(p,m).length>0&&(this.draftState.ui.selectedBeadsIds={},this.draftState.ui.selectedBeadsIdsCount=0,p.forEach((function(e){a.draftState.ui.selectedBeadsIds[e]=!0,a.draftState.ui.selectedBeadsIdsCount=a.draftState.ui.selectedBeadsIdsCount+1})))}}},{key:"action_onEditBeadsMouseUp",value:function(){!1===this.draftState.ui.mouseSelection.isDragged&&this.draftState.ui.selectedBeadsIdsCount>0&&(this.draftState.ui.selectedBeadsIds={}),this.draftState.ui.mouseSelection.isDragStarted=!1,this.draftState.ui.mouseSelection.isDragged=!1,this.draftState.ui.mouseSelection.start.x=0,this.draftState.ui.mouseSelection.start.y=0,this.draftState.ui.mouseSelection.end.x=0,this.draftState.ui.mouseSelection.end.y=0}},{key:"action_onEditLinesMouseDown",value:function(e,t){this.draftState.ui.mouseSelection.isDragStarted=!0,this.draftState.ui.mouseSelection.start.x=e,this.draftState.ui.mouseSelection.start.y=t,this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t}},{key:"action_onEditLinesMouseMove",value:function(e,t){var a=this;if(this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t,!1===this.draftState.ui.mouseSelection.isDragged){var n=this.draftState.ui.mouseSelection,i=n.start,r=n.end,c=r.x-i.x,s=r.y-i.y;(Math.abs(c)>5||Math.abs(s)>5)&&(this.draftState.ui.mouseSelection.isDragged=!0)}if(!0===this.draftState.ui.mouseSelection.isDragged){var o=this.draftState.ui.mouseSelection,l=o.start,d=o.end,u=b(Math.min(l.x,d.x),Math.min(l.y,d.y)),f=b(Math.max(l.x,d.x),Math.max(l.y,d.y)),m=Object.keys(this.draftState.ui.selectedLinesIds),p=[];Object.keys(this.draftState.appData.lines).forEach((function(e){var t=a.draftState.appData.lines[e];(S(u,f,t.start)||S(u,f,t.end))&&p.push(e)})),Object(X.difference)(p,m).length>0&&(this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIdsCount=0,p.forEach((function(e){a.draftState.ui.selectedLinesIds[e]=!0,a.draftState.ui.selectedLinesIdsCount=a.draftState.ui.selectedLinesIdsCount+1})))}}},{key:"action_onEditLinesMouseUp",value:function(){!1===this.draftState.ui.mouseSelection.isDragged&&this.draftState.ui.selectedLinesIdsCount>0&&(this.draftState.ui.selectedLinesIds={}),this.draftState.ui.mouseSelection.isDragStarted=!1,this.draftState.ui.mouseSelection.isDragged=!1,this.draftState.ui.mouseSelection.start.x=0,this.draftState.ui.mouseSelection.start.y=0,this.draftState.ui.mouseSelection.end.x=0,this.draftState.ui.mouseSelection.end.y=0}}]),t}(y.ImmerReducer),T=function(e){function t(){return Object(x.a)(this,t),Object(j.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(O.a)(t,[{key:"action_changeBeadFill",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){t.draftState.appData.beads[a].fill=e}))}},{key:"action_changeBeadType",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){t.draftState.appData.beads[a].type=e}))}},{key:"action_onBeadRotate",value:function(e,t){t.deg}},{key:"action_onBeadsRotate",value:function(e){e.deg}}]),t}(y.ImmerReducer),Y={appData:{beads:{},lines:{}},ui:{lineSettings:{autoFill:!0},saveInfo:{saved:!1},selectedLinesIds:{},selectedLinesIdsCount:0,selectedBeadsIds:{},selectedBeadsIdsCount:0,mouseSelection:{start:b(0,0),end:b(0,0),isDragStarted:!1,isDragged:!1}},mode:i.Idle},z={Main:Object(y.createActionCreators)(A),Draggable:Object(y.createActionCreators)(L),Persist:Object(y.createActionCreators)(R),ChangeEditorMode:Object(y.createActionCreators)(F),MouseSelection:Object(y.createActionCreators)(P),Toolbar:Object(y.createActionCreators)(T)},G=Object(y.composeReducers)(Object(y.createReducerFunction)(A,Y),Object(y.createReducerFunction)(L,Y),Object(y.createReducerFunction)(R,Y),Object(y.createReducerFunction)(T,Y),Object(y.createReducerFunction)(F,Y),Object(y.createReducerFunction)(P,Y)),U=function(e){var t=e.editorMode,a=Object(f.b)(),n=function(e){a(z.ChangeEditorMode.action_onChangeEditorMode(e))};return c.a.createElement("div",{className:""},c.a.createElement("div",{className:"\n              button \n              ".concat(t===i.Idle?"is-active":"","\n            "),onClick:function(){return n(i.Idle)}},c.a.createElement("span",{className:"icon is-small"},c.a.createElement(d.a,{icon:u.a,color:"#aeaeae"})),c.a.createElement("span",null,"Idle")),c.a.createElement("div",{className:"\n              button \n              ".concat(t===i.EditLines?"is-active":"","\n            "),onClick:function(){return n(i.EditLines)}},c.a.createElement("span",{className:"icon is-small"},c.a.createElement(d.a,{icon:u.d,color:"#aeaeae"})),c.a.createElement("span",null,"EditLines")),c.a.createElement("div",{className:"\n              button \n              ".concat(t===i.EditBeads?"is-active":"","\n            "),onClick:function(){return n(i.EditBeads)}},c.a.createElement("span",{className:"icon is-small"},c.a.createElement(d.a,{icon:u.d,color:"#aeaeae"})),c.a.createElement("span",null,"Edit Beads")),c.a.createElement("div",{className:"\n              button \n              ".concat(t===i.AddLine?"is-active":"","\n            "),onClick:function(){return n(i.AddLine)}},c.a.createElement("span",{className:"icon is-small"},c.a.createElement(d.a,{icon:u.f,color:"#aeaeae"})),c.a.createElement("span",null,"AddLine")))},V=a(25),J=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"translate3d(".concat(e,"px, ").concat(t,"px, ").concat(a,"px)")},W=function(e){return"rotate(".concat(e,"rad)")},q=function(e){var t=e.start,a=e.end,n=g(t,a),i=E(a.y-t.y,a.x-t.x);return c.a.createElement("div",{style:{height:1,width:n,transform:"".concat(J(t.x+5,t.y+5)," ").concat(W(i)),transformOrigin:"left center"},className:"line"},"\xa0")},H=function(e){return!1===e.isActive?c.a.createElement(c.a.Fragment,null):c.a.createElement(K,null)},K=function(){var e=Object(r.useState)({x:0,y:0}),t=Object(V.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)({x:0,y:0}),s=Object(V.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(!1),u=Object(V.a)(d,2),m=u[0],b=u[1],p=Object(r.useRef)(null),h=function(e){if(m&&p.current){var t=p.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;l({x:n,y:i}),g(a,o),b(!1)}},v=Object(f.b)(),g=function(e,t){v(z.Draggable.action_onAddLine(e,t))};return c.a.createElement("div",null,c.a.createElement("div",{onMouseDown:function(e){if(p.current){var t=p.current.getBoundingClientRect(),a=e.clientX-t.left,i=e.clientY-t.top;n({x:a,y:i}),l({x:a,y:i}),b(!0)}},onMouseUp:h,onMouseMove:function(e){if(m&&p.current){var t=p.current.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;l({x:a,y:n})}},onMouseLeave:h,className:"add-line-wrapper",ref:p}),m?c.a.createElement("div",null,c.a.createElement("div",{style:{transform:J(a.x,a.y),width:10,height:10},className:"line-start"},"\xa0"),c.a.createElement("div",{style:{transform:J(o.x,o.y),width:10,height:10},className:"line-end"},"\xa0"),c.a.createElement(q,{start:a,end:o})):null)},$=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.ui.saveInfo.saved}));return c.a.createElement("div",{className:"field has-addons"},c.a.createElement("div",{className:"control"},c.a.createElement("div",{className:" button ",onClick:function(){e(z.Persist.action_onClearCanvas())}},c.a.createElement("span",{className:"icon is-small"},c.a.createElement(d.a,{icon:u.h,color:"#aeaeae"})),c.a.createElement("span",null,"Clear canvas"))),c.a.createElement("div",{className:"control"},c.a.createElement("div",{className:" button ".concat(t?"is-success":""),onClick:function(){e(z.Persist.action_onSaveCanvas())}},c.a.createElement("span",{className:"icon is-small"},c.a.createElement(d.a,{icon:u.g,color:"#aeaeae"})),c.a.createElement("span",null,"Save canvas"))),c.a.createElement("div",{className:"control"},c.a.createElement("div",{className:" button ",onClick:function(){e(z.Persist.action_readSavedCanvas())}},c.a.createElement("span",{className:"icon is-small"},c.a.createElement(d.a,{icon:u.c})),c.a.createElement("span",null,"Load from localstorage"))))},Q=function(e){var t=e.isVisible,a=Object(r.useRef)(null),n=Object(f.c)((function(e){return e.ui.mouseSelection.start})),i=Object(f.c)((function(e){return e.ui.mouseSelection.end})),s=Object(f.c)((function(e){return e.ui.mouseSelection.isDragStarted}));if(!1===t)return c.a.createElement(c.a.Fragment,null);var o=!0===s,l=e.onMouseDown,d=e.onMouseUp,u=e.onMouseMove,m=Math.abs(i.x-n.x),b=Math.abs(i.y-n.y),p=Math.min(i.x,n.x),h=Math.min(i.y,n.y);return c.a.createElement("div",{className:"mouse-selection",ref:a,onMouseDown:function(e){if(a.current){var t=a.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;l(n,i)}},onMouseUp:function(e){d()},onMouseMove:function(e){if(o&&a.current){var t=a.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;u(n,i)}},style:{zIndex:o?23:9}},o?c.a.createElement("div",{style:{width:m,height:b,backgroundColor:"rgba(0,0,0, 0.05)",border:"1px solid rgba(0,0,0,.3)",transform:J(p,h)}}):null)},Z=function(e){var t=e.isVisible,a=Object(f.b)();return c.a.createElement(Q,{isVisible:t,onMouseDown:function(e,t){a(z.MouseSelection.action_onEditBeadsMouseDown(e,t))},onMouseMove:function(e,t){a(z.MouseSelection.action_onEditBeadsMouseMove(e,t))},onMouseUp:function(){a(z.MouseSelection.action_onEditBeadsMouseUp())}})},ee=function(e){var t=e.isVisible,a=Object(f.b)();return c.a.createElement(Q,{isVisible:t,onMouseDown:function(e,t){a(z.MouseSelection.action_onEditLinesMouseDown(e,t))},onMouseMove:function(e,t){a(z.MouseSelection.action_onEditLinesMouseMove(e,t))},onMouseUp:function(){a(z.MouseSelection.action_onEditLinesMouseUp())}})},te=function(e){var t=e.bead,a=e.opacity,i=e.zIndex,r=e.isSelected,s=e.isSelectable,o=void 0!==a&&a>=0&&a<=1,l=void 0!==i&&i>=0&&i<=9999,d=Object(f.b)(),u={transform:J(t.position.x,t.position.y),opacity:o?a:1,zIndex:l?i:void 0,border:r?"2px solid #000":""};return t.type===n.BasicCircle&&(u.background=t.fill,u.width=t.width,u.height=t.height,u.borderRadius=t.settings.radius),t.type===n.BasicRectangle&&(u.background=t.fill,u.width=t.width,u.height=t.height),c.a.createElement("div",{className:"bead-item",onClick:function(){s&&d(z.Draggable.action_onClickBead(t.id))},style:u},"\xa0")},ae=function(e){var t=e.mode,a=t===i.EditLines,n=t===i.EditBeads,r=t===i.EditBeads,s=Object(f.c)((function(e){return Object.values(e.appData.beads)})),o=Object(f.c)((function(e){return e.ui.selectedBeadsIds}));return c.a.createElement(c.a.Fragment,null,s.map((function(e){return c.a.createElement(te,{key:e.id,bead:e,opacity:a?.5:1,isSelected:void 0!==o[e.id],isSelectable:r,zIndex:a?10:n?20:void 0})})))},ne=a(23),ie=a(18),re=function(e){var t=e.start,a=e.end,n=e.onClick,i=g(t,a),r=E(a.y-t.y,a.x-t.x);return c.a.createElement("div",{style:{height:10,width:i,backgroundColor:"rgba(0,0,0,0.0)",transform:"".concat(J(t.x+0,t.y+0)," ").concat(W(r)),transformOrigin:"left center",cursor:"pointer",zIndex:20},onClick:n,className:"line"},"\xa0")},ce=function(e){var t=e.lineId,a=e.start,n=e.end,i=g(a,n),r=E(n.y-a.y,n.x-a.x),s=Object(f.b)(),o=function(e,a){var n=a.deltaX,i=a.deltaY;s(z.Draggable.action_onLineDrag(t,{deltaX:n,deltaY:i}))};return c.a.createElement(ie.DraggableCore,{onStart:o,onDrag:o,onStop:o,disabled:!1,scale:1},c.a.createElement("div",{style:{height:10,width:i,backgroundColor:"rgba(0,0,0,0.05)",border:"1px dashed rgba(0,0,0,0.60)",transform:"".concat(J(a.x+0,a.y+0)," ").concat(W(r)),transformOrigin:"left center",cursor:"move",zIndex:21},className:"line"},"\xa0"))},se=function(e){var t=e.isSelected,a=e.line,n=Object(f.b)(),i=function(e,t){var i=t.x,r=t.y;n(z.Draggable.action_onStartPointDrag(a.id,{x:i,y:r}))},r=function(e,t){var i=t.x,r=t.y;n(z.Draggable.action_onEndPointDrag(a.id,{x:i,y:r}))};return c.a.createElement("div",null,c.a.createElement(ie.DraggableCore,{onStart:i,onDrag:i,onStop:i,scale:1,disabled:!1},c.a.createElement("div",{style:{transform:J(a.start.x,a.start.y),zIndex:!0===t?22:21,width:10,height:10},className:"line-start"},"\xa0")),c.a.createElement(ie.DraggableCore,{onStart:r,onDrag:r,onStop:r,disabled:!1,scale:1},c.a.createElement("div",{style:{transform:J(a.end.x,a.end.y),zIndex:!0===t?22:21,width:10,height:10},className:"line-end"},"\xa0")),!0===t?c.a.createElement(ce,{start:a.start,end:a.end,lineId:a.id}):c.a.createElement(re,{start:a.start,end:a.end,onClick:function(){n(z.Draggable.action_onClickLine(a.id))}}),c.a.createElement(q,{start:a.start,end:a.end}))},oe=a(24),le=function(e){var t=e.lines,a=e.selectedLinesIds;return c.a.createElement(ne.b,{backend:oe.a},t.map((function(e){return c.a.createElement(se,{key:e.id,line:e,isSelected:void 0!==a[e.id]})})))},de=function(e){var t=e.line;return c.a.createElement("div",null,c.a.createElement(q,{start:t.start,end:t.end}))},ue=function(e){var t=e.mode===i.EditLines,a=Object(f.c)((function(e){return Object.values(e.appData.lines)})),n=Object(f.c)((function(e){return e.ui.selectedLinesIds}));return t?c.a.createElement(le,{lines:a,selectedLinesIds:n}):c.a.createElement(c.a.Fragment,null,a.map((function(e){return c.a.createElement(de,{key:e.id,line:e})})))},fe=function(e){var t=e.location,a=e.onDrag,n=t.x,i=t.y,r=t.w,s=t.h;return c.a.createElement(ne.b,{backend:oe.a},c.a.createElement(ie.DraggableCore,{onStart:a,onDrag:a,onStop:a,scale:1,disabled:!1},c.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:r,height:s,transform:J(n,i),opacity:1,zIndex:22,border:"1px dashed rgba(0,0,0,0.2)",background:"rgba(0,0,0,0.05)",cursor:"move"}},"\xa0")))},me=function(e){var t=Number.MAX_SAFE_INTEGER,a=-1*Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=-1*Number.MAX_SAFE_INTEGER;return e.forEach((function(e){var r=e.start,c=e.end;t=Math.min(t,r.x,c.x),a=Math.max(a,r.x,c.x),n=Math.min(n,r.y,c.y),i=Math.max(i,r.y,c.y)})),{x:t,y:n,w:a-t+10,h:i-n+10}},be=function(e){return Object.keys(e.ui.selectedLinesIds).map((function(t){return e.appData.lines[t]}))},pe=c.a.memo((function(e){e.selectedLinesIdsCount;var t=Object(f.b)(),a=Object(f.c)(be),n=me(a);return c.a.createElement(fe,{location:n,onDrag:function(e,a){var n=a.deltaX,i=a.deltaY;t(z.Draggable.action_onGroupLineDrag({deltaX:n,deltaY:i}))}})})),he=function(e){var t=e.location,a=t.x,n=t.y,i=t.w,r=t.h;return c.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:i,height:r,transform:J(a,n),opacity:1,zIndex:22,border:"1px dashed rgba(0,0,0,0.2)",background:"rgba(0,0,0,0.05)"}},"\xa0")},ve=function(e){return Object.keys(e.ui.selectedBeadsIds).map((function(t){return e.appData.beads[t]}))},ge=c.a.memo((function(e){e.selectedBeadsIdsCount;var t=function(e){var t=Number.MAX_SAFE_INTEGER,a=-1*Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=-1*Number.MAX_SAFE_INTEGER;return e.forEach((function(e){var r=e.position.x,c=e.position.x+10,s=e.position.y,o=e.position.y+10;t=Math.min(t,r,c),a=Math.max(a,r,c),n=Math.min(n,s,o),i=Math.max(i,s,o)})),{x:t,y:n,w:a-t+10,h:i-n+10}}(Object(f.c)(ve));return c.a.createElement(he,{location:t})})),Ee=function(e){var t=e.mode,a=Object(f.c)((function(e){return e.ui.selectedBeadsIdsCount})),n=Object(f.c)((function(e){return e.ui.selectedLinesIdsCount}));return t===i.EditBeads&&a>=2?c.a.createElement(ge,{selectedBeadsIdsCount:a}):t===i.EditLines&&n>=2?c.a.createElement(pe,{selectedLinesIdsCount:n}):c.a.createElement(c.a.Fragment,null)},Se=function(e){return e.mode===i.EditBeads?c.a.createElement(ye,null):c.a.createElement(c.a.Fragment,null)},ye=function(){return Object(f.c)((function(e){return e.ui.selectedBeadsIdsCount>=1}))?c.a.createElement(xe,null):c.a.createElement(c.a.Fragment,null)},xe=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return Array.from(new Set(Object.keys(e.ui.selectedBeadsIds).map((function(t){return e.appData.beads[t].fill}))))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(Oe,{selectedColors:t}),c.a.createElement(je,{colors:["#e3dec1","#e5a947","#7a514a"],selectedColors:t,onClick:function(t){e(z.Toolbar.action_changeBeadFill(t))}}))},Oe=function(e){var t=e.selectedColors;return c.a.createElement("div",{className:"fieldset"},c.a.createElement("div",{className:"label"},"Wype\u0142nienie:"),c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",boxSizing:"border-box",paddingLeft:"10px",paddingRight:"20px",width:"100%"}},t.map((function(e){return c.a.createElement(Ie,{background:e,key:e,isSelected:!1,onClick:void 0})}))))},je=function(e){var t=e.colors,a=e.selectedColors,n=e.onClick;return c.a.createElement("div",{className:"fieldset"},c.a.createElement("div",{className:"label"},"Kolory:"),c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",boxSizing:"border-box",paddingLeft:"10px",paddingRight:"20px",width:"100%"}},t.map((function(e){return c.a.createElement(Ie,{background:e,key:e,isSelected:-1!==a.indexOf(e),onClick:n})}))))},Ie=function(e){var t=e.background,a=e.isSelected,n=e.onClick;return c.a.createElement("div",{style:{border:"5px solid transparent"}},c.a.createElement("div",{onClick:n?function(){return n(t)}:void 0,style:{width:25,height:25,background:t,marginBottom:0,marginRight:0,border:"2px solid #000",boxShadow:a?"2px 2px 2px rgba(0,0,0,1)":"2px 2px 2px rgba(0,0,0,0.1)"}}))},De=function(e){return e.mode===i.EditLines?c.a.createElement(Ce,null):c.a.createElement(c.a.Fragment,null)},Ce=function(){var e=Object(f.c)((function(e){return e.ui.selectedLinesIdsCount}));return e>=2?c.a.createElement(Me,{selectedLinesIdsCount:e}):1==e?c.a.createElement(ke,null):c.a.createElement(c.a.Fragment,null)},ke=function(){var e=Object(f.c)(be),t=me(e),a=Object(f.b)(),n=function(t,n){var i=e[0].id;a(z.Draggable.action_onLineDrag(i,{deltaX:t,deltaY:n}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Be,{label:"X",value:t.x,onChange:function(e){n(t.x-e,0)},isDisabled:!1}),c.a.createElement(Be,{label:"Y",value:t.y,onChange:function(e){n(0,t.y-e)},isDisabled:!1}))},Me=function(e){e.selectedLinesIdsCount;var t=Object(f.c)(be),a=me(t),n=Object(f.b)(),i=function(e,t){n(z.Draggable.action_onGroupLineDrag({deltaX:e,deltaY:t}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Be,{label:"X",value:a.x,onChange:function(e){i(a.x-e,0)},isDisabled:!1}),c.a.createElement(Be,{label:"Y",value:a.y,onChange:function(e){i(0,a.y-e)},isDisabled:!1}),c.a.createElement(Be,{label:"W",value:a.w,onChange:function(){},isDisabled:!0}),c.a.createElement(Be,{label:"H",value:a.h,onChange:function(){},isDisabled:!0}))},Be=function(e){var t=e.label,a=e.value,n=e.onChange,i=e.isDisabled;return c.a.createElement("div",{className:"fieldset"},c.a.createElement("span",{className:"label"},t),c.a.createElement("input",{className:"input",type:"number",disabled:i,min:"0",max:"99999",pattern:"\\d*",step:"1",value:a,onChange:function(e){return n(e.target.value)}}))},_e=function(e){return e.mode===i.EditBeads?c.a.createElement(we,null):c.a.createElement(c.a.Fragment,null)},we=function(){return Object(f.c)((function(e){return e.ui.selectedBeadsIdsCount>=1}))?c.a.createElement(Ne,null):c.a.createElement(c.a.Fragment,null)},Ne=function(){var e=Object(f.b)(),t=[{type:n.BasicCircle,icon:"circle"},{type:n.BasicRectangle,icon:"rectangle-wide"}],a=Object(f.c)((function(e){return Array.from(new Set(Object.keys(e.ui.selectedBeadsIds).map((function(t){return e.appData.beads[t].type}))))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(Le,{selectedTypes:a}),c.a.createElement(Re,{types:t,selectedTypes:a,onClick:function(t){e(z.Toolbar.action_changeBeadType(t))}}))},Le=function(e){var t=e.selectedTypes;return c.a.createElement("div",{className:"fieldset"},c.a.createElement("div",{className:"label"},"Rodzaj:"),c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",boxSizing:"border-box",paddingLeft:"10px",paddingRight:"20px",width:"100%"}},t.map((function(e,t){return c.a.createElement(Fe,{icon:e.icon,type:e.type,key:t,isSelected:!1,onClick:void 0})}))))},Re=function(e){var t=e.types,a=e.selectedTypes,n=e.onClick;return c.a.createElement("div",{className:"fieldset"},c.a.createElement("div",{className:"label"},"Rodzaje:"),c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",boxSizing:"border-box",paddingLeft:"10px",paddingRight:"20px",width:"100%"}},t.map((function(e,t){return c.a.createElement(Fe,{icon:e.icon,type:e.type,key:t,isSelected:-1!==a.indexOf(e.type),onClick:n})}))))},Fe=function(e){var t=e.icon,a=e.type,n=e.isSelected,i=e.onClick;return c.a.createElement("div",{style:{border:"5px solid transparent"}},c.a.createElement("div",{onClick:i?function(){return i(a)}:void 0,style:{width:25,height:25,background:"#eee",marginBottom:0,marginRight:0,border:"2px solid #000",boxShadow:n?"2px 2px 2px rgba(0,0,0,1)":"2px 2px 2px rgba(0,0,0,0.1)",display:"flex",justifyContent:"center",alignItems:"center"}},"circle"===t?c.a.createElement(d.a,{icon:u.b}):null,"rectangle-wide"===t?c.a.createElement(d.a,{icon:u.e}):null))},Ae=function(e){return e.mode===i.EditBeads?c.a.createElement(Xe,null):c.a.createElement(c.a.Fragment,null)},Xe=function(){Object(f.c)((function(e){return e.ui.selectedBeadsIdsCount}));return c.a.createElement(c.a.Fragment,null)},Pe=function(){var e=Object(f.c)((function(e){return e.mode})),t=Object(f.d)().getState();return console.log("EditorRerender: ",t),c.a.createElement("div",{className:"scene"},c.a.createElement("div",{className:"topbar-wrapper"},c.a.createElement($,null)),c.a.createElement("div",{className:"actions-wrapper"},c.a.createElement(U,{editorMode:e})),c.a.createElement("div",{className:"scene-wrapper"},c.a.createElement(H,{isActive:e===i.AddLine}),c.a.createElement(ee,{isVisible:e===i.EditLines}),c.a.createElement(Z,{isVisible:e===i.EditBeads}),c.a.createElement(ae,{mode:e}),c.a.createElement(ue,{mode:e}),c.a.createElement(Ee,{mode:e})),c.a.createElement("div",{className:"toolbar-wrapper"},c.a.createElement(De,{mode:e}),c.a.createElement(_e,{mode:e}),c.a.createElement(Ae,{mode:e}),c.a.createElement(Se,{mode:e})))},Te=a(19),Ye=function(){var e=Object(Te.b)(G,"__REDUX_DEVTOOLS_EXTENSION__"in window&&window.__REDUX_DEVTOOLS_EXTENSION__());return c.a.createElement("div",{className:"App"},c.a.createElement(f.a,{store:e},c.a.createElement(Pe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.5f606fed.chunk.js.map