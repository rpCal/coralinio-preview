{"version":3,"sources":["editorObjects/Editor.tsx","editorObjects/Point.ts","editorObjects/Bead.ts","editorObjects/Line.ts","immerReducers/DraggableOperationsImmerReducer.tsx","immerReducers/PersistImmerReducer.tsx","immerReducers/ChangeEditorModeImmerReducer.tsx","immerReducers/MainImmerReducer.tsx","immerReducers/MouseSelectionImmerReducer.tsx","store.tsx","components/Toolbar/EditorModes.tsx","components/colors.ts","components/operations/MapValuesToCss.tsx","components/Line/StraightLine.tsx","components/Line/AddLineMode.tsx","components/Toolbar/EditorChangeState.tsx","components/Toolbar/InputWidth.tsx","components/operations/MouseSelection.tsx","components/Bead/MouseSelectionBeads.tsx","components/Line/MouseSelectionLines.tsx","components/Bead/DisplayBead.tsx","components/Bead/DisplayBeads.tsx","components/Line/SelectionStraightLine.tsx","components/Line/SelectedStraightLine.tsx","components/Line/DisplayLine.tsx","components/Line/DraggableLines.tsx","components/Line/DisplaySimpleLine.tsx","components/Line/DisplayLines.tsx","components/operations/DisplayGroupLines.tsx","components/operations/DisplayLinesGroup.tsx","components/operations/DisplayGroupBeads.tsx","components/operations/DisplayBeadsGroup.tsx","components/operations/GroupSelectionPlaceholder.tsx","components/Editor.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["EditorMode","build","x","y","immerable","normalize","point","length","Math","sqrt","getLength","useLen","scale","scalar","add","getDistanceBetweenPoints","start","end","getRotate","atan2","contain","p1","p2","p","position","id","generate","props","beadIds","settings","beadCount","autoFill","DraggableOperationsImmerReducer","useAutoFill","this","draftState","ui","lineSettings","line","buildLine","appData","lines","mode","EditLines","updateBeadsPositions","saveInfo","saved","key","data","deltaX","deltaY","Object","keys","selectedLinesIds","forEach","lineId","selectedLinesIdsCount","beadId","selectedBeadsIds","selectedBeadsIdsCount","currentLine","len","count","floor","beadWidth","currentCount","remainingCount","i","buildPoint","bead","buildBead","beads","push","arrLen","lastItemBeadId","splice","currentDistance","newPosition","startX","startY","endX","endY","distance","getPointFromStartLine","ImmerReducer","PersistImmerReducer","window","readedData","localStorage","getItem","cached","JSON","parse","currBead","currLine","console","log","info","setItem","stringify","ChangeEditorModeImmerReducer","clearSelectedBeads","clearSelectedLines","newEditorMode","newValue","MainImmerReducer","MouseSelectionImmerReducer","mouseSelection","isDragStarted","isDragged","abs","min","max","p3","selectedIds","newIds","difference","defaultAppData","Idle","Actions","Main","createActionCreators","Draggable","Persist","ChangeEditorMode","MouseSelection","store","composeReducers","createReducerFunction","EditorModes","editorMode","dispatch","useDispatch","onChangeEditorMode","action_onChangeEditorMode","className","onClick","icon","faArrowsAlt","color","faEdit","EditBeads","AddLine","faPlus","getTranslate3dCss","z","getRotateCss","rotate","StraightLine","width","style","height","transform","transformOrigin","AddLineMode","isActive","Fragment","AddLineModeContent","useState","startPoint","setStartPoint","endPoint","setEndPoint","isDragEnabled","setIsDragEnabled","lineRef","useRef","onMouseUp","event","current","rect","getBoundingClientRect","clientX","left","clientY","top","onAddLine","action_onAddLine","onMouseDown","onMouseMove","onMouseLeave","ref","EditorChangeState","isSaved","useSelector","state","action_onClearCanvas","faTimes","action_onSaveCanvas","faSave","action_readSavedCanvas","faDownload","InputWidth","value","onChange","type","isVisible","sceneWrapperRef","mouseSelectionIsDragStarted","zIndex","backgroundColor","border","MouseSelectionBeads","action_onEditBeadsMouseDown","action_onEditBeadsMouseMove","action_onEditBeadsMouseUp","MouseSelectionLines","action_onEditLinesMouseDown","action_onEditLinesMouseMove","action_onEditLinesMouseUp","DisplayBead","opacity","isSelected","isOpacity","undefined","isZindex","action_onClickBead","DisplayBeads","fadeOut","onTop","values","map","SelectionStraightLine","cursor","SelectedStraightLine","eventHandlerEndLine","_","action_onLineDrag","onStart","onDrag","onStop","disabled","DisplayLine","eventHandlerStartPoint","action_onStartPointDrag","eventHandlerEndPoint","action_onEndPointDrag","action_onClickLine","DraggableLines","backend","HTML5Backend","DisplaySimpleLine","DisplayLines","isEditable","DisplayGroupLines","location","w","h","background","MemoizedDisplayLinesGroup","React","memo","selectedLines","xMin","Number","MAX_SAFE_INTEGER","xMax","yMin","yMax","action_onGroupLineDrag","DisplayGroupBeads","MemoizedDisplayBeadsGroup","selectedBead","GroupSelectionPlaceholder","EditorScene","App","rootStore","createStore","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"gMA+BYA,E,uEAAAA,K,YAAAA,E,iBAAAA,E,mBAAAA,E,uBAAAA,M,wCC5BCC,EAAQ,WAA0C,IAAzCC,EAAwC,uDAA5B,EAAGC,EAAyB,uDAAb,EAC/C,OAAO,aACLD,IACAC,KACCC,aAAY,IAQJC,EAAY,SAACC,GACxB,IAAMC,EALiB,SAACD,GACxB,OAAOE,KAAKC,KAAKH,EAAMJ,EAAII,EAAMJ,EAAII,EAAMH,EAAIG,EAAMH,GAItCO,CAAUJ,GACnBK,EAAoB,IAAXJ,EACTL,EAAIS,EAAS,EAAIL,EAAMJ,EAAIK,EAC3BJ,EAAIQ,EAAS,EAAIL,EAAMH,EAAII,EACjC,OAAON,EAAMC,EAAGC,IAGLS,EAAQ,SAACN,EAAcO,GAClC,OAAOZ,EAAMK,EAAMJ,EAAIW,EAAQP,EAAMH,EAAIU,IAG9BC,EAAM,SAACR,EAAcJ,EAAWC,GAC3C,OAAOF,EAAMK,EAAMJ,EAAIA,EAAGI,EAAMH,EAAIA,IAOzBY,EAA2B,SAACC,EAAcC,GACrD,OAAOT,KAAKC,MACTQ,EAAIf,EAAIc,EAAMd,IAAMe,EAAIf,EAAIc,EAAMd,IAChCe,EAAId,EAAIa,EAAMb,IAAMc,EAAId,EAAIa,EAAMb,KAI5Be,EAAY,SAACf,EAAGD,GAC3B,OAAOM,KAAKW,MAAMhB,EAAGD,IAGVkB,EAAU,SAACC,EAAWC,EAAWC,GAC5C,OAAOA,EAAErB,EAAImB,EAAGnB,GAAKqB,EAAErB,EAAIoB,EAAGpB,GAAKqB,EAAEpB,EAAIkB,EAAGlB,GAAKoB,EAAEpB,EAAImB,EAAGnB,G,mDC3C/CF,EAAQ,SAACuB,GACpB,IAAMC,EAAKC,qBACX,OAAO,aACLD,KACAD,YACCpB,aAAY,ICJJH,EAAQ,SAAC0B,GAIT,IACHX,EAAwBW,EAAxBX,MAAOC,EAAiBU,EAAjBV,IAAKW,EAAYD,EAAZC,QACdH,EAAKC,qBACX,OAAO,aACLD,KACAT,QACAC,MACAW,QAASA,GAAWA,EAAQrB,OAAS,EAAIqB,EAAU,GACnDC,SAAU,CACRC,UAAW,EACXC,UAAU,IAEX3B,aAAY,ICTJ4B,EAAb,yLACmBhB,EAAcC,GAC7B,IAAMgB,EAAcC,KAAKC,WAAWC,GAAGC,aAAaN,SAE9CO,EAAOC,EAAU,CAAEvB,QAAOC,MAAKW,QADrB,KAEhBU,EAAKT,SAASE,SAAWE,EACzBC,KAAKC,WAAWK,QAAQC,MAAMH,EAAKb,IAAMa,EACzCJ,KAAKC,WAAWO,KAAO1C,EAAW2C,UAClCT,KAAKU,qBAAqBN,EAAKb,IAC/BS,KAAKC,WAAWC,GAAGS,SAASC,OAAQ,IATxC,8CAaIC,EACAC,GAKA,GAAId,KAAKC,WAAWK,QAAQC,MAAMM,GAAM,CACtC,IAAMT,EAAOJ,KAAKC,WAAWK,QAAQC,MAAMM,GAC3CT,EAAKtB,MAAMd,EAAI8C,EAAK9C,EAvBR,EAwBZoC,EAAKtB,MAAMb,EAAI6C,EAAK7C,EAxBR,EAyBZ+B,KAAKU,qBAAqBN,EAAKb,IAC/BS,KAAKC,WAAWC,GAAGS,SAASC,OAAQ,KAxB1C,4CA6BIC,EACAC,GAKA,GAAId,KAAKC,WAAWK,QAAQC,MAAMM,GAAM,CACtC,IAAMT,EAAOJ,KAAKC,WAAWK,QAAQC,MAAMM,GAC3CT,EAAKrB,IAAIf,EAAI8C,EAAK9C,EAvCN,EAwCZoC,EAAKrB,IAAId,EAAI6C,EAAK7C,EAxCN,EAyCZ+B,KAAKU,qBAAqBN,EAAKb,IAC/BS,KAAKC,WAAWC,GAAGS,SAASC,OAAQ,KAxC1C,wCA6CIC,EACAC,GAKA,GAAId,KAAKC,WAAWK,QAAQC,MAAMM,GAAM,CACtC,IAAMT,EAAOJ,KAAKC,WAAWK,QAAQC,MAAMM,GAC3CT,EAAKtB,MAAMd,EAAIoC,EAAKtB,MAAMd,EAAI8C,EAAKC,OACnCX,EAAKtB,MAAMb,EAAImC,EAAKtB,MAAMb,EAAI6C,EAAKE,OACnCZ,EAAKrB,IAAIf,EAAIoC,EAAKrB,IAAIf,EAAI8C,EAAKC,OAC/BX,EAAKrB,IAAId,EAAImC,EAAKrB,IAAId,EAAI6C,EAAKE,OAC/BhB,KAAKU,qBAAqBN,EAAKb,IAC/BS,KAAKC,WAAWC,GAAGS,SAASC,OAAQ,KA1D1C,6CA8DyBE,GAA2C,IAAD,OAC/DG,OAAOC,KAAKlB,KAAKC,WAAWC,GAAGiB,kBAAkBC,SAAQ,SAAAC,GACvD,GAAI,EAAKpB,WAAWK,QAAQC,MAAMc,GAAS,CACzC,IAAMjB,EAAO,EAAKH,WAAWK,QAAQC,MAAMc,GAC3CjB,EAAKtB,MAAMd,EAAIoC,EAAKtB,MAAMd,EAAI8C,EAAKC,OACnCX,EAAKtB,MAAMb,EAAImC,EAAKtB,MAAMb,EAAI6C,EAAKE,OACnCZ,EAAKrB,IAAIf,EAAIoC,EAAKrB,IAAIf,EAAI8C,EAAKC,OAC/BX,EAAKrB,IAAId,EAAImC,EAAKrB,IAAId,EAAI6C,EAAKE,OAC/B,EAAKN,qBAAqBN,EAAKb,IAC/B,EAAKU,WAAWC,GAAGS,SAASC,OAAQ,QAvE5C,8CA4E0BE,MA5E1B,yCA8EqBO,GACjBrB,KAAKC,WAAWC,GAAGiB,iBAAmB,GACtCnB,KAAKC,WAAWC,GAAGiB,iBAAiBE,IAAU,EAC9CrB,KAAKC,WAAWC,GAAGoB,sBAAwB,IAjF/C,yCAoFqBC,GACjBvB,KAAKC,WAAWC,GAAGsB,iBAAmB,GACtCxB,KAAKC,WAAWC,GAAGsB,iBAAiBD,IAAU,EAC9CvB,KAAKC,WAAWC,GAAGuB,sBAAwB,IAvF/C,2CA0F+BJ,GAAiB,IAAD,OAKrCK,EAAc1B,KAAKC,WAAWK,QAAQC,MAAMc,GAC1CvC,EAAwB4C,EAAxB5C,MAAOC,EAAiB2C,EAAjB3C,IAAKW,EAAYgC,EAAZhC,QACdiC,EAAM9C,EAAyBC,EAAOC,GACtC6C,EAAQtD,KAAKuD,OAAOF,EAPN,GACL,GAEFG,IAKPC,EAAerC,EAAQrB,OAC7B,GAAIuD,EAAQG,EAEV,IADA,IAAMC,EAAiBJ,EAAQG,EACtBE,EAAI,EAAGA,EAAID,EAAgBC,IAAK,CACvC,IAAM3C,EAAW4C,IACXC,EAAOC,EAAU9C,GACvBU,KAAKC,WAAWK,QAAQ+B,MAAMF,EAAK5C,IAAM4C,EACzCnC,KAAKC,WAAWK,QAAQC,MAAMc,GAAQ3B,QAAQ4C,KAAKH,EAAK5C,SAErD,GAAIqC,EAAQG,EAEjB,IADA,IAAMC,EAAiBD,EAAeH,EAC7BK,EAAI,EAAGA,EAAID,EAAgBC,IAAK,CACvC,IAAMM,EAASvC,KAAKC,WAAWK,QAAQC,MAAMc,GAAQ3B,QAAQrB,OACvDmE,EAAiBxC,KAAKC,WAAWK,QAAQC,MAC7Cc,GACA3B,QAAQ+C,OAAOF,EAAS,EAAG,UACtBvC,KAAKC,WAAWK,QAAQ+B,MAAMG,EAAe,IAGxD,IAAIE,EA3BgB,GA4BpB1C,KAAKC,WAAWK,QAAQC,MAAMc,GAAQ3B,QAAQ0B,SAAQ,SAAAG,GACpD,IAAMoB,ED1FyB,SACnCC,EACAC,EACAC,EACAC,EACAC,GAEA,IAEI5E,EAAQ8D,EAFFY,EAAOF,EACPG,EAAOF,GAKjB,OAHAzE,EAAQD,EAAUC,GAClBA,EAAQM,EAAMN,EAAO4E,GACrB5E,EAAQQ,EAAIR,EAAOwE,EAAQC,GC8EHI,CAClBnE,EAAMd,EACNc,EAAMb,EACNc,EAAIf,EACJe,EAAId,EACJyE,GAGI1E,EAAI2E,EAAY3E,EADL8D,GACoB,EAC/B7D,EAAI0E,EAAY1E,EAFL6D,GAEoB,EACrC,EAAK7B,WAAWK,QAAQ+B,MAAMd,GAAQjC,SAAStB,EAAIA,EACnD,EAAKiC,WAAWK,QAAQ+B,MAAMd,GAAQjC,SAASrB,EAAIA,EACnDyE,GAtCWZ,UA9FjB,GAAqDoB,gBCPxCC,EAAb,+LAEInD,KAAKC,WAAWK,QAAQ+B,MAAQ,GAChCrC,KAAKC,WAAWK,QAAQC,MAAQ,GAChCP,KAAKC,WAAWC,GAAGS,SAASC,OAAQ,IAJxC,+CAM4B,IAAD,OAEvB,GADAZ,KAAKC,WAAWC,GAAGS,SAASC,OAAQ,EAChC,iBAAkBwC,OAAQ,CAC5B,IAAMC,EAAaC,aAAaC,QAAQ,WACxC,GAAmB,OAAfF,EAAqB,CACvBrD,KAAKC,WAAWK,QAAU,CACxB+B,MAAO,GACP9B,MAAO,IAET,IAAMiD,EAASC,KAAKC,MAAML,GAC1BpC,OAAOC,KAAKsC,EAAOnB,OAAOjB,SAAQ,SAAAG,GAChC,IAAMoC,EAAWH,EAAOnB,MAAMd,GACxBY,EAAOC,EAAUuB,EAASrE,UAChC6C,EAAK5C,GAAKoE,EAASpE,GACnB,EAAKU,WAAWK,QAAQ+B,MAAMd,GAAUY,KAE1ClB,OAAOC,KAAKsC,EAAOjD,OAAOa,SAAQ,SAAAC,GAChC,IAAMuC,EAAWJ,EAAOjD,MAAMc,GACxBjB,EAAOC,EAAU,CACrBvB,MAAO8E,EAAS9E,MAChBC,IAAK6E,EAAS7E,IACdW,QAASkE,EAASlE,UAEpBU,EAAKb,GAAKqE,EAASrE,GACnB,EAAKU,WAAWK,QAAQC,MAAMc,GAAUjB,KAE1CyD,QAAQC,IAAI,sCAEZD,QAAQE,KAAK,gCAGfF,QAAQE,KAAK,+BArCnB,4CA0CQ,iBAAkBX,QACpBE,aAAaU,QAAQ,UAAWP,KAAKQ,UAAUjE,KAAKC,WAAWK,UAC/DN,KAAKC,WAAWC,GAAGS,SAASC,OAAQ,EAClCiD,QAAQC,IAAI,8BAEdD,QAAQE,KAAK,iCA/CnB,GAAyCb,gBCF5BgB,EAAb,2MAMUC,mBAAqB,WACvB,EAAKlE,WAAWC,GAAGuB,sBAAwB,IAC7C,EAAKxB,WAAWC,GAAGsB,iBAAmB,GACtC,EAAKvB,WAAWC,GAAGuB,sBAAwB,IATjD,EAYU2C,mBAAqB,WACvB,EAAKnE,WAAWC,GAAGoB,wBACrB,EAAKrB,WAAWC,GAAGiB,iBAAmB,GACtC,EAAKlB,WAAWC,GAAGoB,sBAAwB,IAfjD,yFAC4B+C,GACxBrE,KAAKC,WAAWO,KAAO6D,EACvBrE,KAAKmE,qBACLnE,KAAKoE,uBAJT,yCAkBqBE,GACjBtE,KAAKC,WAAWC,GAAGS,SAASC,MAAQ0D,MAnBxC,GAAkDpB,gBCArCqB,EAAb,8LAAsCrB,gB,QCGzBsB,EAAb,oMAC8BxG,EAAGC,GAC7B+B,KAAKC,WAAWC,GAAGuE,eAAeC,eAAgB,EAElD1E,KAAKC,WAAWC,GAAGuE,eAAe3F,MAAMd,EAAIA,EAC5CgC,KAAKC,WAAWC,GAAGuE,eAAe3F,MAAMb,EAAIA,EAC5C+B,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAIf,EAAIA,EAC1CgC,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAId,EAAIA,IAP9C,kDAU8BD,EAAGC,GAAI,IAAD,OAIhC,GAHA+B,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAIf,EAAIA,EAC1CgC,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAId,EAAIA,GAEU,IAAhD+B,KAAKC,WAAWC,GAAGuE,eAAeE,UAAqB,CAAC,IAAD,EAClC3E,KAAKC,WAAWC,GAAGuE,eAAlC3F,EADiD,EACjDA,MAAOC,EAD0C,EAC1CA,IACTgC,EAAShC,EAAIf,EAAIc,EAAMd,EACvBgD,EAASjC,EAAId,EAAIa,EAAMb,GAEzBK,KAAKsG,IAAI7D,GAAU,GAAKzC,KAAKsG,IAAI5D,GAAU,KAC7ChB,KAAKC,WAAWC,GAAGuE,eAAeE,WAAY,GAIlD,IAAoD,IAAhD3E,KAAKC,WAAWC,GAAGuE,eAAeE,UAAoB,CAAC,IAAD,EACjC3E,KAAKC,WAAWC,GAAGuE,eAAlC3F,EADgD,EAChDA,MAAOC,EADyC,EACzCA,IACTI,EAAK+C,EAAW5D,KAAKuG,IAAI/F,EAAMd,EAAGe,EAAIf,GAAIM,KAAKuG,IAAI/F,EAAMb,EAAGc,EAAId,IAChEmB,EAAK8C,EAAW5D,KAAKwG,IAAIhG,EAAMd,EAAGe,EAAIf,GAAIM,KAAKwG,IAAIhG,EAAMb,EAAGc,EAAId,IACtE+B,KAAKC,WAAWC,GAAGsB,iBAAmB,GACtCxB,KAAKC,WAAWC,GAAGuB,sBAAwB,EAC3CR,OAAOC,KAAKlB,KAAKC,WAAWK,QAAQ+B,OAAOjB,SAAQ,SAAAG,GACjD,IAAMY,EAAO,EAAKlC,WAAWK,QAAQ+B,MAAMd,GACrCwD,EAAK7C,EAAWC,EAAK7C,SAAStB,EAAI,GAAImE,EAAK7C,SAASrB,EAAI,IAC1DiB,EAAQC,EAAIC,EAAI2F,KAClB,EAAK9E,WAAWC,GAAGsB,iBAAiBD,IAAU,EAC9C,EAAKtB,WAAWC,GAAGuB,sBACjB,EAAKxB,WAAWC,GAAGuB,sBAAwB,SApCvD,mDA2CwD,IAAhDzB,KAAKC,WAAWC,GAAGuE,eAAeE,WAChC3E,KAAKC,WAAWC,GAAGuB,sBAAwB,IAC7CzB,KAAKC,WAAWC,GAAGsB,iBAAmB,IAI1CxB,KAAKC,WAAWC,GAAGuE,eAAeC,eAAgB,EAClD1E,KAAKC,WAAWC,GAAGuE,eAAeE,WAAY,EAC9C3E,KAAKC,WAAWC,GAAGuE,eAAe3F,MAAMd,EAAI,EAC5CgC,KAAKC,WAAWC,GAAGuE,eAAe3F,MAAMb,EAAI,EAC5C+B,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAIf,EAAI,EAC1CgC,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAId,EAAI,IAtD9C,kDAyD8BD,EAAWC,GACrC+B,KAAKC,WAAWC,GAAGuE,eAAeC,eAAgB,EAClD1E,KAAKC,WAAWC,GAAGuE,eAAe3F,MAAMd,EAAIA,EAC5CgC,KAAKC,WAAWC,GAAGuE,eAAe3F,MAAMb,EAAIA,EAC5C+B,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAIf,EAAIA,EAC1CgC,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAId,EAAIA,IA9D9C,kDAiE8BD,EAAWC,GAAY,IAAD,OAIhD,GAHA+B,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAIf,EAAIA,EAC1CgC,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAId,EAAIA,GAEU,IAAhD+B,KAAKC,WAAWC,GAAGuE,eAAeE,UAAqB,CAAC,IAAD,EAClC3E,KAAKC,WAAWC,GAAGuE,eAAlC3F,EADiD,EACjDA,MAAOC,EAD0C,EAC1CA,IACTgC,EAAShC,EAAIf,EAAIc,EAAMd,EACvBgD,EAASjC,EAAId,EAAIa,EAAMb,GACzBK,KAAKsG,IAAI7D,GAAU,GAAKzC,KAAKsG,IAAI5D,GAAU,KAC7ChB,KAAKC,WAAWC,GAAGuE,eAAeE,WAAY,GAIlD,IAAoD,IAAhD3E,KAAKC,WAAWC,GAAGuE,eAAeE,UAAoB,CAAC,IAAD,EACjC3E,KAAKC,WAAWC,GAAGuE,eAAlC3F,EADgD,EAChDA,MAAOC,EADyC,EACzCA,IACTI,EAAK+C,EAAW5D,KAAKuG,IAAI/F,EAAMd,EAAGe,EAAIf,GAAIM,KAAKuG,IAAI/F,EAAMb,EAAGc,EAAId,IAChEmB,EAAK8C,EAAW5D,KAAKwG,IAAIhG,EAAMd,EAAGe,EAAIf,GAAIM,KAAKwG,IAAIhG,EAAMb,EAAGc,EAAId,IAEhE+G,EAAc/D,OAAOC,KAAKlB,KAAKC,WAAWC,GAAGiB,kBAC7C8D,EAAmB,GAEzBhE,OAAOC,KAAKlB,KAAKC,WAAWK,QAAQC,OAAOa,SAAQ,SAAAC,GACjD,IAAMjB,EAAO,EAAKH,WAAWK,QAAQC,MAAMc,IACvCnC,EAAQC,EAAIC,EAAIgB,EAAKtB,QAAUI,EAAQC,EAAIC,EAAIgB,EAAKrB,OACtDkG,EAAO3C,KAAKjB,MAIH6D,qBAAWD,EAAQD,GAEvB3G,OAAS,IAChB2B,KAAKC,WAAWC,GAAGiB,iBAAmB,GACtCnB,KAAKC,WAAWC,GAAGoB,sBAAwB,EAC3C2D,EAAO7D,SAAQ,SAAA7B,GACb,EAAKU,WAAWC,GAAGiB,iBAAiB5B,IAAM,EAC1C,EAAKU,WAAWC,GAAGoB,sBACjB,EAAKrB,WAAWC,GAAGoB,sBAAwB,SArGvD,mDAsHwD,IAAhDtB,KAAKC,WAAWC,GAAGuE,eAAeE,WAChC3E,KAAKC,WAAWC,GAAGoB,sBAAwB,IAC7CtB,KAAKC,WAAWC,GAAGiB,iBAAmB,IAI1CnB,KAAKC,WAAWC,GAAGuE,eAAeC,eAAgB,EAClD1E,KAAKC,WAAWC,GAAGuE,eAAeE,WAAY,EAC9C3E,KAAKC,WAAWC,GAAGuE,eAAe3F,MAAMd,EAAI,EAC5CgC,KAAKC,WAAWC,GAAGuE,eAAe3F,MAAMb,EAAI,EAC5C+B,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAIf,EAAI,EAC1CgC,KAAKC,WAAWC,GAAGuE,eAAe1F,IAAId,EAAI,MAjI9C,GAAgDiF,gBCI1CiC,EAAyB,CAC7B7E,QAAS,CACP+B,MAAO,GACP9B,MAAO,IAETL,GAAI,CACFC,aAAc,CACZN,UAAU,GAEZc,SAAU,CACRC,OAAO,GAETO,iBAAkB,GAClBG,sBAAuB,EACvBE,iBAAkB,GAClBC,sBAAuB,EACvBgD,eAAgB,CACd3F,MAAOoD,EAAW,EAAG,GACrBnD,IAAKmD,EAAW,EAAG,GACnBwC,eAAe,EACfC,WAAW,IAGfnE,KAAM1C,EAAWsH,MAGNC,EAAU,CACrBC,KAAMC,+BAAqBhB,GAC3BiB,UAAWD,+BAAqBzF,GAChC2F,QAASF,+BAAqBpC,GAC9BuC,iBAAkBH,+BAAqBrB,GACvCyB,eAAgBJ,+BAAqBf,IAG1BoB,EAAQC,0BACnBC,gCAAsBvB,EAAkBY,GACxCW,gCAAsBhG,EAAiCqF,GACvDW,gCAAsB3C,EAAqBgC,GAC3CW,gCAAsB5B,EAA8BiB,GACpDW,gCAAsBtB,EAA4BW,ICzCvCY,EAAc,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,WACtBC,EAAWC,cAEXC,EAAqB,SAAC9B,GAC1B4B,EAASZ,EAAQK,iBAAiBU,0BAA0B/B,KAG9D,OACE,yBAAKgC,UAAU,IACb,yBACEA,UAAS,iDAEDL,IAAelI,EAAWsH,KAAO,YAAc,GAF9C,kBAITkB,QAAS,kBAAMH,EAAmBrI,EAAWsH,QAE7C,0BAAMiB,UAAU,iBACd,kBAAC,IAAD,CAAiBE,KAAMC,IAAaC,MCzBtB,aD2BhB,uCAGF,yBACEJ,UAAS,iDAEDL,IAAelI,EAAW2C,UAAY,YAAc,GAFnD,kBAIT6F,QAAS,kBAAMH,EAAmBrI,EAAW2C,aAE7C,0BAAM4F,UAAU,iBACd,kBAAC,IAAD,CAAiBE,KAAMG,IAAQD,MCtCjB,aDwChB,4CAGF,yBACEJ,UAAS,iDAEDL,IAAelI,EAAW6I,UAAY,YAAc,GAFnD,kBAITL,QAAS,kBAAMH,EAAmBrI,EAAW6I,aAE7C,0BAAMN,UAAU,iBACd,kBAAC,IAAD,CAAiBE,KAAMG,IAAQD,MCnDjB,aDqDhB,6CAGF,yBACEJ,UAAS,iDAEDL,IAAelI,EAAW8I,QAAU,YAAc,GAFjD,kBAITN,QAAS,kBAAMH,EAAmBrI,EAAW8I,WAE7C,0BAAMP,UAAU,iBACd,kBAAC,IAAD,CAAiBE,KAAMM,IAAQJ,MChEjB,aDkEhB,4C,QElEKK,EAAoB,SAAC9I,EAAGC,GAAc,IAAX8I,EAAU,uDAAN,EAC1C,MAAM,eAAN,OAAsB/I,EAAtB,eAA8BC,EAA9B,eAAsC8I,EAAtC,QAGWC,EAAe,SAAAC,GAC1B,MAAM,UAAN,OAAiBA,EAAjB,SCDWC,EAAe,SAAC,GAAoB,IAAlBpI,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,IAG9BoI,EAAQtI,EAAyBC,EAAOC,GACxCkI,EAASjI,EAAUD,EAAId,EAAIa,EAAMb,EAAGc,EAAIf,EAAIc,EAAMd,GACxD,OACE,yBACEoJ,MAAO,CACLC,OANS,EAOTF,QACAG,UAAU,GAAD,OAAKR,EACZhI,EAAMd,EAVD,EAWLc,EAAMb,EAXD,GASE,YAGJ+I,EAAaC,IAClBM,gBAAiB,eAEnBlB,UAAU,QAVZ,SCHSmB,EAAc,SAAC,GAC1B,OAAiB,IAD0B,EAAfC,SAEnB,kBAAC,IAAMC,SAAP,MAGF,kBAAC,EAAD,OAGHC,EAAqB,WAAO,IAAD,EAKKC,mBAAsB,CACxD5J,EAAG,EACHC,EAAG,IAP0B,mBAKxB4J,EALwB,KAKZC,EALY,OASCF,mBAAsB,CACpD5J,EAAG,EACHC,EAAG,IAX0B,mBASxB8J,EATwB,KASdC,EATc,OAaWJ,oBAAkB,GAb7B,mBAaxBK,EAbwB,KAaTC,EAbS,KAczBC,EAAUC,iBAAuB,MAWjCC,EAAY,SAACC,GACjB,GAAIL,GACEE,EAAQI,QAAS,CACnB,IAAMC,EAAOL,EAAQI,QAAQE,wBACvBzK,EAAIsK,EAAMI,QAAUF,EAAKG,KACzB1K,EAAIqK,EAAMM,QAAUJ,EAAKK,IAC/Bb,EAAY,CAAEhK,IAAGC,MACjB6K,EAAUjB,EAAYE,GACtBG,GAAiB,KAcjBjC,EAAWC,cAEX4C,EAAY,SAAChK,EAAoBC,GACrCkH,EAASZ,EAAQG,UAAUuD,iBAAiBjK,EAAgBC,KAG9D,OACE,6BACE,yBACEiK,YAzCc,SAACV,GACnB,GAAIH,EAAQI,QAAS,CACnB,IAAMC,EAAOL,EAAQI,QAAQE,wBACvBzK,EAAIsK,EAAMI,QAAUF,EAAKG,KACzB1K,EAAIqK,EAAMM,QAAUJ,EAAKK,IAC/Bf,EAAc,CAAE9J,IAAGC,MACnB+J,EAAY,CAAEhK,IAAGC,MACjBiK,GAAiB,KAmCfG,UAAWA,EACXY,YArBc,SAACX,GACnB,GAAIL,GACEE,EAAQI,QAAS,CACnB,IAAMC,EAAOL,EAAQI,QAAQE,wBACvBzK,EAAIsK,EAAMI,QAAUF,EAAKG,KACzB1K,EAAIqK,EAAMM,QAAUJ,EAAKK,IAC/Bb,EAAY,CAAEhK,IAAGC,QAgBjBiL,aAAcb,EACdhC,UAAU,mBACV8C,IAAKhB,IAGNF,EACC,6BACE,yBACEb,MAAO,CACLE,UAAWR,EAAkBe,EAAW7J,EAAG6J,EAAW5J,GACtDkJ,MAAO,GACPE,OAAQ,IAEVhB,UAAW,cANb,QAUA,yBACEe,MAAO,CACLE,UAAWR,EAAkBiB,EAAS/J,EAAG+J,EAAS9J,GAClDkJ,MAAO,GACPE,OAAQ,IAEVhB,UAAW,YANb,QAUA,kBAAC,EAAD,CAAcvH,MAAO+I,EAAY9I,IAAKgJ,KAEtC,OC/FGqB,EAAoB,WAC/B,IAAMnD,EAAWC,cACXmD,EAAUC,aAAY,SAACC,GAC3B,OAAOA,EAAMrJ,GAAGS,SAASC,SAe3B,OACE,yBAAKyF,UAAU,oBACb,yBAAKA,UAAU,WACb,yBAAKA,UAAS,WAAcC,QAfZ,WACpBL,EAASZ,EAAQI,QAAQ+D,0BAenB,0BAAMnD,UAAU,iBACd,kBAAC,IAAD,CAAiBE,KAAMkD,IAAShD,MJ/BpB,aIiCd,gDAIJ,yBAAKJ,UAAU,WACb,yBACEA,UAAS,kBAAagD,EAAU,aAAe,IAC/C/C,QAlBa,WACnBL,EAASZ,EAAQI,QAAQiE,yBAmBnB,0BAAMrD,UAAU,iBACd,kBAAC,IAAD,CAAiBE,KAAMoD,IAAQlD,MJ3CnB,aI6Cd,+CAIJ,yBAAKJ,UAAU,WACb,yBAAKA,UAAS,WAAcC,QAhCV,WACtBL,EAASZ,EAAQI,QAAQmE,4BAgCnB,0BAAMvD,UAAU,iBACd,kBAAC,IAAD,CAAiBE,KAAMsD,OAEzB,4DCpDGC,EAAa,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SAClC,OACE,yBAAK3D,UAAW,YACd,0BAAMA,UAAU,SAAhB,MACA,2BACEA,UAAU,QACV4D,KAAK,SACLF,MAAOA,EACPC,SAAUA,MCLLrE,EAAiB,SAAClG,GAKxB,IACGyK,EAAczK,EAAdyK,UACFC,EAAkB/B,iBAAuB,MAEzCtJ,EAAQwK,aAAY,SAACC,GACzB,OAAOA,EAAMrJ,GAAGuE,eAAe3F,SAG3BC,EAAMuK,aAAY,SAACC,GACvB,OAAOA,EAAMrJ,GAAGuE,eAAe1F,OAG3BqL,EAA8Bd,aAAY,SAACC,GAC/C,OAAOA,EAAMrJ,GAAGuE,eAAeC,iBAGjC,IAAkB,IAAdwF,EACF,OAAO,kBAAC,IAAMxC,SAAP,MAGT,IAAMD,GAA2C,IAAhC2C,EACTpB,EAAwCvJ,EAAxCuJ,YAAaX,EAA2B5I,EAA3B4I,UAAWY,EAAgBxJ,EAAhBwJ,YA0B1B9B,EAAQ7I,KAAKsG,IAAI7F,EAAIf,EAAIc,EAAMd,GAC/BqJ,EAAS/I,KAAKsG,IAAI7F,EAAId,EAAIa,EAAMb,GAChC4K,EAAMvK,KAAKuG,IAAI9F,EAAIf,EAAGc,EAAMd,GAC5B2K,EAAOrK,KAAKuG,IAAI9F,EAAId,EAAGa,EAAMb,GAInC,OACE,yBACEoI,UAAW,kBACX8C,IAAKgB,EACLnB,YAnCuB,SAACV,GAC1B,GAAI6B,EAAgB5B,QAAS,CAC3B,IAAMC,EAAO2B,EAAgB5B,QAAQE,wBAC/BzK,EAAIsK,EAAMI,QAAUF,EAAKG,KACzB1K,EAAIqK,EAAMM,QAAUJ,EAAKK,IAC/BG,EAAYhL,EAAGC,KA+BfoK,UA3BqB,SAACC,GACxBD,KA4BEY,YAzBuB,SAACX,GAC1B,GAAIb,GACE0C,EAAgB5B,QAAS,CAC3B,IAAMC,EAAO2B,EAAgB5B,QAAQE,wBAC/BzK,EAAIsK,EAAMI,QAAUF,EAAKG,KACzB1K,EAAIqK,EAAMM,QAAUJ,EAAKK,IAC/BI,EAAYjL,EAAGC,KAoBjBmJ,MAAO,CACLiD,OAAQ5C,EAAW,GAAK,IAGzBA,EACC,yBACEL,MAAO,CACLD,QACAE,SACAiD,gBAAiB,oBACjBC,OAAQ,2BACRjD,UAAWR,EAAkB+B,EAAKF,MAGpC,OCjFG6B,EAAsB,SAAC,GAAmB,IAAjBN,EAAgB,EAAhBA,UAC9BjE,EAAWC,cAcjB,OACE,kBAAC,EAAD,CACEgE,UAAWA,EACXlB,YAfgB,SAAChL,EAAGC,GACtBgI,EAASZ,EAAQM,eAAe8E,4BAA4BzM,EAAGC,KAe7DgL,YAZgB,SAACjL,EAAGC,GACtBgI,EAASZ,EAAQM,eAAe+E,4BAA4B1M,EAAGC,KAY7DoK,UATc,WAChBpC,EAASZ,EAAQM,eAAegF,iCCZvBC,EAAsB,SAAC,GAAmB,IAAjBV,EAAgB,EAAhBA,UAC9BjE,EAAWC,cAcjB,OACE,kBAAC,EAAD,CACEgE,UAAWA,EACXlB,YAfgB,SAAChL,EAAGC,GACtBgI,EAASZ,EAAQM,eAAekF,4BAA4B7M,EAAGC,KAe7DgL,YAZgB,SAACjL,EAAGC,GACtBgI,EAASZ,EAAQM,eAAemF,4BAA4B9M,EAAGC,KAY7DoK,UATc,WAChBpC,EAASZ,EAAQM,eAAeoF,iCCXvBC,EAAc,SAACvL,GAKrB,IACG0C,EAAsC1C,EAAtC0C,KAAM8I,EAAgCxL,EAAhCwL,QAASZ,EAAuB5K,EAAvB4K,OAAQa,EAAezL,EAAfyL,WACzBC,OAAwBC,IAAZH,GAAyBA,GAAW,GAAKA,GAAW,EAChEI,OAAsBD,IAAXf,GAAwBA,GAAU,GAAKA,GAAU,KAE5DpE,EAAWC,cAKjB,OACE,yBACEG,UAAU,YACVC,QAPY,WACdL,EAASZ,EAAQG,UAAU8F,mBAAmBnJ,EAAK5C,MAOjD6H,MAAO,CACLE,UAAWR,EAAkB3E,EAAK7C,SAAStB,EAAGmE,EAAK7C,SAASrB,GAC5DgN,QAASE,EAAYF,EAAU,EAC/BZ,OAAQgB,EAAWhB,OAASe,EAC5Bb,OAAQW,EAAa,iBAAmB,KAP5C,SCjBSK,EAAe,SAAC,GAAc,IAAZ/K,EAAW,EAAXA,KACvBgL,EAAUhL,IAAS1C,EAAW2C,UAC9BgL,EAAQjL,IAAS1C,EAAW6I,UAC5BtE,EAAQiH,aAAY,SAACC,GACzB,OAAOtI,OAAOyK,OAAOnC,EAAMjJ,QAAQ+B,UAE/Bb,EAAmB8H,aAAY,SAACC,GACpC,OAAOA,EAAMrJ,GAAGsB,oBAGlB,OACE,kBAAC,IAAMkG,SAAP,KACGrF,EAAMsJ,KAAI,SAAAxJ,GACT,OACE,kBAAC,EAAD,CACEtB,IAAKsB,EAAK5C,GACV4C,KAAMA,EACN8I,QAASO,EAAU,GAAM,EACzBN,gBAA0CE,IAA9B5J,EAAiBW,EAAK5C,IAClC8K,OAAQmB,EAAU,GAAKC,EAAQ,QAAKL,S,gBCpBnCQ,GAAwB,SAAC,GAA6B,IAA3B9M,EAA0B,EAA1BA,MAAOC,EAAmB,EAAnBA,IAAKuH,EAAc,EAAdA,QAG5Ca,EAAQtI,EAAyBC,EAAOC,GACxCkI,EAASjI,EAAUD,EAAId,EAAIa,EAAMb,EAAGc,EAAIf,EAAIc,EAAMd,GAExD,OACE,yBACEoJ,MAAO,CACLC,OAPS,GAQTF,QACAmD,gBAAiB,kBACjBhD,UAAU,GAAD,OAAKR,EACZhI,EAAMd,EAZD,EAaLc,EAAMb,EAbD,GAWE,YAGJ+I,EAAaC,IAClBM,gBAAiB,cACjBsE,OAAQ,UACRxB,OAAQ,IAEV/D,QAASA,EACTD,UAAU,QAdZ,SCJSyF,GAAuB,SAAC,GAA4B,IAA1BzK,EAAyB,EAAzBA,OAAQvC,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,IAG9CoI,EAAQtI,EAAyBC,EAAOC,GACxCkI,EAASjI,EAAUD,EAAId,EAAIa,EAAMb,EAAGc,EAAIf,EAAIc,EAAMd,GAElDiI,EAAWC,cAEX6F,EAAsB,SAACC,EAAD,GAA2C,IAArCjL,EAAoC,EAApCA,OAAQC,EAA4B,EAA5BA,OACxCiF,EAASZ,EAAQG,UAAUyG,kBAAkB5K,EAAQ,CAAEN,SAAQC,aAGjE,OACE,kBAAC,gBAAD,CACEkL,QAASH,EACTI,OAAQJ,EACRK,OAAQL,EACRM,UAAU,EACV3N,MAAO,GAEP,yBACE0I,MAAO,CACLC,OApBO,GAqBPF,QACAmD,gBAAiB,mBACjBC,OAAQ,8BACRjD,UAAU,GAAD,OAAKR,EACZhI,EAAMd,EA1BH,EA2BHc,EAAMb,EA3BH,GAyBI,YAGJ+I,EAAaC,IAClBM,gBAAiB,cACjBsE,OAAQ,OACRxB,OAAQ,IAEVhE,UAAU,QAdZ,UCjBOiG,GAAc,SAAC7M,GAAgD,IAClEyL,EAAqBzL,EAArByL,WAAY9K,EAASX,EAATW,KACd6F,EAAWC,cACXqG,EAAyB,SAACP,EAAD,GAAiC,IAA3BhO,EAA0B,EAA1BA,EAAGC,EAAuB,EAAvBA,EACtCgI,EAASZ,EAAQG,UAAUgH,wBAAwBpM,EAAKb,GAAI,CAAEvB,IAAGC,QAE7DwO,EAAuB,SAACT,EAAD,GAAiC,IAA3BhO,EAA0B,EAA1BA,EAAGC,EAAuB,EAAvBA,EACpCgI,EAASZ,EAAQG,UAAUkH,sBAAsBtM,EAAKb,GAAI,CAAEvB,IAAGC,QAQjE,OACE,6BACE,kBAAC,gBAAD,CACEiO,QAASK,EACTJ,OAAQI,EACRH,OAAQG,EACR7N,MAAO,EACP2N,UAAU,GAEV,yBACEjF,MAAO,CACLE,UAAWR,EAAkB1G,EAAKtB,MAAMd,EAAGoC,EAAKtB,MAAMb,GACtDoM,QAAuB,IAAfa,EAAsB,GAAK,GACnC/D,MAhBQ,GAiBRE,OAhBS,IAkBXhB,UAAW,cAPb,SAaF,kBAAC,gBAAD,CACE6F,QAASO,EACTN,OAAQM,EACRL,OAAQK,EACRJ,UAAU,EACV3N,MAAO,GAEP,yBACE0I,MAAO,CACLE,UAAWR,EAAkB1G,EAAKrB,IAAIf,EAAGoC,EAAKrB,IAAId,GAClDoM,QAAuB,IAAfa,EAAsB,GAAK,GACnC/D,MApCQ,GAqCRE,OApCS,IAsCXhB,UAAW,YAPb,UAac,IAAf6E,EACC,kBAAC,GAAD,CACEpM,MAAOsB,EAAKtB,MACZC,IAAKqB,EAAKrB,IACVsC,OAAQjB,EAAKb,KAGf,kBAAC,GAAD,CACET,MAAOsB,EAAKtB,MACZC,IAAKqB,EAAKrB,IACVuH,QA1DQ,WACdL,EAASZ,EAAQG,UAAUmH,mBAAmBvM,EAAKb,QA6DjD,kBAAC,EAAD,CAAcT,MAAOsB,EAAKtB,MAAOC,IAAKqB,EAAKrB,Q,SC5EpC6N,GAAiB,SAAC,GAAiC,IAA/BrM,EAA8B,EAA9BA,MAAOY,EAAuB,EAAvBA,iBACtC,OACE,kBAAC,IAAD,CAAa0L,QAASC,MACnBvM,EAAMoL,KAAI,SAAAvL,GACT,OACE,kBAAC,GAAD,CACES,IAAKT,EAAKb,GACVa,KAAMA,EACN8K,gBAA0CE,IAA9BjK,EAAiBf,EAAKb,WCTjCwN,GAAoB,SAACtN,GAA2B,IACnDW,EAASX,EAATW,KACR,OACE,6BACE,kBAAC,EAAD,CAActB,MAAOsB,EAAKtB,MAAOC,IAAKqB,EAAKrB,QCFpCiO,GAAe,SAAC,GAAc,IACnCC,EADkC,EAAXzM,OACD1C,EAAW2C,UACjCF,EAAQ+I,aAAY,SAACC,GACzB,OAAOtI,OAAOyK,OAAOnC,EAAMjJ,QAAQC,UAE/BY,EAAmBmI,aAAY,SAACC,GACpC,OAAOA,EAAMrJ,GAAGiB,oBAGlB,OAAI8L,EACK,kBAAC,GAAD,CAAgB1M,MAAOA,EAAOY,iBAAkBA,IAIvD,kBAAC,IAAMuG,SAAP,KACGnH,EAAMoL,KAAI,SAAAvL,GACT,OAAO,kBAAC,GAAD,CAAmBS,IAAKT,EAAKb,GAAIa,KAAMA,SChBzC8M,GAAoB,SAAC,GAA0B,IAAxBC,EAAuB,EAAvBA,SAAUhB,EAAa,EAAbA,OACpCnO,EAAemP,EAAfnP,EAAGC,EAAYkP,EAAZlP,EAAGmP,EAASD,EAATC,EAAGC,EAAMF,EAANE,EACjB,OACE,kBAAC,IAAD,CAAaR,QAASC,MACpB,kBAAC,gBAAD,CACEZ,QAASC,EACTA,OAAQA,EACRC,OAAQD,EACRzN,MAAO,EACP2N,UAAU,GAEV,yBACEjF,MAAO,CACL9H,SAAU,WACVuJ,IAAK,EACLF,KAAM,EACNxB,MAAOiG,EACP/F,OAAQgG,EACR/F,UAAWR,EAAkB9I,EAAGC,GAChCgN,QAAS,EACTZ,OAAQ,GACRE,OAAQ,6BACR+C,WAAY,mBACZzB,OAAQ,SAZZ,WCqBK0B,GAA4BC,IAAMC,MA/Bd,SAAC,GAA8B,EAA5BnM,sBAA6B,IACzDoM,EAAgBpE,aAAY,SAACC,GACjC,OAAOtI,OAAOC,KAAKqI,EAAMrJ,GAAGiB,kBAAkBwK,KAAI,SAAAtK,GAChD,OAAOkI,EAAMjJ,QAAQC,MAAMc,SAG3BsM,EAAeC,OAAOC,iBACtBC,GAA0C,EAA3BF,OAAOC,iBACtBE,EAAeH,OAAOC,iBACtBG,GAA0C,EAA3BJ,OAAOC,iBAC1BH,EAActM,SAAQ,SAAAhB,GACpB,IAAMtB,EAAQsB,EAAKtB,MACbC,EAAMqB,EAAKrB,IACjB4O,EAAOrP,KAAKuG,IAAI8I,EAAM7O,EAAMd,EAAGe,EAAIf,GACnC8P,EAAOxP,KAAKwG,IAAIgJ,EAAMhP,EAAMd,EAAGe,EAAIf,GACnC+P,EAAOzP,KAAKuG,IAAIkJ,EAAMjP,EAAMb,EAAGc,EAAId,GACnC+P,EAAO1P,KAAKwG,IAAIkJ,EAAMlP,EAAMb,EAAGc,EAAId,MAErC,IAAMkP,EAAW,CACfnP,EAAG2P,EACH1P,EAAG8P,EACHX,EAAGU,EAAOH,EAAO,GACjBN,EAAGW,EAAOD,EAAO,IAEb9H,EAAWC,cAIjB,OAAO,kBAAC,GAAD,CAAmBiH,SAAUA,EAAUhB,OAHrB,SAACH,EAAD,GAA2C,IAArCjL,EAAoC,EAApCA,OAAQC,EAA4B,EAA5BA,OACrCiF,EAASZ,EAAQG,UAAUyI,uBAAuB,CAAElN,SAAQC,kBC9BnDkN,GAAoB,SAAC,GAAkB,IAAhBf,EAAe,EAAfA,SAC1BnP,EAAemP,EAAfnP,EAAGC,EAAYkP,EAAZlP,EAAGmP,EAASD,EAATC,EAAGC,EAAMF,EAANE,EACjB,OACE,yBACEjG,MAAO,CACL9H,SAAU,WACVuJ,IAAK,EACLF,KAAM,EACNxB,MAAOiG,EACP/F,OAAQgG,EACR/F,UAAWR,EAAkB9I,EAAGC,GAChCgN,QAAS,EACTZ,OAAQ,GACRE,OAAQ,6BACR+C,WAAY,qBAXhB,SC4BSa,GAA4BX,IAAMC,MA7BrB,SAAC,GAA8B,EAA5BhM,sBAA6B,IAClD2M,EAAe9E,aAAY,SAACC,GAChC,OAAOtI,OAAOC,KAAKqI,EAAMrJ,GAAGsB,kBAAkBmK,KAAI,SAAApK,GAChD,OAAOgI,EAAMjJ,QAAQ+B,MAAMd,SAG3BoM,EAAeC,OAAOC,iBACtBC,GAA0C,EAA3BF,OAAOC,iBACtBE,EAAeH,OAAOC,iBACtBG,GAA0C,EAA3BJ,OAAOC,iBAC1BO,EAAahN,SAAQ,SAAAe,GACnB,IAAMS,EAAST,EAAK7C,SAAStB,EACvB8E,EAAOX,EAAK7C,SAAStB,EAAI,GACzB6E,EAASV,EAAK7C,SAASrB,EACvB8E,EAAOZ,EAAK7C,SAASrB,EAAI,GAC/B0P,EAAOrP,KAAKuG,IAAI8I,EAAM/K,EAAQE,GAC9BgL,EAAOxP,KAAKwG,IAAIgJ,EAAMlL,EAAQE,GAC9BiL,EAAOzP,KAAKuG,IAAIkJ,EAAMlL,EAAQE,GAC9BiL,EAAO1P,KAAKwG,IAAIkJ,EAAMnL,EAAQE,MAEhC,IAAMoK,EAAW,CACfnP,EAAG2P,EACH1P,EAAG8P,EACHX,EAAGU,EAAOH,EAAO,GACjBN,EAAGW,EAAOD,EAAO,IAEnB,OAAO,kBAAC,GAAD,CAAmBZ,SAAUA,OCzBzBkB,GAA4B,SAAC,GAAc,IAAZ7N,EAAW,EAAXA,KACpCiB,EAAwB6H,aAAY,SAACC,GACzC,OAAOA,EAAMrJ,GAAGuB,yBAGZH,EAAwBgI,aAAY,SAACC,GACzC,OAAOA,EAAMrJ,GAAGoB,yBAGlB,OAAId,IAAS1C,EAAW6I,WAAalF,GAAyB,EAE1D,kBAAC0M,GAAD,CACE1M,sBAAuBA,IAKzBjB,IAAS1C,EAAW2C,WAAaa,GAAyB,EAE1D,kBAACiM,GAAD,CACEjM,sBAAuBA,IAItB,kBAAC,IAAMoG,SAAP,OCjBI4G,GAAc,WACzB,IAAMtI,EAAasD,aAAY,SAACC,GAC9B,OAAOA,EAAM/I,QAGf,OACE,yBAAK6F,UAAU,SACb,yBAAKA,UAAU,kBACb,kBAAC,EAAD,OAGF,yBAAKA,UAAU,mBACb,kBAAC,EAAD,CAAaL,WAAYA,KAG3B,yBAAKK,UAAW,iBACd,kBAAC,EAAD,CAAaoB,SAAUzB,IAAelI,EAAW8I,UAEjD,kBAAC,EAAD,CAAqBsD,UAAWlE,IAAelI,EAAW2C,YAE1D,kBAAC,EAAD,CAAqByJ,UAAWlE,IAAelI,EAAW6I,YAE1D,kBAAC,EAAD,CAAcnG,KAAMwF,IAEpB,kBAAC,GAAD,CAAcxF,KAAMwF,IAEpB,kBAAC,GAAD,CAA2BxF,KAAMwF,KAGnC,yBAAKK,UAAW,mBACd,kBAAC,EAAD,CAAY0D,MAAO,GAAIC,SAAU,kB,SCpB1BuE,GAfO,WACpB,IAAMC,EAAYC,aAChB7I,GAIF,OACE,yBAAKS,UAAU,OACb,kBAAC,IAAD,CAAUT,MAAO4I,GACf,kBAAC,GAAD,SCLYE,QACW,cAA7BtL,OAAO+J,SAASwB,UAEe,UAA7BvL,OAAO+J,SAASwB,UAEhBvL,OAAO+J,SAASwB,SAASC,MACvB,2DCZNC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SDmI3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.4fe80792.chunk.js","sourcesContent":["import { immerable } from \"immer\";\n\nexport interface Point {\n  x: number;\n  y: number;\n  [immerable]: boolean;\n}\n\nexport interface Bead {\n  id: string;\n  position: Point;\n  [immerable]: boolean;\n}\n\nexport interface Line {\n  id: string;\n  start: Point;\n  end: Point;\n  beadIds: string[];\n  [immerable]: boolean;\n  settings: {\n    beadCount: number;\n    autoFill: boolean;\n  };\n}\n\nexport interface AppData {\n  beads: { [s: string]: Bead };\n  lines: { [s: string]: Line };\n}\n\nexport enum EditorMode {\n  Idle = \"Move\",\n  EditLines = \"Edit\",\n  AddLine = \"Add Line\",\n  EditBeads = \"EditBeads\",\n}\n\nexport interface EditorUi {\n  lineSettings: {\n    autoFill: boolean;\n  };\n  saveInfo: {\n    saved: boolean;\n  };\n  selectedLinesIds: { [s: string]: boolean };\n  selectedLinesIdsCount: number;\n  selectedBeadsIds: { [s: string]: boolean };\n  selectedBeadsIdsCount: number;\n  mouseSelection: {\n    start: Point;\n    end: Point;\n    isDragStarted: boolean;\n    isDragged: boolean;\n  };\n}\n\nexport interface Editor {\n  appData: AppData;\n  ui: EditorUi;\n  mode: EditorMode;\n}\n","import { Point } from \"./Editor\";\nimport { immerable } from \"immer\";\n\nexport const build = (x: number = 0, y: number = 0): Point => {\n  return {\n    x,\n    y,\n    [immerable]: true,\n  } as Point;\n};\n\nexport const getLength = (point: Point) => {\n  return Math.sqrt(point.x * point.x + point.y * point.y);\n};\n\nexport const normalize = (point: Point) => {\n  const length = getLength(point);\n  const useLen = length === 0;\n  const x = useLen ? 0 : point.x / length;\n  const y = useLen ? 0 : point.y / length;\n  return build(x, y);\n};\n\nexport const scale = (point: Point, scalar: number) => {\n  return build(point.x * scalar, point.y * scalar);\n};\n\nexport const add = (point: Point, x: number, y: number) => {\n  return build(point.x + x, point.y + y);\n};\n\nexport const getDistance = (x1, y1, x2, y2): number => {\n  return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n};\n\nexport const getDistanceBetweenPoints = (start: Point, end: Point): number => {\n  return Math.sqrt(\n    (end.x - start.x) * (end.x - start.x) +\n      (end.y - start.y) * (end.y - start.y)\n  );\n};\n\nexport const getRotate = (y, x) => {\n  return Math.atan2(y, x);\n};\n\nexport const contain = (p1: Point, p2: Point, p: Point): boolean => {\n  return p.x > p1.x && p.x < p2.x && p.y > p1.y && p.y < p2.y;\n};\n","import { immerable } from \"immer\";\nimport { generate } from \"shortid\";\nimport { Point, Bead } from \"./Editor\";\n\nexport const build = (position: Point): Bead => {\n  const id = generate();\n  return {\n    id,\n    position,\n    [immerable]: true,\n  } as Bead;\n};\n","import { immerable } from \"immer\";\nimport { Line, Point } from \"./Editor\";\nimport { generate } from \"shortid\";\nimport { normalize, scale, add, build as buildPoint } from \"./Point\";\n\nexport const build = (props: {\n  start: Point;\n  end: Point;\n  beadIds?: string[];\n}): Line => {\n  const { start, end, beadIds } = props;\n  const id = generate();\n  return {\n    id,\n    start,\n    end,\n    beadIds: beadIds && beadIds.length > 0 ? beadIds : [],\n    settings: {\n      beadCount: 0,\n      autoFill: true,\n    },\n    [immerable]: true,\n  } as Line;\n};\n\nexport const getLength = (line: Line): number => {\n  return Math.sqrt(\n    (line.end.x - line.start.x) * (line.end.x - line.start.x) +\n      (line.end.y - line.start.y) * (line.end.y - line.start.y)\n  );\n};\n\nexport const getPointFromStart = (line: Line, distance: number): Point => {\n  const x = line.end.x - line.start.x;\n  const y = line.end.y - line.start.y;\n  let point = buildPoint(x, y);\n  point = normalize(point);\n  point = scale(point, distance);\n  point = add(point, line.start.x, line.start.y);\n  return point;\n};\n\nexport const getPointFromStartLine = (\n  startX: number,\n  startY: number,\n  endX: number,\n  endY: number,\n  distance: number\n): Point => {\n  const x = endX - startX;\n  const y = endY - startY;\n  let point = buildPoint(x, y);\n  point = normalize(point);\n  point = scale(point, distance);\n  point = add(point, startX, startY);\n  return point;\n};\n","import { Editor, EditorMode, Point } from \"../editorObjects/Editor\";\nimport {\n  build as buildPoint,\n  getDistanceBetweenPoints,\n} from \"../editorObjects/Point\";\nimport { ImmerReducer } from \"immer-reducer\";\nimport { build as buildBead } from \"../editorObjects/Bead\";\nimport { build as buildLine } from \"../editorObjects/Line\";\nimport { getPointFromStartLine } from \"../editorObjects/Line\";\n\nconst boxOffset = 5;\n\nexport class DraggableOperationsImmerReducer extends ImmerReducer<Editor> {\n  action_onAddLine(start: Point, end: Point) {\n    const useAutoFill = this.draftState.ui.lineSettings.autoFill;\n    const beadIds = [];\n    const line = buildLine({ start, end, beadIds });\n    line.settings.autoFill = useAutoFill;\n    this.draftState.appData.lines[line.id] = line;\n    this.draftState.mode = EditorMode.EditLines;\n    this.updateBeadsPositions(line.id);\n    this.draftState.ui.saveInfo.saved = false;\n  }\n\n  action_onStartPointDrag(\n    key: string,\n    data: {\n      x: number;\n      y: number;\n    }\n  ) {\n    if (this.draftState.appData.lines[key]) {\n      const line = this.draftState.appData.lines[key];\n      line.start.x = data.x - boxOffset;\n      line.start.y = data.y - boxOffset;\n      this.updateBeadsPositions(line.id);\n      this.draftState.ui.saveInfo.saved = false;\n    }\n  }\n\n  action_onEndPointDrag(\n    key: string,\n    data: {\n      x: number;\n      y: number;\n    }\n  ) {\n    if (this.draftState.appData.lines[key]) {\n      const line = this.draftState.appData.lines[key];\n      line.end.x = data.x - boxOffset;\n      line.end.y = data.y - boxOffset;\n      this.updateBeadsPositions(line.id);\n      this.draftState.ui.saveInfo.saved = false;\n    }\n  }\n\n  action_onLineDrag(\n    key: string,\n    data: {\n      deltaX: number;\n      deltaY: number;\n    }\n  ) {\n    if (this.draftState.appData.lines[key]) {\n      const line = this.draftState.appData.lines[key];\n      line.start.x = line.start.x + data.deltaX;\n      line.start.y = line.start.y + data.deltaY;\n      line.end.x = line.end.x + data.deltaX;\n      line.end.y = line.end.y + data.deltaY;\n      this.updateBeadsPositions(line.id);\n      this.draftState.ui.saveInfo.saved = false;\n    }\n  }\n\n  action_onGroupLineDrag(data: { deltaX: number; deltaY: number }) {\n    Object.keys(this.draftState.ui.selectedLinesIds).forEach(lineId => {\n      if (this.draftState.appData.lines[lineId]) {\n        const line = this.draftState.appData.lines[lineId];\n        line.start.x = line.start.x + data.deltaX;\n        line.start.y = line.start.y + data.deltaY;\n        line.end.x = line.end.x + data.deltaX;\n        line.end.y = line.end.y + data.deltaY;\n        this.updateBeadsPositions(line.id);\n        this.draftState.ui.saveInfo.saved = false;\n      }\n    });\n  }\n\n  action_onGroupBeadsDrag(data: { deltaX: number; deltaY: number }) {}\n\n  action_onClickLine(lineId: string) {\n    this.draftState.ui.selectedLinesIds = {};\n    this.draftState.ui.selectedLinesIds[lineId] = true;\n    this.draftState.ui.selectedLinesIdsCount = 1;\n  }\n\n  action_onClickBead(beadId: string) {\n    this.draftState.ui.selectedBeadsIds = {};\n    this.draftState.ui.selectedBeadsIds[beadId] = true;\n    this.draftState.ui.selectedBeadsIdsCount = 1;\n  }\n\n  private updateBeadsPositions(lineId: string) {\n    const startOffset = 25;\n    const offset = 5;\n    const beadWidth = 20;\n    const size = beadWidth + offset;\n    const currentLine = this.draftState.appData.lines[lineId];\n    const { start, end, beadIds } = currentLine;\n    const len = getDistanceBetweenPoints(start, end);\n    const count = Math.floor((len - startOffset - offset) / size);\n    const currentCount = beadIds.length;\n    if (count > currentCount) {\n      const remainingCount = count - currentCount;\n      for (let i = 0; i < remainingCount; i++) {\n        const position = buildPoint();\n        const bead = buildBead(position);\n        this.draftState.appData.beads[bead.id] = bead;\n        this.draftState.appData.lines[lineId].beadIds.push(bead.id);\n      }\n    } else if (count < currentCount) {\n      const remainingCount = currentCount - count;\n      for (let i = 0; i < remainingCount; i++) {\n        const arrLen = this.draftState.appData.lines[lineId].beadIds.length;\n        const lastItemBeadId = this.draftState.appData.lines[\n          lineId\n        ].beadIds.splice(arrLen - 1, 1);\n        delete this.draftState.appData.beads[lastItemBeadId[0]];\n      }\n    }\n    let currentDistance = startOffset;\n    this.draftState.appData.lines[lineId].beadIds.forEach(beadId => {\n      const newPosition = getPointFromStartLine(\n        start.x,\n        start.y,\n        end.x,\n        end.y,\n        currentDistance\n      );\n      const halfSize = beadWidth / 2;\n      const x = newPosition.x - halfSize + 5;\n      const y = newPosition.y - halfSize + 5;\n      this.draftState.appData.beads[beadId].position.x = x;\n      this.draftState.appData.beads[beadId].position.y = y;\n      currentDistance = currentDistance + size;\n    });\n  }\n}\n","import { Editor } from \"../editorObjects/Editor\";\nimport { ImmerReducer } from \"immer-reducer\";\nimport { build as buildBead } from \"../editorObjects/Bead\";\nimport { build as buildLine } from \"../editorObjects/Line\";\n\nexport class PersistImmerReducer extends ImmerReducer<Editor> {\n  action_onClearCanvas() {\n    this.draftState.appData.beads = {};\n    this.draftState.appData.lines = {};\n    this.draftState.ui.saveInfo.saved = false;\n  }\n  action_readSavedCanvas() {\n    this.draftState.ui.saveInfo.saved = true;\n    if (\"localStorage\" in window) {\n      const readedData = localStorage.getItem(\"appData\");\n      if (readedData !== null) {\n        this.draftState.appData = {\n          beads: {},\n          lines: {},\n        };\n        const cached = JSON.parse(readedData) as Editor[\"appData\"];\n        Object.keys(cached.beads).forEach(beadId => {\n          const currBead = cached.beads[beadId];\n          const bead = buildBead(currBead.position);\n          bead.id = currBead.id;\n          this.draftState.appData.beads[beadId] = bead;\n        });\n        Object.keys(cached.lines).forEach(lineId => {\n          const currLine = cached.lines[lineId];\n          const line = buildLine({\n            start: currLine.start,\n            end: currLine.end,\n            beadIds: currLine.beadIds,\n          });\n          line.id = currLine.id;\n          this.draftState.appData.lines[lineId] = line;\n        });\n        console.log(\"action_readSavedCanvas loaded\");\n      } else {\n        console.info(\"No data in localstorage\");\n      }\n    } else {\n      console.info(\"No localstorage available\");\n    }\n  }\n\n  action_onSaveCanvas() {\n    if (\"localStorage\" in window) {\n      localStorage.setItem(\"appData\", JSON.stringify(this.draftState.appData));\n      this.draftState.ui.saveInfo.saved = true;\n        console.log(\"action_onSaveCanvas saved\");\n    } else {\n      console.info(\"No localstorage available\");\n    }\n  }\n}\n","import { Editor, EditorMode } from \"../editorObjects/Editor\";\nimport { ImmerReducer } from \"immer-reducer\";\n\nexport class ChangeEditorModeImmerReducer extends ImmerReducer<Editor> {\n  action_onChangeEditorMode(newEditorMode: EditorMode) {\n    this.draftState.mode = newEditorMode;\n    this.clearSelectedBeads();\n    this.clearSelectedLines();\n  }\n  private clearSelectedBeads = () => {\n    if (this.draftState.ui.selectedBeadsIdsCount > 0) {\n      this.draftState.ui.selectedBeadsIds = {};\n      this.draftState.ui.selectedBeadsIdsCount = 0;\n    }\n  };\n  private clearSelectedLines = () => {\n    if (this.draftState.ui.selectedLinesIdsCount) {\n      this.draftState.ui.selectedLinesIds = {};\n      this.draftState.ui.selectedLinesIdsCount = 0;\n    }\n  };\n  action_setSaveInfo(newValue: boolean) {\n    this.draftState.ui.saveInfo.saved = newValue;\n  }\n}\n","import { Editor } from \"../editorObjects/Editor\";\nimport { ImmerReducer } from \"immer-reducer\";\n\nexport class MainImmerReducer extends ImmerReducer<Editor> {\n  action_test() {}\n}\n","import { Editor } from \"../editorObjects/Editor\";\nimport { ImmerReducer } from \"immer-reducer\";\nimport { build as buildPoint } from \"../editorObjects/Point\";\nimport { contain } from \"../editorObjects/Point\";\nimport { difference } from \"lodash\";\n\nexport class MouseSelectionImmerReducer extends ImmerReducer<Editor> {\n  action_onEditBeadsMouseDown(x, y) {\n    this.draftState.ui.mouseSelection.isDragStarted = true;\n\n    this.draftState.ui.mouseSelection.start.x = x;\n    this.draftState.ui.mouseSelection.start.y = y;\n    this.draftState.ui.mouseSelection.end.x = x;\n    this.draftState.ui.mouseSelection.end.y = y;\n  }\n\n  action_onEditBeadsMouseMove(x, y) {\n    this.draftState.ui.mouseSelection.end.x = x;\n    this.draftState.ui.mouseSelection.end.y = y;\n\n    if (this.draftState.ui.mouseSelection.isDragged === false) {\n      const { start, end } = this.draftState.ui.mouseSelection;\n      const deltaX = end.x - start.x;\n      const deltaY = end.y - start.y;\n\n      if (Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5) {\n        this.draftState.ui.mouseSelection.isDragged = true;\n      }\n    }\n\n    if (this.draftState.ui.mouseSelection.isDragged === true) {\n      const { start, end } = this.draftState.ui.mouseSelection;\n      const p1 = buildPoint(Math.min(start.x, end.x), Math.min(start.y, end.y));\n      const p2 = buildPoint(Math.max(start.x, end.x), Math.max(start.y, end.y));\n      this.draftState.ui.selectedBeadsIds = {};\n      this.draftState.ui.selectedBeadsIdsCount = 0;\n      Object.keys(this.draftState.appData.beads).forEach(beadId => {\n        const bead = this.draftState.appData.beads[beadId];\n        const p3 = buildPoint(bead.position.x + 10, bead.position.y + 10);\n        if (contain(p1, p2, p3)) {\n          this.draftState.ui.selectedBeadsIds[beadId] = true;\n          this.draftState.ui.selectedBeadsIdsCount =\n            this.draftState.ui.selectedBeadsIdsCount + 1;\n        }\n      });\n    }\n  }\n\n  action_onEditBeadsMouseUp() {\n    if (this.draftState.ui.mouseSelection.isDragged === false) {\n      if (this.draftState.ui.selectedBeadsIdsCount > 0) {\n        this.draftState.ui.selectedBeadsIds = {};\n      }\n    }\n\n    this.draftState.ui.mouseSelection.isDragStarted = false;\n    this.draftState.ui.mouseSelection.isDragged = false;\n    this.draftState.ui.mouseSelection.start.x = 0;\n    this.draftState.ui.mouseSelection.start.y = 0;\n    this.draftState.ui.mouseSelection.end.x = 0;\n    this.draftState.ui.mouseSelection.end.y = 0;\n  }\n\n  action_onEditLinesMouseDown(x: number, y: number) {\n    this.draftState.ui.mouseSelection.isDragStarted = true;\n    this.draftState.ui.mouseSelection.start.x = x;\n    this.draftState.ui.mouseSelection.start.y = y;\n    this.draftState.ui.mouseSelection.end.x = x;\n    this.draftState.ui.mouseSelection.end.y = y;\n  }\n\n  action_onEditLinesMouseMove(x: number, y: number) {\n    this.draftState.ui.mouseSelection.end.x = x;\n    this.draftState.ui.mouseSelection.end.y = y;\n\n    if (this.draftState.ui.mouseSelection.isDragged === false) {\n      const { start, end } = this.draftState.ui.mouseSelection;\n      const deltaX = end.x - start.x;\n      const deltaY = end.y - start.y;\n      if (Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5) {\n        this.draftState.ui.mouseSelection.isDragged = true;\n      }\n    }\n\n    if (this.draftState.ui.mouseSelection.isDragged === true) {\n      const { start, end } = this.draftState.ui.mouseSelection;\n      const p1 = buildPoint(Math.min(start.x, end.x), Math.min(start.y, end.y));\n      const p2 = buildPoint(Math.max(start.x, end.x), Math.max(start.y, end.y));\n\n      const selectedIds = Object.keys(this.draftState.ui.selectedLinesIds);\n      const newIds: string[] = [];\n\n      Object.keys(this.draftState.appData.lines).forEach(lineId => {\n        const line = this.draftState.appData.lines[lineId];\n        if (contain(p1, p2, line.start) || contain(p1, p2, line.end)) {\n          newIds.push(lineId);\n        }\n      });\n\n      const diff = difference(newIds, selectedIds);\n      \n      if (diff.length > 0) {\n        this.draftState.ui.selectedLinesIds = {};\n        this.draftState.ui.selectedLinesIdsCount = 0;\n        newIds.forEach(id => {\n          this.draftState.ui.selectedLinesIds[id] = true;\n          this.draftState.ui.selectedLinesIdsCount =\n            this.draftState.ui.selectedLinesIdsCount + 1;\n        });\n      }\n      // this.draftState.ui.selectedLinesIds = {};\n      // this.draftState.ui.selectedLinesIdsCount = 0;\n      // Object.keys(this.draftState.appData.lines).forEach(lineId => {\n      //   const line = this.draftState.appData.lines[lineId];\n      //   if (contain(p1, p2, line.start) || contain(p1, p2, line.end)) {\n      //     this.draftState.ui.selectedLinesIds[lineId] = true;\n      //     this.draftState.ui.selectedLinesIdsCount =\n      //       this.draftState.ui.selectedLinesIdsCount + 1;\n      //   }\n      // });\n    }\n  }\n\n  action_onEditLinesMouseUp() {\n    if (this.draftState.ui.mouseSelection.isDragged === false) {\n      if (this.draftState.ui.selectedLinesIdsCount > 0) {\n        this.draftState.ui.selectedLinesIds = {};\n      }\n    }\n\n    this.draftState.ui.mouseSelection.isDragStarted = false;\n    this.draftState.ui.mouseSelection.isDragged = false;\n    this.draftState.ui.mouseSelection.start.x = 0;\n    this.draftState.ui.mouseSelection.start.y = 0;\n    this.draftState.ui.mouseSelection.end.x = 0;\n    this.draftState.ui.mouseSelection.end.y = 0;\n  }\n}\n","import { Editor, EditorMode } from \"./editorObjects/Editor\";\nimport { build as buildPoint } from \"./editorObjects/Point\";\nimport { composeReducers } from \"immer-reducer\";\nimport { createActionCreators, createReducerFunction } from \"immer-reducer\";\nimport { DraggableOperationsImmerReducer } from \"./immerReducers/DraggableOperationsImmerReducer\";\nimport { PersistImmerReducer } from \"./immerReducers/PersistImmerReducer\";\nimport { ChangeEditorModeImmerReducer } from \"./immerReducers/ChangeEditorModeImmerReducer\";\nimport { MainImmerReducer } from \"./immerReducers/MainImmerReducer\";\nimport { MouseSelectionImmerReducer } from \"./immerReducers/MouseSelectionImmerReducer\";\n\nconst defaultAppData: Editor = {\n  appData: {\n    beads: {},\n    lines: {},\n  },\n  ui: {\n    lineSettings: {\n      autoFill: true,\n    },\n    saveInfo: {\n      saved: false,\n    },\n    selectedLinesIds: {},\n    selectedLinesIdsCount: 0,\n    selectedBeadsIds: {},\n    selectedBeadsIdsCount: 0,\n    mouseSelection: {\n      start: buildPoint(0, 0),\n      end: buildPoint(0, 0),\n      isDragStarted: false,\n      isDragged: false,\n    },\n  },\n  mode: EditorMode.Idle,\n};\n\nexport const Actions = {\n  Main: createActionCreators(MainImmerReducer),\n  Draggable: createActionCreators(DraggableOperationsImmerReducer),\n  Persist: createActionCreators(PersistImmerReducer),\n  ChangeEditorMode: createActionCreators(ChangeEditorModeImmerReducer),\n  MouseSelection: createActionCreators(MouseSelectionImmerReducer),\n};\n\nexport const store = composeReducers(\n  createReducerFunction(MainImmerReducer, defaultAppData),\n  createReducerFunction(DraggableOperationsImmerReducer, defaultAppData),\n  createReducerFunction(PersistImmerReducer, defaultAppData),\n  createReducerFunction(ChangeEditorModeImmerReducer, defaultAppData),\n  createReducerFunction(MouseSelectionImmerReducer, defaultAppData)\n);\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus, faEdit, faArrowsAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { EditorMode } from \"../../editorObjects/Editor\";\nimport { uiButton } from \"../colors\";\nimport { useDispatch } from \"react-redux\";\nimport { Actions } from \"../../store\";\n\nexport const EditorModes = ({ editorMode }) => {\n  const dispatch = useDispatch();\n\n  const onChangeEditorMode = (newEditorMode: EditorMode) => {\n    dispatch(Actions.ChangeEditorMode.action_onChangeEditorMode(newEditorMode));\n  };\n\n  return (\n    <div className=\"\">\n      <div\n        className={`\n              button \n              ${editorMode === EditorMode.Idle ? \"is-active\" : \"\"}\n            `}\n        onClick={() => onChangeEditorMode(EditorMode.Idle)}\n      >\n        <span className=\"icon is-small\">\n          <FontAwesomeIcon icon={faArrowsAlt} color={uiButton} />\n        </span>\n        <span>Idle</span>\n      </div>\n\n      <div\n        className={`\n              button \n              ${editorMode === EditorMode.EditLines ? \"is-active\" : \"\"}\n            `}\n        onClick={() => onChangeEditorMode(EditorMode.EditLines)}\n      >\n        <span className=\"icon is-small\">\n          <FontAwesomeIcon icon={faEdit} color={uiButton} />\n        </span>\n        <span>EditLines</span>\n      </div>\n\n      <div\n        className={`\n              button \n              ${editorMode === EditorMode.EditBeads ? \"is-active\" : \"\"}\n            `}\n        onClick={() => onChangeEditorMode(EditorMode.EditBeads)}\n      >\n        <span className=\"icon is-small\">\n          <FontAwesomeIcon icon={faEdit} color={uiButton} />\n        </span>\n        <span>Edit Beads</span>\n      </div>\n\n      <div\n        className={`\n              button \n              ${editorMode === EditorMode.AddLine ? \"is-active\" : \"\"}\n            `}\n        onClick={() => onChangeEditorMode(EditorMode.AddLine)}\n      >\n        <span className=\"icon is-small\">\n          <FontAwesomeIcon icon={faPlus} color={uiButton} />\n        </span>\n        <span>AddLine</span>\n      </div>\n    </div>\n  );\n};\n","export const uiButton = \"#aeaeae\"","export const getTranslate3dCss = (x, y, z = 1) => {\n  return `translate3d(${x}px, ${y}px, ${z}px)`;\n};\n\nexport const getRotateCss = rotate => {\n  return `rotate(${rotate}rad)`;\n};\n","import React from \"react\";\nimport { getDistanceBetweenPoints, getRotate } from \"../../editorObjects/Point\";\nimport { getTranslate3dCss, getRotateCss } from \"../operations/MapValuesToCss\";\n\nexport const StraightLine = ({ start, end }) => {\n  const size = 5;\n  const height = 1;\n  const width = getDistanceBetweenPoints(start, end);\n  const rotate = getRotate(end.y - start.y, end.x - start.x);\n  return (\n    <div\n      style={{\n        height,\n        width,\n        transform: `${getTranslate3dCss(\n          start.x + size,\n          start.y + size\n        )} ${getRotateCss(rotate)}`,\n        transformOrigin: \"left center\",\n      }}\n      className=\"line\"\n    >\n      &nbsp;\n    </div>\n  );\n};\n","import React, { useState, MouseEvent, useRef } from \"react\";\nimport { StraightLine } from \"./StraightLine\";\nimport { getTranslate3dCss } from \"../operations/MapValuesToCss\";\nimport { useDispatch } from \"react-redux\";\nimport { Point } from \"../../editorObjects/Editor\";\nimport { Actions } from \"../../store\";\n\nexport const AddLineMode = ({ isActive }) => {\n  if (isActive === false) {\n    return <React.Fragment />;\n  }\n\n  return <AddLineModeContent />;\n};\n\nconst AddLineModeContent = () => {\n  interface SimplePoint {\n    x: number;\n    y: number;\n  }\n  const [startPoint, setStartPoint] = useState<SimplePoint>({\n    x: 0,\n    y: 0,\n  });\n  const [endPoint, setEndPoint] = useState<SimplePoint>({\n    x: 0,\n    y: 0,\n  });\n  const [isDragEnabled, setIsDragEnabled] = useState<boolean>(false);\n  const lineRef = useRef<HTMLDivElement>(null);\n  const onMouseDown = (event: MouseEvent<HTMLElement>) => {\n    if (lineRef.current) {\n      const rect = lineRef.current.getBoundingClientRect();\n      const x = event.clientX - rect.left;\n      const y = event.clientY - rect.top;\n      setStartPoint({ x, y });\n      setEndPoint({ x, y });\n      setIsDragEnabled(true);\n    }\n  };\n  const onMouseUp = (event: MouseEvent<HTMLElement>) => {\n    if (isDragEnabled) {\n      if (lineRef.current) {\n        const rect = lineRef.current.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const y = event.clientY - rect.top;\n        setEndPoint({ x, y });\n        onAddLine(startPoint, endPoint);\n        setIsDragEnabled(false);\n      }\n    }\n  };\n  const onMouseMove = (event: MouseEvent<HTMLElement>) => {\n    if (isDragEnabled) {\n      if (lineRef.current) {\n        const rect = lineRef.current.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const y = event.clientY - rect.top;\n        setEndPoint({ x, y });\n      }\n    }\n  };\n  const dispatch = useDispatch();\n\n  const onAddLine = (start: SimplePoint, end: SimplePoint) => {\n    dispatch(Actions.Draggable.action_onAddLine(start as Point, end as Point));\n  };\n\n  return (\n    <div>\n      <div\n        onMouseDown={onMouseDown}\n        onMouseUp={onMouseUp}\n        onMouseMove={onMouseMove}\n        onMouseLeave={onMouseUp}\n        className=\"add-line-wrapper\"\n        ref={lineRef}\n      ></div>\n\n      {isDragEnabled ? (\n        <div>\n          <div\n            style={{\n              transform: getTranslate3dCss(startPoint.x, startPoint.y),\n              width: 10,\n              height: 10,\n            }}\n            className={\"line-start\"}\n          >\n            &nbsp;\n          </div>\n          <div\n            style={{\n              transform: getTranslate3dCss(endPoint.x, endPoint.y),\n              width: 10,\n              height: 10,\n            }}\n            className={\"line-end\"}\n          >\n            &nbsp;\n          </div>\n          <StraightLine start={startPoint} end={endPoint} />\n        </div>\n      ) : null}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes, faSave, faDownload } from \"@fortawesome/free-solid-svg-icons\";\nimport { uiButton } from \"../colors\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Editor } from \"../../editorObjects/Editor\";\nimport { Actions } from \"../../store\";\n\nexport const EditorChangeState = () => {\n  const dispatch = useDispatch();\n  const isSaved = useSelector((state: Editor) => {\n    return state.ui.saveInfo.saved;\n  });\n\n  const onClearCanvas = () => {\n    dispatch(Actions.Persist.action_onClearCanvas());\n  };\n\n  const readSavedCanvas = () => {\n    dispatch(Actions.Persist.action_readSavedCanvas());\n  };\n\n  const onSaveCanvas = () => {\n    dispatch(Actions.Persist.action_onSaveCanvas());\n  };\n\n  return (\n    <div className=\"field has-addons\">\n      <div className=\"control\">\n        <div className={` button `} onClick={onClearCanvas}>\n          <span className=\"icon is-small\">\n            <FontAwesomeIcon icon={faTimes} color={uiButton} />\n          </span>\n          <span>Clear canvas</span>\n        </div>\n      </div>\n\n      <div className=\"control\">\n        <div\n          className={` button ${isSaved ? \"is-success\" : \"\"}`}\n          onClick={onSaveCanvas}\n        >\n          <span className=\"icon is-small\">\n            <FontAwesomeIcon icon={faSave} color={uiButton} />\n          </span>\n          <span>Save canvas</span>\n        </div>\n      </div>\n\n      <div className=\"control\">\n        <div className={` button `} onClick={readSavedCanvas}>\n          <span className=\"icon is-small\">\n            <FontAwesomeIcon icon={faDownload} />\n          </span>\n          <span>Load from localstorage</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\n\nexport const InputWidth = ({ value, onChange }) => {\n  return (\n    <div className={\"fieldset\"}>\n      <span className=\"label\">W:</span>\n      <input\n        className=\"input\"\n        type=\"number\"\n        value={value}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n","import React, { useRef, MouseEvent } from \"react\";\nimport { getTranslate3dCss } from \"./MapValuesToCss\";\nimport { Editor } from \"../../editorObjects/Editor\";\nimport { useSelector } from \"react-redux\";\n\nexport const MouseSelection = (props: {\n  isVisible: boolean;\n  onMouseDown: any;\n  onMouseUp: any;\n  onMouseMove: any;\n}) => {\n  const { isVisible } = props;\n  const sceneWrapperRef = useRef<HTMLDivElement>(null);\n\n  const start = useSelector((state: Editor) => {\n    return state.ui.mouseSelection.start;\n  });\n\n  const end = useSelector((state: Editor) => {\n    return state.ui.mouseSelection.end;\n  });\n\n  const mouseSelectionIsDragStarted = useSelector((state: Editor) => {\n    return state.ui.mouseSelection.isDragStarted;\n  });\n\n  if (isVisible === false) {\n    return <React.Fragment />;\n  }\n\n  const isActive = mouseSelectionIsDragStarted === true;\n  const { onMouseDown, onMouseUp, onMouseMove } = props;\n\n  const onMouseDownHandler = (event: MouseEvent<HTMLElement>) => {\n    if (sceneWrapperRef.current) {\n      const rect = sceneWrapperRef.current.getBoundingClientRect();\n      const x = event.clientX - rect.left;\n      const y = event.clientY - rect.top;\n      onMouseDown(x, y);\n    }\n  };\n\n  const onMouseUpHandler = (event: MouseEvent<HTMLElement>) => {\n    onMouseUp();\n  };\n\n  const onMouseMoveHandler = (event: MouseEvent<HTMLElement>) => {\n    if (isActive) {\n      if (sceneWrapperRef.current) {\n        const rect = sceneWrapperRef.current.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const y = event.clientY - rect.top;\n        onMouseMove(x, y);\n      }\n    }\n  };\n\n  const width = Math.abs(end.x - start.x);\n  const height = Math.abs(end.y - start.y);\n  const top = Math.min(end.x, start.x);\n  const left = Math.min(end.y, start.y);\n\n  // @TODO: czy chce odznacza zaznaczenie po wyjciu poza teren edytora?\n\n  return (\n    <div\n      className={\"mouse-selection\"}\n      ref={sceneWrapperRef}\n      onMouseDown={onMouseDownHandler}\n      onMouseUp={onMouseUpHandler}\n      // onMouseLeave={onMouseUpHandler}\n      onMouseMove={onMouseMoveHandler}\n      style={{\n        zIndex: isActive ? 23 : 9,\n      }}\n    >\n      {isActive ? (\n        <div\n          style={{\n            width,\n            height,\n            backgroundColor: \"rgba(0,0,0, 0.05)\",\n            border: \"1px solid rgba(0,0,0,.3)\",\n            transform: getTranslate3dCss(top, left),\n          }}\n        ></div>\n      ) : null}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Actions } from \"../../store\";\nimport { MouseSelection } from \"../operations/MouseSelection\";\n\nexport const MouseSelectionBeads = ({ isVisible }) => {\n  const dispatch = useDispatch();\n\n  const onMouseDown = (x, y) => {\n    dispatch(Actions.MouseSelection.action_onEditBeadsMouseDown(x, y));\n  };\n\n  const onMouseMove = (x, y) => {\n    dispatch(Actions.MouseSelection.action_onEditBeadsMouseMove(x, y));\n  };\n\n  const onMouseUp = () => {\n    dispatch(Actions.MouseSelection.action_onEditBeadsMouseUp());\n  };\n\n  return (\n    <MouseSelection\n      isVisible={isVisible}\n      onMouseDown={onMouseDown}\n      onMouseMove={onMouseMove}\n      onMouseUp={onMouseUp}\n    />\n  );\n};\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Actions } from \"../../store\";\nimport { MouseSelection } from \"../operations/MouseSelection\";\n\nexport const MouseSelectionLines = ({ isVisible }) => {\n  const dispatch = useDispatch();\n\n  const onMouseDown = (x, y) => {\n    dispatch(Actions.MouseSelection.action_onEditLinesMouseDown(x, y));\n  };\n\n  const onMouseMove = (x, y) => {\n    dispatch(Actions.MouseSelection.action_onEditLinesMouseMove(x, y));\n  };\n\n  const onMouseUp = () => {\n    dispatch(Actions.MouseSelection.action_onEditLinesMouseUp());\n  };\n\n  return (\n    <MouseSelection\n      isVisible={isVisible}\n      onMouseDown={onMouseDown}\n      onMouseMove={onMouseMove}\n      onMouseUp={onMouseUp}\n    />\n  );\n};\n","import React from \"react\";\nimport { Bead } from \"../../editorObjects/Editor\";\nimport { getTranslate3dCss } from \"../operations/MapValuesToCss\";\nimport { Actions } from \"../../store\";\nimport { useDispatch } from \"react-redux\";\n\nexport const DisplayBead = (props: {\n  bead: Bead;\n  opacity?: number;\n  zIndex?: number;\n  isSelected: boolean;\n}) => {\n  const { bead, opacity, zIndex, isSelected } = props;\n  const isOpacity = opacity !== undefined && opacity >= 0 && opacity <= 1;\n  const isZindex = zIndex !== undefined && zIndex >= 0 && zIndex <= 9999;\n\n  const dispatch = useDispatch();\n  const onClick = () => {\n    dispatch(Actions.Draggable.action_onClickBead(bead.id));\n  };\n\n  return (\n    <div\n      className=\"bead-item\"\n      onClick={onClick}\n      style={{\n        transform: getTranslate3dCss(bead.position.x, bead.position.y),\n        opacity: isOpacity ? opacity : 1,\n        zIndex: isZindex ? zIndex : undefined,\n        border: isSelected ? \"2px solid #000\" : \"\",\n      }}\n    >\n      &nbsp;\n    </div>\n  );\n};\n","import React from \"react\";\nimport { DisplayBead } from \"./DisplayBead\";\nimport { useSelector } from \"react-redux\";\nimport { Editor, EditorMode } from \"../../editorObjects/Editor\";\n\nexport const DisplayBeads = ({ mode }) => {\n  const fadeOut = mode === EditorMode.EditLines;\n  const onTop = mode === EditorMode.EditBeads;\n  const beads = useSelector((state: Editor) => {\n    return Object.values(state.appData.beads);\n  });\n  const selectedBeadsIds = useSelector((state: Editor) => {\n    return state.ui.selectedBeadsIds;\n  });\n\n  return (\n    <React.Fragment>\n      {beads.map(bead => {\n        return (\n          <DisplayBead\n            key={bead.id}\n            bead={bead}\n            opacity={fadeOut ? 0.5 : 1}\n            isSelected={selectedBeadsIds[bead.id] !== undefined}\n            zIndex={fadeOut ? 10 : onTop ? 20 : undefined}\n          />\n        );\n      })}\n    </React.Fragment>\n  );\n};\n","import React from \"react\";\nimport { getDistanceBetweenPoints, getRotate } from \"../../editorObjects/Point\";\nimport { getTranslate3dCss, getRotateCss } from \"../operations/MapValuesToCss\";\n\nexport const SelectionStraightLine = ({ start, end, onClick }) => {\n  const size = 0;\n  const height = 10;\n  const width = getDistanceBetweenPoints(start, end);\n  const rotate = getRotate(end.y - start.y, end.x - start.x);\n\n  return (\n    <div\n      style={{\n        height,\n        width,\n        backgroundColor: \"rgba(0,0,0,0.0)\",\n        transform: `${getTranslate3dCss(\n          start.x + size,\n          start.y + size\n        )} ${getRotateCss(rotate)}`,\n        transformOrigin: \"left center\",\n        cursor: \"pointer\",\n        zIndex: 20,\n      }}\n      onClick={onClick}\n      className=\"line\"\n    >\n      &nbsp;\n    </div>\n  );\n};\n","import React from \"react\";\nimport { getDistanceBetweenPoints, getRotate } from \"../../editorObjects/Point\";\nimport { getTranslate3dCss, getRotateCss } from \"../operations/MapValuesToCss\";\nimport { DraggableCore, DraggableData } from \"react-draggable\";\nimport { useDispatch } from \"react-redux\";\nimport { Actions } from \"../../store\";\n\nexport const SelectedStraightLine = ({ lineId, start, end }) => {\n  const size = 0;\n  const height = 10;\n  const width = getDistanceBetweenPoints(start, end);\n  const rotate = getRotate(end.y - start.y, end.x - start.x);\n\n  const dispatch = useDispatch();\n\n  const eventHandlerEndLine = (_, { deltaX, deltaY }: DraggableData) => {\n    dispatch(Actions.Draggable.action_onLineDrag(lineId, { deltaX, deltaY }));\n  };\n\n  return (\n    <DraggableCore\n      onStart={eventHandlerEndLine}\n      onDrag={eventHandlerEndLine}\n      onStop={eventHandlerEndLine}\n      disabled={false}\n      scale={1}\n    >\n      <div\n        style={{\n          height,\n          width,\n          backgroundColor: \"rgba(0,0,0,0.05)\",\n          border: \"1px dashed rgba(0,0,0,0.60)\",\n          transform: `${getTranslate3dCss(\n            start.x + size,\n            start.y + size\n          )} ${getRotateCss(rotate)}`,\n          transformOrigin: \"left center\",\n          cursor: \"move\",\n          zIndex: 21,\n        }}\n        className=\"line\"\n      >\n        &nbsp;\n      </div>\n    </DraggableCore>\n  );\n};\n","import React from \"react\";\nimport { Line } from \"../../editorObjects/Editor\";\nimport { StraightLine } from \"./StraightLine\";\nimport { DraggableData, DraggableCore } from \"react-draggable\";\nimport { SelectionStraightLine } from \"./SelectionStraightLine\";\nimport { SelectedStraightLine } from \"./SelectedStraightLine\";\nimport { getTranslate3dCss } from \"../operations/MapValuesToCss\";\nimport { useDispatch } from \"react-redux\";\nimport { Actions } from \"../../store\";\n\nexport const DisplayLine = (props: { line: Line; isSelected: boolean }) => {\n  const { isSelected, line } = props;\n  const dispatch = useDispatch();\n  const eventHandlerStartPoint = (_, { x, y }: DraggableData) => {\n    dispatch(Actions.Draggable.action_onStartPointDrag(line.id, { x, y }));\n  };\n  const eventHandlerEndPoint = (_, { x, y }: DraggableData) => {\n    dispatch(Actions.Draggable.action_onEndPointDrag(line.id, { x, y }));\n  };\n  const onClick = () => {\n    dispatch(Actions.Draggable.action_onClickLine(line.id));\n  };\n  const itemWidth = 10;\n  const itemHeight = 10;\n\n  return (\n    <div>\n      <DraggableCore\n        onStart={eventHandlerStartPoint}\n        onDrag={eventHandlerStartPoint}\n        onStop={eventHandlerStartPoint}\n        scale={1}\n        disabled={false}\n      >\n        <div\n          style={{\n            transform: getTranslate3dCss(line.start.x, line.start.y),\n            zIndex: isSelected === true ? 22 : 20,\n            width: itemWidth,\n            height: itemHeight,\n          }}\n          className={\"line-start\"}\n        >\n          &nbsp;\n        </div>\n      </DraggableCore>\n\n      <DraggableCore\n        onStart={eventHandlerEndPoint}\n        onDrag={eventHandlerEndPoint}\n        onStop={eventHandlerEndPoint}\n        disabled={false}\n        scale={1}\n      >\n        <div\n          style={{\n            transform: getTranslate3dCss(line.end.x, line.end.y),\n            zIndex: isSelected === true ? 22 : 20,\n            width: itemWidth,\n            height: itemHeight,\n          }}\n          className={\"line-end\"}\n        >\n          &nbsp;\n        </div>\n      </DraggableCore>\n\n      {isSelected === true ? (\n        <SelectedStraightLine\n          start={line.start}\n          end={line.end}\n          lineId={line.id}\n        />\n      ) : (\n        <SelectionStraightLine\n          start={line.start}\n          end={line.end}\n          onClick={onClick}\n        />\n      )}\n\n      <StraightLine start={line.start} end={line.end} />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { DisplayLine } from \"./DisplayLine\";\nimport HTML5Backend from \"react-dnd-html5-backend\";\n\nexport const DraggableLines = ({ lines, selectedLinesIds }) => {\n  return (\n    <DndProvider backend={HTML5Backend}>\n      {lines.map(line => {\n        return (\n          <DisplayLine\n            key={line.id}\n            line={line}\n            isSelected={selectedLinesIds[line.id] !== undefined}\n          />\n        );\n      })}\n    </DndProvider>\n  );\n};\n","import React from \"react\";\nimport { Line } from \"../../editorObjects/Editor\";\nimport { StraightLine } from \"./StraightLine\";\n\nexport const DisplaySimpleLine = (props: { line: Line }) => {\n  const { line } = props;\n  return (\n    <div>\n      <StraightLine start={line.start} end={line.end} />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { EditorMode, Editor } from \"../../editorObjects/Editor\";\nimport { DraggableLines } from \"./DraggableLines\";\nimport { DisplaySimpleLine } from \"./DisplaySimpleLine\";\nimport { useSelector } from \"react-redux\";\n\nexport const DisplayLines = ({ mode }) => {\n  const isEditable = mode === EditorMode.EditLines;\n  const lines = useSelector((state: Editor) => {\n    return Object.values(state.appData.lines);\n  });\n  const selectedLinesIds = useSelector((state: Editor) => {\n    return state.ui.selectedLinesIds;\n  });\n\n  if (isEditable) {\n    return <DraggableLines lines={lines} selectedLinesIds={selectedLinesIds} />;\n  }\n\n  return (\n    <React.Fragment>\n      {lines.map(line => {\n        return <DisplaySimpleLine key={line.id} line={line} />;\n      })}\n    </React.Fragment>\n  );\n};\n","import React from \"react\";\nimport { getTranslate3dCss } from \"./MapValuesToCss\";\nimport { DndProvider } from \"react-dnd\";\nimport HTML5Backend from \"react-dnd-html5-backend\";\nimport { DraggableCore } from \"react-draggable\";\n\nexport const DisplayGroupLines = ({ location, onDrag }) => {\n  const { x, y, w, h } = location;\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <DraggableCore\n        onStart={onDrag}\n        onDrag={onDrag}\n        onStop={onDrag}\n        scale={1}\n        disabled={false}\n      >\n        <div\n          style={{\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            width: w,\n            height: h,\n            transform: getTranslate3dCss(x, y),\n            opacity: 1,\n            zIndex: 22,\n            border: \"1px dashed rgba(0,0,0,0.2)\",\n            background: \"rgba(0,0,0,0.05)\",\n            cursor: \"move\",\n          }}\n        >\n          &nbsp;\n        </div>\n      </DraggableCore>\n    </DndProvider>\n  );\n};\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Editor } from \"../../editorObjects/Editor\";\nimport { Actions } from \"../../store\";\nimport { DraggableData } from \"react-draggable\";\nimport { DisplayGroupLines } from \"./DisplayGroupLines\";\n\nexport const DisplayLinesGroup = ({ selectedLinesIdsCount }) => {\n  const selectedLines = useSelector((state: Editor) => {\n    return Object.keys(state.ui.selectedLinesIds).map(lineId => {\n      return state.appData.lines[lineId];\n    });\n  });\n  let xMin: number = Number.MAX_SAFE_INTEGER;\n  let xMax: number = Number.MAX_SAFE_INTEGER * -1;\n  let yMin: number = Number.MAX_SAFE_INTEGER;\n  let yMax: number = Number.MAX_SAFE_INTEGER * -1;\n  selectedLines.forEach(line => {\n    const start = line.start;\n    const end = line.end;\n    xMin = Math.min(xMin, start.x, end.x);\n    xMax = Math.max(xMax, start.x, end.x);\n    yMin = Math.min(yMin, start.y, end.y);\n    yMax = Math.max(yMax, start.y, end.y);\n  });\n  const location = {\n    x: xMin,\n    y: yMin,\n    w: xMax - xMin + 10,\n    h: yMax - yMin + 10,\n  };\n  const dispatch = useDispatch();\n  const eventDragHandler = (_, { deltaX, deltaY }: DraggableData) => {\n    dispatch(Actions.Draggable.action_onGroupLineDrag({ deltaX, deltaY }));\n  };\n  return <DisplayGroupLines location={location} onDrag={eventDragHandler} />;\n};\n\nexport const MemoizedDisplayLinesGroup = React.memo(DisplayLinesGroup);\n","import React from \"react\";\nimport { getTranslate3dCss } from \"./MapValuesToCss\";\n\nexport const DisplayGroupBeads = ({ location }) => {\n  const { x, y, w, h } = location;\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: w,\n        height: h,\n        transform: getTranslate3dCss(x, y),\n        opacity: 1,\n        zIndex: 22,\n        border: \"1px dashed rgba(0,0,0,0.2)\",\n        background: \"rgba(0,0,0,0.05)\",\n      }}\n    >\n      &nbsp;\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Editor } from \"../../editorObjects/Editor\";\nimport { DisplayGroupBeads } from \"./DisplayGroupBeads\";\n\nconst DisplayBeadsGroup = ({ selectedBeadsIdsCount }) => {\n  const selectedBead = useSelector((state: Editor) => {\n    return Object.keys(state.ui.selectedBeadsIds).map(beadId => {\n      return state.appData.beads[beadId];\n    });\n  });\n  let xMin: number = Number.MAX_SAFE_INTEGER;\n  let xMax: number = Number.MAX_SAFE_INTEGER * -1;\n  let yMin: number = Number.MAX_SAFE_INTEGER;\n  let yMax: number = Number.MAX_SAFE_INTEGER * -1;\n  selectedBead.forEach(bead => {\n    const startX = bead.position.x;\n    const endX = bead.position.x + 10;\n    const startY = bead.position.y;\n    const endY = bead.position.y + 10;\n    xMin = Math.min(xMin, startX, endX);\n    xMax = Math.max(xMax, startX, endX);\n    yMin = Math.min(yMin, startY, endY);\n    yMax = Math.max(yMax, startY, endY);\n  });\n  const location = {\n    x: xMin,\n    y: yMin,\n    w: xMax - xMin + 10,\n    h: yMax - yMin + 10,\n  };\n  return <DisplayGroupBeads location={location} />;\n};\n\nexport const MemoizedDisplayBeadsGroup = React.memo(DisplayBeadsGroup);\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Editor, EditorMode } from \"../../editorObjects/Editor\";\nimport { MemoizedDisplayLinesGroup } from \"./DisplayLinesGroup\";\nimport { MemoizedDisplayBeadsGroup } from \"./DisplayBeadsGroup\";\n\nexport const GroupSelectionPlaceholder = ({ mode }) => {\n  const selectedBeadsIdsCount = useSelector((state: Editor) => {\n    return state.ui.selectedBeadsIdsCount;\n  });\n  \n  const selectedLinesIdsCount = useSelector((state: Editor) => {\n    return state.ui.selectedLinesIdsCount;\n  });\n  \n  if (mode === EditorMode.EditBeads && selectedBeadsIdsCount >= 2) {\n    return (\n      <MemoizedDisplayBeadsGroup\n        selectedBeadsIdsCount={selectedBeadsIdsCount}\n      />\n    );\n  }\n\n  if (mode === EditorMode.EditLines && selectedLinesIdsCount >= 2) {\n    return (\n      <MemoizedDisplayLinesGroup\n        selectedLinesIdsCount={selectedLinesIdsCount}\n      />\n    );\n  }\n  return <React.Fragment />;\n};\n","import React from \"react\";\nimport { Editor, EditorMode } from \"../editorObjects/Editor\";\nimport { EditorModes } from \"./Toolbar/EditorModes\";\nimport { AddLineMode } from \"./Line/AddLineMode\";\nimport { EditorChangeState } from \"./Toolbar/EditorChangeState\";\nimport { InputWidth } from \"./Toolbar/InputWidth\";\nimport { useSelector } from \"react-redux\";\nimport { MouseSelectionBeads } from \"./Bead/MouseSelectionBeads\";\nimport { MouseSelectionLines } from \"./Line/MouseSelectionLines\";\nimport { DisplayBeads } from \"./Bead/DisplayBeads\";\nimport { DisplayLines } from \"./Line/DisplayLines\";\nimport { GroupSelectionPlaceholder } from \"./operations/GroupSelectionPlaceholder\";\n\nexport const EditorScene = () => {\n  const editorMode = useSelector((state: Editor) => {\n    return state.mode;\n  });\n\n  return (\n    <div className=\"scene\">\n      <div className=\"topbar-wrapper\">\n        <EditorChangeState />\n      </div>\n\n      <div className=\"actions-wrapper\">\n        <EditorModes editorMode={editorMode} />\n      </div>\n\n      <div className={\"scene-wrapper\"}>\n        <AddLineMode isActive={editorMode === EditorMode.AddLine} />\n\n        <MouseSelectionLines isVisible={editorMode === EditorMode.EditLines} />\n\n        <MouseSelectionBeads isVisible={editorMode === EditorMode.EditBeads} />\n\n        <DisplayBeads mode={editorMode} />\n\n        <DisplayLines mode={editorMode} />\n\n        <GroupSelectionPlaceholder mode={editorMode} />\n      </div>\n\n      <div className={\"toolbar-wrapper\"}>\n        <InputWidth value={10} onChange={() => {}} />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport \"bulma/css/bulma.css\";\nimport \"./App.css\";\nimport { EditorScene } from \"./components/Editor\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./store\";\n\nconst App: React.FC = () => {\n  const rootStore = createStore(\n    store,\n    // \"__REDUX_DEVTOOLS_EXTENSION__\" in window &&\n    //   (window as any).__REDUX_DEVTOOLS_EXTENSION__()\n  );\n  return (\n    <div className=\"App\">\n      <Provider store={rootStore}>\n        <EditorScene />\n      </Provider>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}