(this.webpackJsonpcoralinio=this.webpackJsonpcoralinio||[]).push([[0],{102:function(e,t,a){e.exports=a(180)},107:function(e,t,a){},109:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n,i,r,s,c,o=a(0),l=a.n(o),d=a(13),u=a.n(d),f=(a(107),a(108),a(109),a(35));!function(e){e.BasicRectangle="BasicRectangle",e.BasicEllipse="BasicEllipse"}(n||(n={})),function(e){e.Idle="Idle",e.EditLines="EditLines",e.AddLine="AddLine",e.EditBeads="EditBeads",e.Paint="ColorPaint"}(i||(i={})),function(e){e.None="None",e.File="File",e.Settings="Settings"}(r||(r={})),function(e){e.Hex="Hex",e.Box="Box"}(s||(s={})),function(e){e.Color="Color"}(c||(c={}));var p=a(8),h=a(7),g="#aeaeae",b=a(2),m=a(14),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(m.a)({x:e,y:t},f.a,!0)},S=function(e){var t=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)}(e),a=0===t,n=a?0:e.x/t,i=a?0:e.y/t;return v(n,i)},E=function(e,t){return v(e.x*t,e.y*t)},y=function(e,t,a){return v(e.x+t,e.y+a)},x=function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},O=function(e,t){return Math.atan2(e,t)},j=function(e,t,a){return a.x>e.x&&a.x<t.x&&a.y>e.y&&a.y<t.y},C=a(10),B=a(16),D=a(17),k=a(19),_=a(18),w=a(20),I=a(58),L=a(38),M=function(e){var t=Object(m.a)({id:Object(I.generate)(),position:v(0,0),type:n.BasicEllipse,rotate:0,lineRotate:0,color:"#4fc3f7",height:10,width:10,keepAspectRatio:!1},f.a,!0);return Object(L.merge)(t,e)},A=function(e){var t=Object(m.a)({id:Object(I.generate)(),start:v(10,10),end:v(100,100),beadIds:[],settings:{beadsCount:0,beadsAutoCount:!0,beadsSpacing:0,beadsAutoSpacing:!1,defaultBead:M({})}},f.a,!0);return Object(L.merge)(t,e)},F=function(e,t,a,n,i){var r=v(a-e,n-t);return r=S(r),r=E(r,i),r=y(r,e,t)};function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=function(e){function t(){return Object(B.a)(this,t),Object(k.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(D.a)(t,[{key:"updateBeadsPositions",value:function(e){var t=this.draftState.appData.lines[e],a=this.getLineBeadsCount(e),n=t.beadIds.length;if(a>n){var i=a-n;this.addRemainingBeads(e,i)}else if(a<n){var r=n-a;this.removeOverflowBeads(e,r)}this.draftState.appData.lines[e].settings.beadsCount=a,this.modifyBeadsPosition(e),this.modifyBeadsRotate(e)}},{key:"getLineBeadsCount",value:function(e){var t=this,a=this.draftState.appData.lines[e],n=a.settings,i=n.beadsAutoCount,r=n.beadsAutoSpacing,s=n.beadsCount,c=n.beadsSpacing,o=n.defaultBead,l=a.start,d=a.end,u=a.beadIds,f=x(l,d);if(!0===i&&!0===r){var p=[],h=0;if(u.forEach((function(e){var a=t.draftState.appData.beads[e].width;h+=a,p.push(a)})),f>=h){var g=o.width?o.width:10,b=f-h;return Math.floor(b/g)+p.length}for(var m=p.length-1;m>=0;m--){if(f>(h-=p[m]))return m}return 0}if(!1===i&&!1===r)return s;if(!0===i&&!1===r){var v=[],S=0;if(u.forEach((function(e){var a=t.draftState.appData.beads[e].width+c;S+=a,v.push(a)})),f>=S-c){var E=o.width?o.width:10,y=f-(S-c);return Math.floor(y/(E+c))+v.length}for(var O=v.length-1;O>=0;O--){if(f>(S-=v[O])-c)return O}return 0}return!1===i&&!0===r?s:0}},{key:"addRemainingBeads",value:function(e,t){for(var a=this.draftState.appData.lines[e],n=0;n<t;n++){var i={};a.settings.defaultBead?i=R({},a.settings.defaultBead):this.draftState.ui.lineSettings.settings&&this.draftState.ui.lineSettings.settings.defaultBead&&(i=R({},this.draftState.ui.lineSettings.settings.defaultBead)),i.id=void 0,i.position=void 0;var r=M(i);this.draftState.appData.beads[r.id]=r,this.draftState.appData.lines[e].beadIds.push(r.id)}}},{key:"removeOverflowBeads",value:function(e,t){for(var a=0;a<t;a++){var n=this.draftState.appData.lines[e].beadIds.length,i=this.draftState.appData.lines[e].beadIds.splice(n-1,1);delete this.draftState.appData.beads[i[0]]}}},{key:"modifyBeadsPosition",value:function(e){var t=this,a=this.draftState.appData.lines[e],n=a.start,i=a.end,r=a.beadIds,s=a.settings,c=s.beadsAutoCount,o=s.beadsAutoSpacing,l=(s.beadsCount,s.beadsSpacing);s.defaultBead;if(!0===c&&!0===o){var d=0;this.draftState.appData.lines[e].beadIds.forEach((function(e){var a=t.draftState.appData.beads[e],r=a.width,s=a.height;d+=r/2;var c=F(n.x,n.y,i.x,i.y,d),o=c.x-r/2,l=c.y-s/2+5;t.draftState.appData.beads[e].position.x=o,t.draftState.appData.beads[e].position.y=l,d+=r/2}))}else if(!1===c&&!1===o){var u=0;this.draftState.appData.lines[e].beadIds.forEach((function(e){var a=t.draftState.appData.beads[e],r=a.width,s=a.height;u+=r/2;var c=F(n.x,n.y,i.x,i.y,u),o=c.x-r/2,d=c.y-s/2+5;t.draftState.appData.beads[e].position.x=o,t.draftState.appData.beads[e].position.y=d,u=u+r/2+l}))}else if(!0===c&&!1===o){var f=0;this.draftState.appData.lines[e].beadIds.forEach((function(e){var a=t.draftState.appData.beads[e],r=a.width,s=a.height;f+=r/2;var c=F(n.x,n.y,i.x,i.y,f),o=c.x-r/2,d=c.y-s/2+5;t.draftState.appData.beads[e].position.x=o,t.draftState.appData.beads[e].position.y=d,f=f+r/2+l}))}else if(!1===c&&!0===o){var p=0;r.forEach((function(e){var a=t.draftState.appData.beads[e].width;p+=a}));var h=x(n,i)-p,g=0;r.length>1&&(g=h/(r.length-1));var b=0;this.draftState.appData.lines[e].beadIds.forEach((function(e){var a=t.draftState.appData.beads[e],r=a.width,s=a.height;b+=r/2;var c=F(n.x,n.y,i.x,i.y,b),o=c.x-r/2,l=c.y-s/2+5;t.draftState.appData.beads[e].position.x=o,t.draftState.appData.beads[e].position.y=l,b=b+r/2+g}))}}},{key:"modifyBeadsRotate",value:function(e){var t=this,a=this.draftState.appData.lines[e],n=a.start,i=a.end,r=a.beadIds,s=O(n.x-i.x,n.y-i.y);r.forEach((function(e){t.draftState.appData.beads[e].lineRotate=-1*(180*s/Math.PI)}))}}]),t}(C.ImmerReducer);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var z=function(e){function t(){return Object(B.a)(this,t),Object(k.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(D.a)(t,[{key:"editorAppDataHasChanged",value:function(){this.draftState.ui.saveInfo.saved=!1,this.draftState.ui.saveInfo.haveUnsavedChanges=!0}},{key:"action_onAddLine",value:function(e,t){var a=A(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.draftState.ui.lineSettings,{start:e,end:t}));this.draftState.appData.lines[a.id]=a,this.draftState.mode=i.EditLines,this.updateBeadsPositions(a.id),this.editorAppDataHasChanged()}},{key:"action_onStartPointDrag",value:function(e,t){if(this.draftState.appData.lines[e]){var a=this.draftState.appData.lines[e],n=this.draftState.ui.grid,i=n.width,r=n.height,c=n.snapEnabled,o=n.type,l=n.hexSize;if(!0===c){if(o===s.Box)a.start.x=Math.round(t.x/i)*i-5,a.start.y=Math.round(t.y/r)*r-5;else if(o===s.Hex){var d=Math.sqrt(3)*l,u=2*l,f=.75*u,p=Math.round(t.x/d)*d-5,h=Math.round(t.y/f),g=h*f-5-u/4;a.start.y=g,a.start.x=h%2===0?d/2+p:p}}else a.start.x=t.x-5,a.start.y=t.y-5;this.updateBeadsPositions(a.id),this.editorAppDataHasChanged()}}},{key:"action_onEndPointDrag",value:function(e,t){if(this.draftState.appData.lines[e]){var a=this.draftState.appData.lines[e],n=this.draftState.ui.grid,i=n.width,r=n.height,c=n.snapEnabled,o=n.hexSize,l=n.type;if(!0===c){if(l===s.Box)a.end.x=Math.round(t.x/i)*i-5,a.end.y=Math.round(t.y/r)*r-5;else if(l===s.Hex){var d=Math.sqrt(3)*o,u=2*o,f=.75*u,p=Math.round(t.x/d)*d-5,h=Math.round(t.y/f),g=h*f-5-u/4;a.end.y=g,a.end.x=h%2===0?d/2+p:p}}else a.end.x=t.x-5,a.end.y=t.y-5;this.updateBeadsPositions(a.id),this.editorAppDataHasChanged()}}},{key:"action_onLineDrag",value:function(e,t){var a=t.startX,n=t.startY,i=t.lineStart,r=t.lineEnd,c=t.x,o=t.y;if(this.draftState.appData.lines[e]){var l=this.draftState.appData.lines[e],d=this.draftState.ui.grid,u=d.width,f=d.height,p=d.snapEnabled,h=d.type,g=d.hexSize;if(!0===p){if(h===s.Box)l.start.x=Math.round((l.start.x+t.deltaX)/u)*u-5,l.start.y=Math.round((l.start.y+t.deltaY)/f)*f-5,l.end.x=Math.round((l.end.x+t.deltaX)/u)*u-5,l.end.y=Math.round((l.end.y+t.deltaY)/f)*f-5;else if(h===s.Hex){var b=Math.sqrt(3)*g,m=2*g,v=.75*m;if(null!==i){var S=i.x+(c-a),E=i.y+(o-n),y=Math.round(S/b)*b-5,x=Math.round(E/v),O=x*v-5-m/4;l.start.y=O,l.start.x=x%2===0?b/2+y:y}if(null!==r){var j=r.x+(c-a),C=r.y+(o-n),B=Math.round(j/b)*b-5,D=Math.round(C/v),k=D*v-5-m/4;l.end.y=k,l.end.x=D%2===0?b/2+B:B}}}else l.start.x=l.start.x+t.deltaX,l.start.y=l.start.y+t.deltaY,l.end.x=l.end.x+t.deltaX,l.end.y=l.end.y+t.deltaY;this.updateBeadsPositions(l.id),this.editorAppDataHasChanged()}}},{key:"action_onGroupLineDrag",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){if(t.draftState.appData.lines[a]){var n=t.draftState.appData.lines[a],i=t.draftState.ui.grid,r=i.width,s=i.height;!0===i.snapEnabled?(n.start.x=Math.round((n.start.x+e.deltaX)/r)*r-5,n.start.y=Math.round((n.start.y+e.deltaY)/s)*s-5,n.end.x=Math.round((n.end.x+e.deltaX)/r)*r-5,n.end.y=Math.round((n.end.y+e.deltaY)/s)*s-5):(n.start.x=n.start.x+e.deltaX,n.start.y=n.start.y+e.deltaY,n.end.x=n.end.x+e.deltaX,n.end.y=n.end.y+e.deltaY),t.updateBeadsPositions(n.id)}})),this.editorAppDataHasChanged()}},{key:"action_onGroupBeadsDrag",value:function(e){}},{key:"action_onClickLine",value:function(e){this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIds[e]=!0,this.draftState.ui.selectedLinesIdsCount=1}},{key:"action_onClickLastestLine",value:function(){var e=Object.keys(this.draftState.appData.lines);if(e.length>0){var t=e[e.length-1];this.action_onClickLine(t)}}},{key:"action_onClickBead",value:function(e){this.draftState.ui.selectedBeadsIds={},this.draftState.ui.selectedBeadsIds[e]=!0,this.draftState.ui.selectedBeadsIdsCount=1}}]),t}(P),H=function(e){function t(){return Object(B.a)(this,t),Object(k.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(D.a)(t,[{key:"action_onClearCanvas",value:function(){this.draftState.appData.beads={},this.draftState.appData.lines={},this.draftState.ui.selectedBeadsIds={},this.draftState.ui.selectedBeadsIdsCount=0,this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIdsCount=0,this.draftState.ui.saveInfo.saved=!1,this.draftState.ui.saveInfo.haveUnsavedChanges=!1}},{key:"action_readSavedCanvas",value:function(){var e=this;if(console.log("action_readSavedCanvas"),"localStorage"in window){this.draftState.ui.saveInfo.saved=!0,this.draftState.ui.saveInfo.haveUnsavedChanges=!1;var t=localStorage.getItem("appData");if(null!==t)try{var a=JSON.parse(t);this.draftState.appData={beads:{},lines:{}},Object.keys(a.beads).forEach((function(t){var n=a.beads[t],i=M(n);e.draftState.appData.beads[t]=i})),Object.keys(a.lines).forEach((function(t){var n=a.lines[t],i=A(n);e.draftState.appData.lines[t]=i})),Object.keys(this.draftState.appData.lines).forEach((function(t){e.updateBeadsPositions(t)})),console.log("action_readSavedCanvas loaded")}catch(n){console.error("action_readSavedCanvas error: ",n)}else console.info("No data in localstorage")}else console.info("No localstorage available")}},{key:"action_onSaveCanvas",value:function(){"localStorage"in window?(localStorage.setItem("appData",JSON.stringify(this.draftState.appData)),this.draftState.ui.saveInfo.saved=!0,this.draftState.ui.saveInfo.haveUnsavedChanges=!1,console.log("action_onSaveCanvas saved")):(this.draftState.ui.saveInfo.saved=!1,console.info("No localstorage available"))}}]),t}(P),V=function(e){function t(){var e,a;Object(B.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(k.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).clearSelectedBeads=function(){a.draftState.ui.selectedBeadsIdsCount>0&&(a.draftState.ui.selectedBeadsIds={},a.draftState.ui.selectedBeadsIdsCount=0)},a.clearSelectedLines=function(){a.draftState.ui.selectedLinesIdsCount&&(a.draftState.ui.selectedLinesIds={},a.draftState.ui.selectedLinesIdsCount=0)},a}return Object(w.a)(t,e),Object(D.a)(t,[{key:"action_onChangeEditorMode",value:function(e){this.draftState.mode=e,this.clearSelectedBeads(),this.clearSelectedLines()}},{key:"action_setSaveInfo",value:function(e){this.draftState.ui.saveInfo.saved=e}}]),t}(C.ImmerReducer),X=function(e){function t(){return Object(B.a)(this,t),Object(k.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(D.a)(t,[{key:"action_test",value:function(){}},{key:"action_restoreState",value:function(){}}]),t}(C.ImmerReducer),W=function(e){function t(){return Object(B.a)(this,t),Object(k.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(D.a)(t,[{key:"action_onEditBeadsMouseDown",value:function(e,t){this.draftState.ui.mouseSelection.isDragStarted=!0,this.draftState.ui.mouseSelection.start.x=e,this.draftState.ui.mouseSelection.start.y=t,this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t}},{key:"action_onEditBeadsMouseMove",value:function(e,t){var a=this;if(this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t,!1===this.draftState.ui.mouseSelection.isDragged){var n=this.draftState.ui.mouseSelection,i=n.start,r=n.end,s=r.x-i.x,c=r.y-i.y;(Math.abs(s)>5||Math.abs(c)>5)&&(this.draftState.ui.mouseSelection.isDragged=!0)}if(!0===this.draftState.ui.mouseSelection.isDragged){var o=this.draftState.ui.mouseSelection,l=o.start,d=o.end,u=v(Math.min(l.x,d.x),Math.min(l.y,d.y)),f=v(Math.max(l.x,d.x),Math.max(l.y,d.y));this.draftState.ui.selectedBeadsIds={},this.draftState.ui.selectedBeadsIdsCount=0,Object.keys(this.draftState.appData.beads).forEach((function(e){var t=a.draftState.appData.beads[e],n=v(t.position.x+10,t.position.y+10);j(u,f,n)&&(a.draftState.ui.selectedBeadsIds[e]=!0,a.draftState.ui.selectedBeadsIdsCount=a.draftState.ui.selectedBeadsIdsCount+1)}))}}},{key:"action_onEditBeadsMouseUp",value:function(){!1===this.draftState.ui.mouseSelection.isDragged&&this.draftState.ui.selectedBeadsIdsCount>0&&(this.draftState.ui.selectedBeadsIds={},this.draftState.ui.selectedBeadsIdsCount=0),this.draftState.ui.mouseSelection.isDragStarted=!1,this.draftState.ui.mouseSelection.isDragged=!1,this.draftState.ui.mouseSelection.start.x=0,this.draftState.ui.mouseSelection.start.y=0,this.draftState.ui.mouseSelection.end.x=0,this.draftState.ui.mouseSelection.end.y=0}},{key:"action_onEditLinesMouseDown",value:function(e,t){this.draftState.ui.mouseSelection.isDragStarted=!0,this.draftState.ui.mouseSelection.start.x=e,this.draftState.ui.mouseSelection.start.y=t,this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t}},{key:"action_onEditLinesMouseMove",value:function(e,t){var a=this;if(this.draftState.ui.mouseSelection.end.x=e,this.draftState.ui.mouseSelection.end.y=t,!1===this.draftState.ui.mouseSelection.isDragged){var n=this.draftState.ui.mouseSelection,i=n.start,r=n.end,s=r.x-i.x,c=r.y-i.y;(Math.abs(s)>5||Math.abs(c)>5)&&(this.draftState.ui.mouseSelection.isDragged=!0)}if(!0===this.draftState.ui.mouseSelection.isDragged){var o=this.draftState.ui.mouseSelection,l=o.start,d=o.end,u=v(Math.min(l.x,d.x),Math.min(l.y,d.y)),f=v(Math.max(l.x,d.x),Math.max(l.y,d.y));this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIdsCount=0,Object.keys(this.draftState.appData.lines).forEach((function(e){var t=a.draftState.appData.lines[e];(j(u,f,t.start)||j(u,f,t.end))&&(a.draftState.ui.selectedLinesIds[e]=!0,a.draftState.ui.selectedLinesIdsCount=a.draftState.ui.selectedLinesIdsCount+1)}))}}},{key:"action_onEditLinesMouseUp",value:function(){!1===this.draftState.ui.mouseSelection.isDragged&&this.draftState.ui.selectedLinesIdsCount>0&&(this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIdsCount=0),this.draftState.ui.mouseSelection.isDragStarted=!1,this.draftState.ui.mouseSelection.isDragged=!1,this.draftState.ui.mouseSelection.start.x=0,this.draftState.ui.mouseSelection.start.y=0,this.draftState.ui.mouseSelection.end.x=0,this.draftState.ui.mouseSelection.end.y=0}}]),t}(C.ImmerReducer);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var U=function(e){function t(){return Object(B.a)(this,t),Object(k.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(D.a)(t,[{key:"editorAppDataHasChanged",value:function(){this.draftState.ui.saveInfo.saved=!1,this.draftState.ui.saveInfo.haveUnsavedChanges=!0}},{key:"action_changeBeadFill",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){t.draftState.appData.beads[a].color=e})),this.editorAppDataHasChanged()}},{key:"action_changeBeadType",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){t.draftState.appData.beads[a].type=e})),this.editorAppDataHasChanged()}},{key:"action_onBeadRotate",value:function(e,t){t.deg}},{key:"action_onBeadsRotate",value:function(e){e.deg}},{key:"action_changeSelectedLinesBeadsSpacing",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.beadsSpacing=e,t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLinesBeadsAutoSpacing",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.beadsAutoSpacing=e,t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLinesBeadsCount",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.beadsCount=e,t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLinesBeadsAutoCount",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.beadsAutoCount=e,t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_resetSelectedLines",value:function(){var e=this,t=Object.keys(this.draftState.ui.selectedLinesIds)[0],a=Y({},this.draftState.appData.lines[t].settings.defaultBead);a.id=void 0,a.position=void 0,Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(t){e.draftState.appData.lines[t].beadIds.forEach((function(t){a&&(e.draftState.appData.beads[t]=Object(L.merge)(e.draftState.appData.beads[t],a))})),e.draftState.appData.lines[t].settings.defaultBead=Object(L.merge)(e.draftState.appData.lines[t].settings.defaultBead,a),e.updateBeadsPositions(t)})),this.editorAppDataHasChanged()}},{key:"action_deleteSelectedLines",value:function(){var e=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(t){e.draftState.appData.lines[t].beadIds.forEach((function(t){delete e.draftState.appData.beads[t]})),delete e.draftState.appData.lines[t]})),this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIdsCount=0,this.editorAppDataHasChanged()}},{key:"action_cloneSelectedLines",value:function(){var e=this,t=[];Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){var n=A(Y({},e.draftState.appData.lines[a],{id:void 0,beadIds:[]}));n.start.x=n.start.x+20,n.start.y=n.start.y+20,n.end.x=n.end.x+20,n.end.y=n.end.y+20,e.draftState.appData.lines[a].beadIds.forEach((function(t){var a=M(Y({},e.draftState.appData.beads[t],{id:void 0}));a.position.x=a.position.x+20,a.position.y=a.position.y+20,e.draftState.appData.beads[a.id]=a,n.beadIds.push(a.id)})),t.push(n.id),e.draftState.appData.lines[n.id]=n})),t.forEach((function(t){e.updateBeadsPositions(t)})),this.draftState.ui.selectedLinesIds={},this.draftState.ui.selectedLinesIdsCount=0,t.forEach((function(t){e.draftState.ui.selectedLinesIds[t]=!0,e.draftState.ui.selectedLinesIdsCount=e.draftState.ui.selectedLinesIdsCount+1})),this.editorAppDataHasChanged()}},{key:"action_changeDefaultLineBeadsCount",value:function(e){this.draftState.ui.lineSettings.settings&&(this.draftState.ui.lineSettings.settings.beadsCount=e)}},{key:"action_changeDefaultLineBeadsAutoCount",value:function(e){this.draftState.ui.lineSettings.settings&&(this.draftState.ui.lineSettings.settings.beadsAutoCount=e)}},{key:"action_changeDefaultLineBeadsSpacing",value:function(e){this.draftState.ui.lineSettings.settings&&(this.draftState.ui.lineSettings.settings.beadsSpacing=e)}},{key:"action_changeDefaultLineBeadsAutoSpacing",value:function(e){this.draftState.ui.lineSettings.settings&&(this.draftState.ui.lineSettings.settings.beadsAutoSpacing=e)}},{key:"action_changeDefaultLineBeadType",value:function(e){this.draftState.ui.lineSettings.settings&&this.draftState.ui.lineSettings.settings.defaultBead&&(this.draftState.ui.lineSettings.settings.defaultBead.type=e)}},{key:"action_changeDefaultLineColor",value:function(e){this.draftState.ui.lineSettings.settings&&this.draftState.ui.lineSettings.settings.defaultBead&&(this.draftState.ui.lineSettings.settings.defaultBead.color=e)}},{key:"action_changeDefaultLineBeadHeight",value:function(e){var t=this.draftState.ui.lineSettings;if(t.settings&&t.settings.defaultBead){var a=t.settings.defaultBead,n=a.width,i=a.height;if(a.keepAspectRatio&&n&&i)if(i>=1){var r=n/i;t.settings.defaultBead.width=e*r,t.settings.defaultBead.height=e}else t.settings.defaultBead.height=1;else t.settings.defaultBead.height=e}}},{key:"action_changeDefaultLineBeadWidth",value:function(e){var t=this.draftState.ui.lineSettings;if(t.settings&&t.settings.defaultBead){var a=t.settings.defaultBead,n=a.width,i=a.height;if(a.keepAspectRatio&&n&&i)if(n>=1){var r=i/n;t.settings.defaultBead.width=e,t.settings.defaultBead.height=e*r}else t.settings.defaultBead.width=1;else t.settings.defaultBead.width=e}}},{key:"action_changeDefaultLineBeadKeepAspectRatio",value:function(e){var t=this.draftState.ui.lineSettings;t.settings&&t.settings.defaultBead&&(t.settings.defaultBead.keepAspectRatio=e)}},{key:"action_changeDefaultLineBeadRotate",value:function(e){var t=this.draftState.ui.lineSettings;t.settings&&t.settings.defaultBead&&(t.settings.defaultBead.rotate=e)}},{key:"action_changeSelectedLines_settings_beadsCount",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.beadsCount=e,t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_settings_beadsAutoCount",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.beadsAutoCount=e,t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_settings_beadsSpacing",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.beadsSpacing=e,t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_settings_beadsAutoSpacing",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.beadsAutoSpacing=e,t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_defaultBead_type",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.defaultBead.type=e,t.draftState.appData.lines[a].beadIds.forEach((function(a){t.draftState.appData.beads[a].type=e})),t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_defaultBead_color",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.defaultBead.color=e,t.draftState.appData.lines[a].beadIds.forEach((function(a){t.draftState.appData.beads[a].color=e})),t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_defaultBead_height",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){var n=t.draftState.appData.lines[a],i=n.settings.defaultBead,r=i.width,s=i.height;if(!1===i.keepAspectRatio)n.settings.defaultBead.height=e,t.draftState.appData.lines[a].beadIds.forEach((function(a){t.draftState.appData.beads[a].height=e})),t.updateBeadsPositions(a);else{if(r&&s){if(e>=1)r=e*(r/s),s=e;n.settings.defaultBead.width=r,n.settings.defaultBead.height=s}t.draftState.appData.lines[a].beadIds.forEach((function(e){r&&s&&(t.draftState.appData.beads[e].width=r,t.draftState.appData.beads[e].height=s)})),t.updateBeadsPositions(a)}})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_defaultBead_width",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){var n=t.draftState.appData.lines[a],i=n.settings.defaultBead,r=i.width,s=i.height;if(!1===i.keepAspectRatio)n.settings.defaultBead.width=e,t.draftState.appData.lines[a].beadIds.forEach((function(a){t.draftState.appData.beads[a].width=e})),t.updateBeadsPositions(a);else{if(r&&s){if(e>=1){var c=s/r;r=e,s=e*c}n.settings.defaultBead.width=r,n.settings.defaultBead.height=s}t.draftState.appData.lines[a].beadIds.forEach((function(e){r&&s&&(t.draftState.appData.beads[e].width=r,t.draftState.appData.beads[e].height=s)})),t.updateBeadsPositions(a)}})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_defaultBead_keepAspectRatio",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.defaultBead.keepAspectRatio=e,t.draftState.appData.lines[a].beadIds.forEach((function(a){t.draftState.appData.beads[a].keepAspectRatio=e})),t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedLines_defaultBead_rotate",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedLinesIds).forEach((function(a){t.draftState.appData.lines[a].settings.defaultBead.rotate=e,t.draftState.appData.lines[a].beadIds.forEach((function(a){t.draftState.appData.beads[a].rotate=e})),t.updateBeadsPositions(a)})),this.editorAppDataHasChanged()}},{key:"action_changeSelectedBeads_type",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){t.draftState.appData.beads[a].type=e})),this.updateLineFromSelectedBeads()}},{key:"action_changeSelectedBeads_color",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){t.draftState.appData.beads[a].color=e})),this.updateLineFromSelectedBeads()}},{key:"action_changeSelectedBeads_height",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){var n=t.draftState.appData.beads[a],i=n.width,r=n.height;if(!1===n.keepAspectRatio)t.draftState.appData.beads[a].height=e;else{if(i&&r)if(e>=1)i=e*(i/r),r=e;t.draftState.appData.beads[a].width=i,t.draftState.appData.beads[a].height=r}})),this.updateLineFromSelectedBeads()}},{key:"action_changeSelectedBeads_width",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){var n=t.draftState.appData.beads[a],i=n.width,r=n.height;if(!1===n.keepAspectRatio)t.draftState.appData.beads[a].width=e;else{if(i&&r&&e>=1){var s=r/i;i=e,r=e*s}t.draftState.appData.beads[a].width=i,t.draftState.appData.beads[a].height=r}})),this.updateLineFromSelectedBeads()}},{key:"action_changeSelectedBeads_keepAspectRatio",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){t.draftState.appData.beads[a].keepAspectRatio=e})),this.updateLineFromSelectedBeads()}},{key:"action_changeSelectedBeads_rotate",value:function(e){var t=this;Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){t.draftState.appData.beads[a].rotate=e})),this.updateLineFromSelectedBeads()}},{key:"updateLineFromSelectedBeads",value:function(){var e=this,t=[];Object.keys(this.draftState.ui.selectedBeadsIds).forEach((function(a){for(var n=0,i=Object.keys(e.draftState.appData.lines);n<i.length;n++){var r=i[n];if(-1!==e.draftState.appData.lines[r].beadIds.indexOf(a)&&-1===t.indexOf(r)){t.push(r);break}}}));for(var a=0,n=t;a<n.length;a++){var i=n[a];this.updateBeadsPositions(i)}}},{key:"action_updateBrushSize",value:function(e){this.draftState.ui.brush.size=e}},{key:"action_updateBrushColor",value:function(e){this.draftState.ui.brush.color=e}}]),t}(P),q=function(e){function t(){return Object(B.a)(this,t),Object(k.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(D.a)(t,[{key:"action_toggleMenuFile",value:function(){this.draftState.ui.currentMenuMainOpen===r.File?this.draftState.ui.currentMenuMainOpen=r.None:this.draftState.ui.currentMenuMainOpen=r.File}},{key:"action_toggleMenuSettings",value:function(){this.draftState.ui.currentMenuMainOpen===r.Settings?this.draftState.ui.currentMenuMainOpen=r.None:this.draftState.ui.currentMenuMainOpen=r.Settings}},{key:"action_toggleGridSnapEnabled",value:function(){this.draftState.ui.grid.snapEnabled=!this.draftState.ui.grid.snapEnabled}},{key:"action_toggleGridIsVisible",value:function(){this.draftState.ui.grid.isVisible=!this.draftState.ui.grid.isVisible}},{key:"action_setGridWidth",value:function(e){this.draftState.ui.grid.width=e}},{key:"action_setGridHeight",value:function(e){this.draftState.ui.grid.height=e}},{key:"action_setGridType",value:function(e){this.draftState.ui.grid.type=e}},{key:"action_setGridHexSize",value:function(e){this.draftState.ui.grid.hexSize=e}}]),t}(C.ImmerReducer),J=function(e){function t(){return Object(B.a)(this,t),Object(k.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(D.a)(t,[{key:"action_applyColorBrush",value:function(e,t){var a=this,n=this.draftState.ui.brush,i=n.color,r=n.type,s=n.size;if(r===c.Color){var o=v(e+s/2,t+s/2);Object.keys(this.draftState.appData.beads).forEach((function(e){var t=a.draftState.appData.beads[e];if(t.color!==i){var n=v(t.position.x+t.width/2,t.position.y+t.height/2);x(n,o)<s/2+Math.min(t.width,t.height)/2&&(a.draftState.appData.beads[e].color=i)}}))}}}]),t}(C.ImmerReducer),K={appData:{beads:{},lines:{}},ui:{lineSettings:{settings:{beadsAutoCount:!0,beadsAutoSpacing:!0,beadsCount:0,beadsSpacing:0,defaultBead:{type:n.BasicEllipse,rotate:0,color:"#4fc3f7",height:52,width:52,keepAspectRatio:!1}}},saveInfo:{saved:!1,haveUnsavedChanges:!1},selectedLinesIds:{},selectedLinesIdsCount:0,selectedBeadsIds:{},selectedBeadsIdsCount:0,mouseSelection:{start:v(0,0),end:v(0,0),isDragStarted:!1,isDragged:!1},currentMenuMainOpen:r.None,grid:{type:s.Hex,hexSize:30,snapEnabled:!0,isVisible:!0,width:30,height:30},brush:{type:c.Color,size:50,color:"#4fc3f7"}},mode:i.Idle},Z={Main:Object(C.createActionCreators)(X),Draggable:Object(C.createActionCreators)(z),Persist:Object(C.createActionCreators)(H),ChangeEditorMode:Object(C.createActionCreators)(V),MouseSelection:Object(C.createActionCreators)(W),Toolbar:Object(C.createActionCreators)(U),Topbar:Object(C.createActionCreators)(q),Paint:Object(C.createActionCreators)(J)},$=Object(C.composeReducers)(Object(C.createReducerFunction)(X,K),Object(C.createReducerFunction)(z,K),Object(C.createReducerFunction)(H,K),Object(C.createReducerFunction)(U,K),Object(C.createReducerFunction)(q,K),Object(C.createReducerFunction)(V,K),Object(C.createReducerFunction)(W,K),Object(C.createReducerFunction)(J,K)),Q=function(e){var t=e.editorMode,a=Object(b.b)(),n=function(e){a(Z.ChangeEditorMode.action_onChangeEditorMode(e))};return l.a.createElement("div",{className:""},l.a.createElement(ee,{label:"Idle",icon:l.a.createElement(p.a,{icon:h.a,color:g}),onClick:function(){return n(i.Idle)},isSelected:t===i.Idle}),l.a.createElement(ee,{label:"Edit Lines",icon:l.a.createElement(p.a,{icon:h.k,color:g}),onClick:function(){return n(i.EditLines)},isSelected:t===i.EditLines}),l.a.createElement(ee,{label:"Edit Beads",icon:l.a.createElement(p.a,{icon:h.k,color:g}),onClick:function(){return n(i.EditBeads)},isSelected:t===i.EditBeads}),l.a.createElement(ee,{label:"AddLine",icon:l.a.createElement(p.a,{icon:h.r,color:g}),onClick:function(){return n(i.AddLine)},isSelected:t===i.AddLine}),l.a.createElement(ee,{label:"Paint",icon:l.a.createElement(p.a,{icon:h.p,color:g}),onClick:function(){return n(i.Paint)},isSelected:t===i.Paint}))},ee=function(e){var t=e.label,a=e.isSelected,n=e.onClick,i=e.icon;return l.a.createElement("div",{className:"\n              button \n              ".concat(a?"is-active":"","\n            "),onClick:n},l.a.createElement("span",{className:"icon is-small"},i),l.a.createElement("span",null,t))},te=a(15),ae=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"translate3d(".concat(e,"px, ").concat(t,"px, ").concat(a,"px)")},ne=function(e){return"rotate(".concat(e,"rad)")},ie=function(e){var t=e.start,a=e.end,n=x(t,a),i=O(a.y-t.y,a.x-t.x);return l.a.createElement("div",{style:{height:1,width:n,transform:"".concat(ae(t.x+5,t.y+5)," ").concat(ne(i)),transformOrigin:"left center"},className:"line"},"\xa0")},re=function(e){return!1===e.isActive?l.a.createElement(l.a.Fragment,null):l.a.createElement(se,null)},se=function(){var e=Object(o.useState)({x:0,y:0}),t=Object(te.a)(e,2),a=t[0],n=t[1],i=Object(o.useState)({x:0,y:0}),r=Object(te.a)(i,2),s=r[0],c=r[1],d=Object(o.useState)(!1),u=Object(te.a)(d,2),f=u[0],p=u[1],h=Object(o.useRef)(null),g=function(e){if(f&&h.current){var t=h.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;c({x:n,y:i}),v(a,s),p(!1)}},m=Object(b.b)(),v=function(e,t){m(Z.Draggable.action_onAddLine(e,t))};return l.a.createElement("div",null,l.a.createElement("div",{onMouseDown:function(e){if(h.current){var t=h.current.getBoundingClientRect(),a=e.clientX-t.left,i=e.clientY-t.top;n({x:a,y:i}),c({x:a,y:i}),p(!0)}},onMouseUp:g,onMouseMove:function(e){if(f&&h.current){var t=h.current.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;c({x:a,y:n})}},onMouseLeave:g,className:"add-line-wrapper",ref:h}),f?l.a.createElement("div",null,l.a.createElement("div",{style:{transform:ae(a.x,a.y),width:10,height:10},className:"line-start"},"\xa0"),l.a.createElement("div",{style:{transform:ae(s.x,s.y),width:10,height:10},className:"line-end"},"\xa0"),l.a.createElement(ie,{start:a,end:s})):null)},ce=function(e){var t=e.isVisible,a=Object(o.useRef)(null),n=Object(b.c)((function(e){return e.ui.mouseSelection.start})),i=Object(b.c)((function(e){return e.ui.mouseSelection.end})),r=Object(b.c)((function(e){return e.ui.mouseSelection.isDragStarted}));if(!1===t)return l.a.createElement(l.a.Fragment,null);var s=!0===r,c=e.onMouseDown,d=e.onMouseUp,u=e.onMouseMove,f=Math.abs(i.x-n.x),p=Math.abs(i.y-n.y),h=Math.min(i.x,n.x),g=Math.min(i.y,n.y);return l.a.createElement("div",{className:"mouse-selection",ref:a,onMouseDown:function(e){if(a.current){var t=a.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;c(n,i)}},onMouseUp:function(e){d()},onMouseMove:function(e){if(s&&a.current){var t=a.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;u(n,i)}},style:{zIndex:s?23:9}},s?l.a.createElement("div",{style:{width:f,height:p,backgroundColor:"rgba(0,0,0, 0.05)",border:"1px solid rgba(0,0,0,.3)",transform:ae(h,g)}}):null)},oe=function(e){var t=e.isVisible,a=Object(b.b)();return l.a.createElement(ce,{isVisible:t,onMouseDown:function(e,t){a(Z.MouseSelection.action_onEditBeadsMouseDown(e,t))},onMouseMove:function(e,t){a(Z.MouseSelection.action_onEditBeadsMouseMove(e,t))},onMouseUp:function(){a(Z.MouseSelection.action_onEditBeadsMouseUp())}})},le=function(e){var t=e.isVisible,a=Object(b.b)();return l.a.createElement(ce,{isVisible:t,onMouseDown:function(e,t){a(Z.MouseSelection.action_onEditLinesMouseDown(e,t))},onMouseMove:function(e,t){a(Z.MouseSelection.action_onEditLinesMouseMove(e,t))},onMouseUp:function(){a(Z.MouseSelection.action_onEditLinesMouseUp())}})},de=function(e){var t=e.bead,a=e.opacity,i=e.zIndex,r=e.isSelected,s=e.isSelectable,c=void 0!==a&&a>=0&&a<=1,o=void 0!==i&&i>=0&&i<=9999,d=Object(b.b)(),u=ae(t.position.x,t.position.y),f=t.rotate+t.lineRotate,p=f?"rotateZ(".concat(f,"deg)"):"rotateZ(0deg)",h={transform:"".concat(u," ").concat(p),opacity:c?a:1,zIndex:o?i:void 0,border:r?"1px solid #000":"",width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),background:t.color};return t.type===n.BasicEllipse&&(h.borderRadius="100%"),l.a.createElement("div",{className:"bead-item",onClick:function(){s&&d(Z.Draggable.action_onClickBead(t.id))},style:h},"\xa0")},ue=function(e){var t=e.mode,a=t===i.EditLines,n=t===i.EditBeads,r=t===i.EditBeads,s=Object(b.c)((function(e){return Object.values(e.appData.beads)})),c=Object(b.c)((function(e){return e.ui.selectedBeadsIds}));return l.a.createElement(l.a.Fragment,null,s.map((function(e){return l.a.createElement(de,{key:e.id,bead:e,opacity:a?.5:1,isSelected:void 0!==c[e.id],isSelectable:r,zIndex:a?10:n?20:void 0})})))},fe=a(61),pe=a(39),he=function(e){var t=e.start,a=e.end,n=e.onClick,i=x(t,a),r=O(a.y-t.y,a.x-t.x);return l.a.createElement("div",{style:{height:10,width:i,backgroundColor:"rgba(0,0,0,0.0)",transform:"".concat(ae(t.x+0,t.y+0)," ").concat(ne(r)),transformOrigin:"left center",cursor:"pointer",zIndex:20},onClick:n,className:"line"},"\xa0")};function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e){var t=e.lineId,a=e.start,n=e.end,i=x(a,n),r=O(n.y-a.y,n.x-a.x),c=Object(b.b)(),d=Object(b.c)((function(e){return e.ui.grid.snapEnabled})),u=Object(b.c)((function(e){return e.ui.grid.width})),f=Object(b.c)((function(e){return e.ui.grid.height})),p=Object(b.c)((function(e){return e.ui.grid.type})),h=Object(o.useState)(0),g=Object(te.a)(h,2),m=g[0],v=g[1],S=Object(o.useState)(0),E=Object(te.a)(S,2),y=E[0],j=E[1],C=Object(o.useState)(null),B=Object(te.a)(C,2),D=B[0],k=B[1],_=Object(o.useState)(null),w=Object(te.a)(_,2),I=w[0],L=w[1];return l.a.createElement(pe.DraggableCore,{onStart:function(e,t){var i=t.x,r=t.y;console.log("rozpoczecie ",a,n,i,r),v(i),j(r),k(be({},a)),L(be({},n))},onDrag:function(e,a){var n=a.x,i=a.y,r=a.deltaX,s=a.deltaY;c(Z.Draggable.action_onLineDrag(t,{x:n,y:i,deltaX:r,deltaY:s,startX:m,startY:y,lineStart:D,lineEnd:I}))},onStop:function(e,t){var i=t.x,r=t.y;console.log("zakoneczenie ",a,n,i,r),v(0),j(0),k(null),L(null)},grid:!0===d&&p===s.Box?[u,f]:void 0,disabled:!1,scale:1},l.a.createElement("div",{style:{height:10,width:i,backgroundColor:"rgba(0,0,0,0.05)",border:"1px dashed rgba(0,0,0,0.60)",transform:"".concat(ae(a.x+0,a.y+0)," ").concat(ne(r)),transformOrigin:"left center",cursor:"move",zIndex:21},className:"line"},"\xa0"))},ve=function(e){var t=e.isSelected,a=e.line,n=Object(b.b)(),i=Object(b.c)((function(e){return e.ui.grid.snapEnabled})),r=Object(b.c)((function(e){return e.ui.grid.width})),c=Object(b.c)((function(e){return e.ui.grid.height})),o=Object(b.c)((function(e){return e.ui.grid.type}));return l.a.createElement("div",null,l.a.createElement(pe.DraggableCore,{onDrag:function(e,t){var i=t.x,r=t.y;n(Z.Draggable.action_onStartPointDrag(a.id,{x:i,y:r}))},grid:!0===i&&o===s.Box?[r,c]:void 0,scale:1,disabled:!1},l.a.createElement("div",{style:{transform:ae(a.start.x,a.start.y),zIndex:!0===t?22:21,width:10,height:10},className:"line-start"},"\xa0")),l.a.createElement(pe.DraggableCore,{onDrag:function(e,t){var i=t.x,r=t.y;n(Z.Draggable.action_onEndPointDrag(a.id,{x:i,y:r}))},grid:!0===i&&o===s.Box?[r,c]:void 0,disabled:!1,scale:1},l.a.createElement("div",{style:{transform:ae(a.end.x,a.end.y),zIndex:!0===t?22:21,width:10,height:10},className:"line-end test"},"\xa0")),!0===t?l.a.createElement(me,{start:a.start,end:a.end,lineId:a.id}):l.a.createElement(he,{start:a.start,end:a.end,onClick:function(){n(Z.Draggable.action_onClickLine(a.id))}}),l.a.createElement(ie,{start:a.start,end:a.end}))},Se=a(62),Ee=function(e){var t=e.lines,a=e.selectedLinesIds;return l.a.createElement(fe.b,{backend:Se.a},t.map((function(e){return l.a.createElement(ve,{key:e.id,line:e,isSelected:void 0!==a[e.id]})})))},ye=function(e){var t=e.line;return l.a.createElement("div",null,l.a.createElement(ie,{start:t.start,end:t.end}))},xe=function(e){var t=e.mode,a=t===i.EditLines,n=Object(b.c)((function(e){return Object.values(e.appData.lines)})),r=Object(b.c)((function(e){return e.ui.selectedLinesIds}));return t===i.Idle?l.a.createElement(l.a.Fragment,null):a?l.a.createElement(Ee,{lines:n,selectedLinesIds:r}):l.a.createElement(l.a.Fragment,null,n.map((function(e){return l.a.createElement(ye,{key:e.id,line:e})})))},Oe=function(e){var t=e.location,a=e.onDrag,n=t.x,i=t.y,r=t.w,c=t.h,o=Object(b.c)((function(e){return e.ui.grid.snapEnabled})),d=Object(b.c)((function(e){return e.ui.grid.width})),u=Object(b.c)((function(e){return e.ui.grid.height})),f=Object(b.c)((function(e){return e.ui.grid.type}));return l.a.createElement(fe.b,{backend:Se.a},l.a.createElement(pe.DraggableCore,{onDrag:a,grid:!0===o&&f===s.Box?[d,u]:void 0,scale:1,disabled:!1},l.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:r,height:c,transform:ae(n,i),opacity:1,zIndex:22,border:"1px dashed rgba(0,0,0,0.2)",background:"rgba(0,0,0,0.05)",cursor:"move"}},"\xa0")))},je=function(e){return Object.keys(e.ui.selectedLinesIds).map((function(t){return e.appData.lines[t]}))},Ce=l.a.memo((function(e){e.selectedLinesIdsCount;var t=Object(b.b)(),a=function(e){var t=Number.MAX_SAFE_INTEGER,a=-1*Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=-1*Number.MAX_SAFE_INTEGER;return e.forEach((function(e){var r=e.start,s=e.end;t=Math.min(t,r.x,s.x),a=Math.max(a,r.x,s.x),n=Math.min(n,r.y,s.y),i=Math.max(i,r.y,s.y)})),{x:t,y:n,w:a-t+10,h:i-n+10}}(Object(b.c)(je));return l.a.createElement(Oe,{location:a,onDrag:function(e,a){var n=a.deltaX,i=a.deltaY;t(Z.Draggable.action_onGroupLineDrag({deltaX:n,deltaY:i}))}})})),Be=function(e){var t=e.location,a=t.x,n=t.y,i=t.w,r=t.h;return l.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:i,height:r,transform:ae(a,n),opacity:1,zIndex:22,border:"1px dashed rgba(0,0,0,0.2)",background:"rgba(0,0,0,0.05)"}},"\xa0")},De=function(e){return Object.keys(e.ui.selectedBeadsIds).map((function(t){return e.appData.beads[t]}))},ke=l.a.memo((function(e){e.selectedBeadsIdsCount;var t=function(e){var t=Number.MAX_SAFE_INTEGER,a=-1*Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=-1*Number.MAX_SAFE_INTEGER;return e.forEach((function(e){var r=e.position.x,s=e.position.x+10,c=e.position.y,o=e.position.y+10;t=Math.min(t,r,s),a=Math.max(a,r,s),n=Math.min(n,c,o),i=Math.max(i,c,o)})),{x:t,y:n,w:a-t+10,h:i-n+10}}(Object(b.c)(De));return l.a.createElement(Be,{location:t})})),_e=function(e){var t=e.mode,a=Object(b.c)((function(e){return e.ui.selectedBeadsIdsCount})),n=Object(b.c)((function(e){return e.ui.selectedLinesIdsCount}));return t===i.EditBeads&&a>=2?l.a.createElement(ke,{selectedBeadsIdsCount:a}):t===i.EditLines&&n>=2?l.a.createElement(Ce,{selectedLinesIdsCount:n}):l.a.createElement(l.a.Fragment,null)},we=a(59);function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Le,Me=function(e){var t=e.bead,a=M(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{position:v(0,0)}));return l.a.createElement("div",{style:{marginTop:"20px",marginBottom:"20px",display:"flex",justifyContent:"center",alignItems:"center",height:"100px",boxSizing:"border-box"}},l.a.createElement("div",{style:{position:"relative",top:"".concat(-1*t.height/2,"px"),left:"".concat(-1*t.width/2,"px")}},l.a.createElement(de,{bead:a,isSelected:!1,isSelectable:!1})))},Ae=function(e){var t=e.label,a=e.icon,n=e.value,i=e.onToggle;return l.a.createElement("div",{className:"fieldset",onClick:i,style:{cursor:"pointer"}},l.a.createElement("div",{className:"label"},a?l.a.createElement("div",{style:{width:"30px",display:"flex",justifyContent:"center",alignItems:"center",height:"30px",marginRight:"10px"}},a):null,t?l.a.createElement("div",null,t):null),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",boxSizing:"border-box",paddingLeft:"10px",paddingRight:"20px",width:"100%"}},l.a.createElement("div",null,void 0!==n?n:"-")))},Fe=function(e){var t=e.selected,a=e.label,n=e.icon,i=e.children,r=Object(o.useState)(!1),s=Object(te.a)(r,2),c=s[0],d=s[1];return l.a.createElement("div",{style:{borderTop:"1px solid #dfdfdf"}},l.a.createElement(Ae,{label:a,onToggle:function(){d(!c)},icon:n,value:t}),!0===c?l.a.createElement("div",{style:{background:"#fff"}},l.a.cloneElement(i)):null)},Ne=a(60),Re=a(4),Pe=function(e){e.value;var t=e.onChange,a=(Object(Ne.a)(e,["value","onChange"]),[[Re.p[900],Re.p[700],Re.p[500],Re.p[300],Re.p[100]],[Re.n[900],Re.n[700],Re.n[500],Re.n[300],Re.n[100]],[Re.o[900],Re.o[700],Re.o[500],Re.o[300],Re.o[100]],[Re.g[900],Re.g[700],Re.g[500],Re.g[300],Re.g[100]],[Re.i[900],Re.i[700],Re.i[500],Re.i[300],Re.i[100]],[Re.b[900],Re.b[700],Re.b[500],Re.b[300],Re.b[100]],[Re.j[900],Re.j[700],Re.j[500],Re.j[300],Re.j[100]],[Re.e[900],Re.e[700],Re.e[500],Re.e[300],Re.e[100]],[Re.q[900],Re.q[700],Re.q[500],Re.q[300],Re.q[100]],["#194D33",Re.h[700],Re.h[500],Re.h[300],Re.h[100]],[Re.k[900],Re.k[700],Re.k[500],Re.k[300],Re.k[100]],[Re.l[900],Re.l[700],Re.l[500],Re.l[300],Re.l[100]],[Re.r[900],Re.r[700],Re.r[500],Re.r[300],Re.r[100]],[Re.a[900],Re.a[700],Re.a[500],Re.a[300],Re.a[100]],[Re.m[900],Re.m[700],Re.m[500],Re.m[300],Re.m[100]],[Re.f[900],Re.f[700],Re.f[500],Re.f[300],Re.f[100]],[Re.d[900],Re.d[700],Re.d[500],Re.d[300],Re.d[100]],[Re.c[900],Re.c[700],Re.c[500],Re.c[300],Re.c[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]]);return l.a.createElement("div",{style:{width:"100%",paddingTop:"20px",paddingBottom:"30px",paddingLeft:"20px",paddingRight:"20px"}},l.a.createElement(Te,{colors:a,onClick:t}))},Te=function(e){var t=e.colors,a=e.onClick;return l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",flexWrap:"wrap"}},t.map((function(e){return l.a.createElement("div",{key:e.toString(),style:{marginBottom:"10px"}},e.map((function(e){return l.a.createElement("div",{key:e,style:{cursor:"pointer",border:"3px solid transparent",boxSizing:"border-box"}},l.a.createElement("div",{onClick:function(){return a(e)},style:{boxSizing:"border-box",background:e,width:"28px",height:"28px",borderRadius:"100%",border:"none"}}))})))}))))},ze=function(e){var t=e.value,a=e.isSelected,n=e.onClick;return l.a.createElement("div",{style:{border:"5px solid transparent"}},l.a.createElement("div",{onClick:n?function(){return n(t)}:void 0,style:{width:25,height:25,background:t,marginBottom:0,marginRight:0,border:"2px solid #000",boxShadow:a?"2px 2px 2px rgba(0,0,0,1)":"2px 2px 2px rgba(0,0,0,0.1)"}}))},He=function(e){var t=e.value,a=e.onChange;return l.a.createElement(Fe,{selected:l.a.createElement(ze,{value:t,isSelected:!1,onClick:void 0}),label:"Color",icon:l.a.createElement(p.a,{icon:h.q,color:g,size:"lg"})},l.a.createElement(Pe,{value:t,onChange:a}))},Ve=(Le={},Object(m.a)(Le,n.BasicEllipse,"circle"),Object(m.a)(Le,n.BasicRectangle,"rectangle-wide"),Le),Xe=function(e){var t=e.value,a=e.onChange;return l.a.createElement(We,{types:Ve,selectedType:t,onClick:a})},We=function(e){var t=e.types,a=e.selectedType,n=e.onClick;return console.log("jak jest?",t),l.a.createElement("div",{className:"fieldset",style:{}},l.a.createElement("div",{className:"label"}),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",boxSizing:"border-box",paddingLeft:"10px",paddingRight:"20px",width:"100%"}},Object.keys(t).map((function(e,i){return l.a.createElement(Ge,{icon:t[e],type:e,key:i,isSelected:a===e,onClick:n})}))))},Ge=function(e){var t=e.icon,a=e.type,n=e.isSelected,i=e.onClick;return l.a.createElement("div",{style:{border:"5px solid transparent"}},l.a.createElement("div",{onClick:i?function(){return i(a)}:void 0,style:{width:25,height:25,background:"#eee",marginBottom:0,marginRight:0,border:"2px solid #000",boxShadow:n?"2px 2px 2px rgba(0,0,0,1)":"2px 2px 2px rgba(0,0,0,0.1)",display:"flex",justifyContent:"center",alignItems:"center"}},"circle"===t?l.a.createElement(p.a,{icon:h.d}):null,"rectangle-wide"===t?l.a.createElement(p.a,{icon:h.l}):null))},Ye=function(e){var t=e.value,a=e.onChange;return l.a.createElement(Fe,{selected:l.a.createElement(Ge,{icon:t?Ve[t]:void 0,type:t,isSelected:!1,onClick:void 0}),label:"Type",icon:l.a.createElement(p.a,{icon:h.t,color:g,size:"lg"})},l.a.createElement(Xe,{value:t,onChange:a}))},Ue=(a(84),a(48)),qe=Object(Ue.a)(Ue.b),Je=function(e){var t=e.value,a=e.onChange,n=Object(Ne.a)(e,["value","onChange"]);return l.a.createElement("div",{style:{background:"#fff",width:"100%",paddingTop:"20px",paddingBottom:"30px",paddingLeft:"20px",paddingRight:"20px"}},l.a.createElement(qe,Object.assign({max:100,min:1,step:1,value:t,onChange:function(e){return a(e)},defaultValue:10,marks:{0:"0",50:"50",100:"100"}},n)))},Ke=function(e){var t=e.label,a=e.value,n=e.onChange,i=e.isDisabled;return l.a.createElement("div",{className:"fieldset"},l.a.createElement("div",{className:"label"},t),l.a.createElement("input",{type:"checkbox",disabled:i,value:!0===a?1:0,checked:!0===a,onChange:function(e){return n("0"===e.target.value)}}))},Ze=function(e){var t=e.beadsAutoSpacing,a=e.beadsSpacing,n=e.onChange_beadsSpacing,i=e.onChange_beadsAutoSpacing,r=!0===t?"auto":void 0===a?"0":a;return l.a.createElement(Fe,{selected:r,label:"Spacing",icon:l.a.createElement(p.a,{icon:h.h,color:g,size:"lg",style:{transform:"rotate(90deg)"}})},l.a.createElement("div",null,l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(Ke,{label:"Auto ",value:t,onChange:i,isDisabled:!1})),l.a.createElement("div",{style:{width:"100%",paddingTop:"20px",paddingBottom:"30px",paddingLeft:"20px",paddingRight:"20px"}},l.a.createElement(qe,{max:100,min:1,step:1,value:a,disabled:!0===t,onChange:function(e){return n(e)},defaultValue:10,marks:{0:"0",50:"50",100:"100"}}))))},$e=function(e){var t,a=e.beadsAutoCount,n=e.beadsCount,i=e.onChange_beadsCount,r=e.onChange_beadsAutoCount,s=!0===a?"auto":void 0===n?"0":n;return l.a.createElement(Fe,{selected:s,label:"Amount",icon:l.a.createElement(p.a,{icon:h.g,color:g,size:"lg"})},l.a.createElement("div",null,l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(Ke,{label:"Auto ",value:a,onChange:r,isDisabled:!1})),l.a.createElement("div",{style:{width:"100%",paddingTop:"20px",paddingBottom:"30px",paddingLeft:"20px",paddingRight:"20px"}},l.a.createElement(qe,{max:300,min:1,step:1,value:n,disabled:!0===a,onChange:function(e){return i(e)},defaultValue:10,marks:(t={1:"1"},Object(m.a)(t,150,"".concat(150)),Object(m.a)(t,300,"".concat(300)),t)}))))},Qe=Object(Ue.a)(Ue.b),et=function(e){var t=e.value,a=e.onChange,n=e.label,i=e.icon;return l.a.createElement("div",{className:"fieldset",style:{paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",display:"flex",flexDirection:"row",justifyContent:"space-between",background:"#fff",borderBottom:0}},l.a.createElement("div",{className:"label",style:{padding:0,width:"105px"}},i?l.a.createElement("div",{style:{width:"30px",display:"flex",justifyContent:"center",alignItems:"center",height:"30px",marginRight:"10px"}},i):null,n?l.a.createElement("div",null,n):null),l.a.createElement("div",{style:{boxSizing:"border-box",flexGrow:1,paddingRight:"10px",paddingBottom:"10px"}},l.a.createElement(Qe,{max:100,min:1,step:1,value:t,onChange:function(e){return a(e)},defaultValue:10,marks:{0:"0",50:"50",100:"100"}})))},tt=function(e){var t=e.height,a=e.width,n=e.keepAspectRatio,i=e.onChange_beadHeight,r=e.onChange_beadWidth,s=e.onChange_keepAspectRatio,c=function(e){return e.toLocaleString(void 0,{maximumFractionDigits:2,style:"decimal"})},o="".concat(c(a)," x ").concat(c(t));return l.a.createElement("div",null,l.a.createElement(Fe,{selected:o,label:"Size",icon:l.a.createElement(p.a,{icon:h.m,color:g,size:"lg"})},l.a.createElement("div",null,l.a.createElement("div",{style:{width:"100%",background:"#fff"}},l.a.createElement(Ke,{label:l.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",justifyContent:"space"}},l.a.createElement("div",{style:{width:"30px",display:"flex",justifyContent:"center",alignItems:"center",height:"30px",marginRight:"10px",background:"#fff"}},l.a.createElement(p.a,{icon:!0===n?h.o:h.x,color:g,size:"lg"})),l.a.createElement("div",null,"Keep aspect ratio")),value:n,onChange:s,isDisabled:!1})),l.a.createElement(et,{label:"Width",icon:l.a.createElement(p.a,{icon:h.b,color:g,size:"lg"}),value:a,onChange:r}),l.a.createElement(et,{label:"Height",icon:l.a.createElement(p.a,{icon:h.c,color:g,size:"lg"}),value:t,onChange:i}))))},at=function(e){var t=e.onDelete,a=e.onClone,n=e.onReset;return l.a.createElement("div",{className:"fieldset",style:{paddingLeft:"15px",paddingRight:"20px"}},l.a.createElement("div",{className:"field has-addons"},l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:" button ",onClick:t},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(p.a,{icon:h.w,color:g})),l.a.createElement("span",null,"Delete"))),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:" button ",onClick:a},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(p.a,{icon:h.e,color:g})),l.a.createElement("span",null,"Clone"))),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:" button ",onClick:n},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(p.a,{icon:h.i,color:g})),l.a.createElement("span",null,"Reset beads")))))},nt=a(47),it=function(e){var t=e.value,a=e.onChange;return l.a.createElement(Fe,{selected:"".concat(t,"deg"),label:"Rotate",icon:l.a.createElement(p.a,{icon:h.u,color:g,size:"lg"})},l.a.createElement(l.a.Fragment,null,l.a.createElement(Je,{value:t,onChange:function(e){console.log("FieldSlider",e),a(e)},max:180,min:-180,defaultValue:0,marks:{"-180":"-180",0:"0",180:"180"}}),l.a.createElement(nt.a,{suffix:"deg",allowNegative:!0,allowEmptyFormatting:!0,value:t,onValueChange:function(e){a(e.floatValue)},placeholder:" deg",style:{color:"#4a4a4a",textAlign:"center",border:"1px solid #aeaeae",fontFamily:"Open Sans, sans-serif",fontSize:"1em",fontWeight:400,lineHeight:"1.5",padding:"3px 10px",marginBottom:"15px",marginTop:"5px"}})))},rt=function(e){return!0===e.isVisible?l.a.createElement(st,null):l.a.createElement(l.a.Fragment,null)},st=function(e){return Object(we.a)(e),Object(b.c)((function(e){return e.ui.selectedLinesIdsCount>=1}))?l.a.createElement(ct,null):l.a.createElement(l.a.Fragment,null)},ct=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ht,null),l.a.createElement(lt,null),l.a.createElement(pt,null),l.a.createElement(ft,null),l.a.createElement(ut,null),l.a.createElement(dt,null),l.a.createElement(ot,null),l.a.createElement(gt,null))},ot=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedLinesIds)[0];return e.appData.lines[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);var a=t.settings;if(!a)return l.a.createElement(l.a.Fragment,null);if(!a.defaultBead)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(it,{value:a.defaultBead.rotate,onChange:function(t){var a=t;void 0!==t&&null!==t&&!0!==isNaN(t)||(a=0),e(Z.Toolbar.action_changeSelectedLines_defaultBead_rotate(a))}})},lt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedLinesIds)[0];return e.appData.lines[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);var a=t.settings;if(!a)return l.a.createElement(l.a.Fragment,null);if(!a.defaultBead)return l.a.createElement(l.a.Fragment,null);var n=a.defaultBead.width?a.defaultBead.width:10,i=a.defaultBead.height?a.defaultBead.height:10,r=!!a.defaultBead.keepAspectRatio&&a.defaultBead.keepAspectRatio;return l.a.createElement("div",null,l.a.createElement(tt,{height:i,width:n,keepAspectRatio:r,onChange_beadHeight:function(t){e(Z.Toolbar.action_changeSelectedLines_defaultBead_height(t))},onChange_beadWidth:function(t){e(Z.Toolbar.action_changeSelectedLines_defaultBead_width(t))},onChange_keepAspectRatio:function(t){e(Z.Toolbar.action_changeSelectedLines_defaultBead_keepAspectRatio(t))}}))},dt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedLinesIds)[0];return e.appData.lines[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);var a=t.settings;if(!a)return l.a.createElement(l.a.Fragment,null);return l.a.createElement($e,{beadsAutoCount:a.beadsAutoCount,beadsCount:a.beadsCount,onChange_beadsAutoCount:function(t){e(Z.Toolbar.action_changeSelectedLines_settings_beadsAutoCount(t))},onChange_beadsCount:function(t){t&&e(Z.Toolbar.action_changeSelectedLines_settings_beadsCount(Number(t)))}})},ut=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedLinesIds)[0];return e.appData.lines[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);var a=t.settings;if(!a)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(Ze,{beadsAutoSpacing:a.beadsAutoSpacing,beadsSpacing:a.beadsSpacing,onChange_beadsAutoSpacing:function(t){e(Z.Toolbar.action_changeSelectedLines_settings_beadsAutoSpacing(t))},onChange_beadsSpacing:function(t){t&&e(Z.Toolbar.action_changeSelectedLines_settings_beadsSpacing(Number(t)))}})},ft=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedLinesIds)[0];return e.appData.lines[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);var a=t.settings;if(!a)return l.a.createElement(l.a.Fragment,null);if(!a.defaultBead)return l.a.createElement(l.a.Fragment,null);if(!a.defaultBead.type)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(Ye,{onChange:function(t){e(Z.Toolbar.action_changeSelectedLines_defaultBead_type(t))},value:a.defaultBead.type})},pt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedLinesIds)[0];return e.appData.lines[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);var a=t.settings;if(!a)return l.a.createElement(l.a.Fragment,null);if(!a.defaultBead)return l.a.createElement(l.a.Fragment,null);if(!a.defaultBead.color)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(He,{onChange:function(t){e(Z.Toolbar.action_changeSelectedLines_defaultBead_color(t))},value:a.defaultBead.color})},ht=function(){var e=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedLinesIds)[0];return e.appData.lines[t]}));if(!e)return l.a.createElement(l.a.Fragment,null);var t=e.settings;return t&&t.defaultBead?l.a.createElement(Me,{bead:t.defaultBead}):l.a.createElement(l.a.Fragment,null)},gt=function(){var e=Object(b.b)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(at,{onDelete:function(){e(Z.Toolbar.action_deleteSelectedLines())},onClone:function(){e(Z.Toolbar.action_cloneSelectedLines())},onReset:function(){e(Z.Toolbar.action_resetSelectedLines())}}))},bt=function(e){return!0===e.isVisible?l.a.createElement(mt,null):l.a.createElement(l.a.Fragment,null)},mt=function(e){return Object(we.a)(e),Object(b.c)((function(e){return e.ui.selectedBeadsIdsCount>=1}))?l.a.createElement(vt,null):l.a.createElement(l.a.Fragment,null)},vt=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ot,null),l.a.createElement(Et,null),l.a.createElement(xt,null),l.a.createElement(yt,null),l.a.createElement(St,null))},St=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedBeadsIds)[0];return e.appData.beads[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(it,{value:t.rotate,onChange:function(t){var a=t;void 0!==t&&null!==t&&!0!==isNaN(t)||(a=0),e(Z.Toolbar.action_changeSelectedBeads_rotate(a))}})},Et=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedBeadsIds)[0];return e.appData.beads[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);var a=t.width?t.width:10,n=t.height?t.height:10,i=!!t.keepAspectRatio&&t.keepAspectRatio;return l.a.createElement("div",null,l.a.createElement(tt,{height:n,width:a,keepAspectRatio:i,onChange_beadHeight:function(t){e(Z.Toolbar.action_changeSelectedBeads_height(t))},onChange_beadWidth:function(t){e(Z.Toolbar.action_changeSelectedBeads_width(t))},onChange_keepAspectRatio:function(t){e(Z.Toolbar.action_changeSelectedBeads_keepAspectRatio(t))}}))},yt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedBeadsIds)[0];return e.appData.beads[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);if(!t.type)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(Ye,{onChange:function(t){e(Z.Toolbar.action_changeSelectedBeads_type(t))},value:t.type})},xt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedBeadsIds)[0];return e.appData.beads[t]}));if(!t)return l.a.createElement(l.a.Fragment,null);if(!t.color)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(He,{onChange:function(t){e(Z.Toolbar.action_changeSelectedBeads_color(t))},value:t.color})},Ot=function(){var e=Object(b.c)((function(e){var t=Object.keys(e.ui.selectedBeadsIds)[0];return e.appData.beads[t]}));return e?l.a.createElement(Me,{bead:e}):l.a.createElement(l.a.Fragment,null)},jt=function(e){return!0===e.isVisible?l.a.createElement(Ct,null):l.a.createElement(l.a.Fragment,null)},Ct=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Lt,null),l.a.createElement(Dt,null),l.a.createElement(It,null),l.a.createElement(wt,null),l.a.createElement(_t,null),l.a.createElement(kt,null),l.a.createElement(Bt,null))},Bt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.lineSettings.settings}));if(!t)return l.a.createElement(l.a.Fragment,null);if(!t.defaultBead)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(it,{value:t.defaultBead.rotate,onChange:function(t){var a=t;void 0!==t&&null!==t&&!0!==isNaN(t)||(a=0),e(Z.Toolbar.action_changeDefaultLineBeadRotate(a))}})},Dt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.lineSettings.settings}));if(!t)return l.a.createElement(l.a.Fragment,null);if(!t.defaultBead)return l.a.createElement(l.a.Fragment,null);var a=t.defaultBead.width?t.defaultBead.width:10,n=t.defaultBead.height?t.defaultBead.height:10,i=!!t.defaultBead.keepAspectRatio&&t.defaultBead.keepAspectRatio;return l.a.createElement("div",null,l.a.createElement(tt,{height:n,width:a,keepAspectRatio:i,onChange_beadHeight:function(t){e(Z.Toolbar.action_changeDefaultLineBeadHeight(t))},onChange_beadWidth:function(t){e(Z.Toolbar.action_changeDefaultLineBeadWidth(t))},onChange_keepAspectRatio:function(t){e(Z.Toolbar.action_changeDefaultLineBeadKeepAspectRatio(t))}}))},kt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.lineSettings.settings}));if(!t)return l.a.createElement(l.a.Fragment,null);return l.a.createElement($e,{beadsAutoCount:t.beadsAutoCount,beadsCount:t.beadsCount,onChange_beadsAutoCount:function(t){e(Z.Toolbar.action_changeDefaultLineBeadsAutoCount(t))},onChange_beadsCount:function(t){t&&e(Z.Toolbar.action_changeDefaultLineBeadsCount(Number(t)))}})},_t=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.lineSettings.settings}));if(!t)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(Ze,{beadsAutoSpacing:t.beadsAutoSpacing,beadsSpacing:t.beadsSpacing,onChange_beadsAutoSpacing:function(t){e(Z.Toolbar.action_changeDefaultLineBeadsAutoSpacing(t))},onChange_beadsSpacing:function(t){t&&e(Z.Toolbar.action_changeDefaultLineBeadsSpacing(Number(t)))}})},wt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.lineSettings.settings}));if(!t)return l.a.createElement(l.a.Fragment,null);if(!t.defaultBead)return l.a.createElement(l.a.Fragment,null);if(!t.defaultBead.type)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(Ye,{onChange:function(t){e(Z.Toolbar.action_changeDefaultLineBeadType(t))},value:t.defaultBead.type})},It=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.lineSettings.settings}));if(!t)return l.a.createElement(l.a.Fragment,null);if(!t.defaultBead)return l.a.createElement(l.a.Fragment,null);if(!t.defaultBead.color)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(He,{onChange:function(t){e(Z.Toolbar.action_changeDefaultLineColor(t))},value:t.defaultBead.color})},Lt=function(){var e=Object(b.c)((function(e){return e.ui.lineSettings.settings}));return e&&e.defaultBead?l.a.createElement(Me,{bead:e.defaultBead}):l.a.createElement(l.a.Fragment,null)},Mt=function(e){return!0===e.isVisible?l.a.createElement(At,null):l.a.createElement(l.a.Fragment,null)},At=function(){var e=Object(b.c)((function(e){return Object.keys(e.appData.lines).length})),t=Object(b.c)((function(e){return Object.keys(e.appData.beads).length}));return l.a.createElement("div",null,l.a.createElement(Ae,{label:"Beads",onToggle:void 0,value:t,icon:void 0}),l.a.createElement(Ae,{label:"Lines",onToggle:void 0,value:e,icon:void 0}))},Ft=function(e){return!1===e.isVisible?l.a.createElement(l.a.Fragment,null):l.a.createElement(Nt,null)},Nt=function(){var e=Object(b.c)((function(e){return e.ui.grid})),t=e.height,a=e.width,n=e.hexSize,i=e.type;return!1===e.isVisible?l.a.createElement(l.a.Fragment,null):i===s.Box?l.a.createElement(Rt,{height:t,width:a}):i===s.Hex?l.a.createElement(Tt,{hexSize:n}):l.a.createElement(l.a.Fragment,null)},Rt=function(e){var t=e.height,a=e.width,n=t,i="<svg xmlns='http://www.w3.org/2000/svg' width='".concat(a,"' height='").concat(n,"'>")+"  <line x1='".concat(a/2,"' y1='0' x2='").concat(a/2,"' y2='").concat(n,"' style='stroke:").concat("rgba(0,0,0,0.08)",";stroke-width:").concat(1,"' />")+"  <line x1='0' y1='".concat(n/2,"' x2='").concat(a,"' y2='").concat(n/2,"' style='stroke:").concat("rgba(0,0,0,0.08)",";stroke-width:").concat(1,"' />")+"</svg>",r='url("data:image/svg+xml;utf8,'.concat(i,'")');return l.a.createElement("div",{style:{height:"100%",width:"100%",position:"absolute",top:0,left:0,backgroundImage:r,backgroundRepeat:"repeat",backgroundPosition:"".concat(a/2,"px ").concat(n/2,"px")}})},Pt=function(e,t,a){var n=60*a-30,i=Math.PI/180*n;return v(e.x+t*Math.cos(i),e.y+t*Math.sin(i))},Tt=function(e){var t=e.hexSize,a=t,n=Math.sqrt(3)*a,i=2*a,r=v(0,a),s=v(r.x,r.y);s.x=s.x+n;var c=v(r.x,r.y);c.x=c.x+n/2,c.y=c.y+.75*i;var o=v(r.x,r.y);o.x=o.x-n/2,o.y=o.y+.75*i;var d=[[Pt(r,a,5),Pt(r,a,6)],[Pt(r,a,0),Pt(r,a,1)],[Pt(r,a,1),Pt(r,a,2)],[Pt(s,a,4),Pt(s,a,5)],[Pt(s,a,2),Pt(s,a,3)],[Pt(s,a,2),Pt(s,a,3)],[Pt(c,a,0),Pt(c,a,1)],[Pt(o,a,0),Pt(o,a,1)]],u=1.5*i,f="<svg xmlns='http://www.w3.org/2000/svg' width='".concat(n,"' height='").concat(u,"'>");d.forEach((function(e){var t=Object(te.a)(e,2),a=t[0],n=t[1],i="<line x1='".concat(a.x,"' y1='").concat(a.y,"' x2='").concat(n.x,"' y2='").concat(n.y,"' ")+"style='stroke:".concat("rgba(0,0,0,0.1)",";stroke-width:").concat(1,"' />");f+=i}));var p='url("data:image/svg+xml;utf8,'.concat(f+="</svg>",'")');return l.a.createElement("div",{style:{height:"100%",width:"100%",position:"absolute",top:0,left:0,backgroundImage:p,backgroundRepeat:"repeat",backgroundPosition:"1px 0px"}})},zt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.currentMenuMainOpen}));return l.a.createElement("div",{className:"field has-addons",style:{margin:0,border:"1px solid #e0e0e0",paddingBottom:"0px"}},l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:"button is-light ".concat(t===r.File?"is-dark":""),onClick:function(){e(Z.Topbar.action_toggleMenuFile())},style:{height:"25px",padding:"3px 10px"}},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(p.a,{icon:h.n,color:g})),l.a.createElement("span",null,"File"))),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:"button is-light ".concat(t===r.Settings?"is-dark":""),onClick:function(){e(Z.Topbar.action_toggleMenuSettings())},style:{height:"25px",padding:"3px 10px"}},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(p.a,{icon:h.f,color:g})),l.a.createElement("span",null,"Settings"))))},Ht=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.saveInfo.saved})),a=Object(b.c)((function(e){return e.ui.saveInfo.haveUnsavedChanges}));return l.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},l.a.createElement("div",{className:"field has-addons",style:{width:"auto",flexWrap:"nowrap",marginBottom:"0"}},l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:" button is-light ",onClick:function(){e(Z.Persist.action_onClearCanvas())}},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(p.a,{icon:h.v,color:g})),l.a.createElement("span",null,"New project"))),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:" button is-light ".concat(!0===t?"is-success":""),onClick:function(){e(Z.Persist.action_onSaveCanvas())}},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(p.a,{icon:h.s,color:g})),l.a.createElement("span",null,"Save"))),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:"button is-light ",onClick:function(){e(Z.Persist.action_readSavedCanvas())}},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(p.a,{icon:h.j,color:g})),l.a.createElement("span",null,"Load local")))),l.a.createElement("div",{style:{fontFamily:"Open Sans, sans-serif",fontSize:"13px",alignSelf:"center"}},!0===a?l.a.createElement("div",null,"You have unsaved changes"):l.a.createElement("div",null,"No changes to save")))},Vt=function(){var e=Object(b.c)((function(e){return e.ui.currentMenuMainOpen}));return e===r.File?l.a.createElement(Xt,null):e===r.Settings?l.a.createElement(Wt,null):l.a.createElement(l.a.Fragment,null)},Xt=function(){Object(b.b)();return l.a.createElement("div",null,l.a.createElement(Ht,null))},Wt=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.grid})),a=t.height,n=t.width,i=t.hexSize,r=t.type,c=t.snapEnabled,o=t.isVisible;return l.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"center"}},l.a.createElement(Gt,{isVisible:o,onChange_isVisible:function(){e(Z.Topbar.action_toggleGridIsVisible())},snapEnabled:c,onChange_snapEnabled:function(){e(Z.Topbar.action_toggleGridSnapEnabled())},type:r,onClick_selectTypeHex:function(){e(Z.Topbar.action_setGridType(s.Hex))},onClick_selectTypeBox:function(){e(Z.Topbar.action_setGridType(s.Box))}}),r===s.Box?l.a.createElement(Yt,{gridItemW:n,onChange_gridItemW:function(t){var a=t;void 0!==t&&null!==t&&!0!==isNaN(t)?(a<1&&(a=1),a>100&&(a=100),e(Z.Topbar.action_setGridWidth(a))):a=1},gridItemH:a,onChange_gridItemH:function(t){var a=t;void 0!==t&&null!==t&&!0!==isNaN(t)?(a<1&&(a=1),a>100&&(a=100),e(Z.Topbar.action_setGridHeight(a))):a=1}}):null,r===s.Hex?l.a.createElement(Ut,{hexSize:i,onChange_hexSize:function(t){var a=t;void 0!==t&&null!==t&&!0!==isNaN(t)?(a<1&&(a=1),a>100&&(a=100),e(Z.Topbar.action_setGridHexSize(a))):a=1}}):null)},Gt=function(e){var t=e.isVisible,a=e.onChange_isVisible,n=e.snapEnabled,i=e.onChange_snapEnabled,r=e.type,c=e.onClick_selectTypeHex,o=e.onClick_selectTypeBox;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{marginRight:"15px"}},l.a.createElement(Ke,{label:"Show grid",value:t,onChange:a,isDisabled:!1})),l.a.createElement("div",{style:{marginRight:"15px"}},l.a.createElement(Ke,{label:"Snap to grid",value:n,onChange:i,isDisabled:!1})),l.a.createElement("div",{style:{marginRight:"15px"}},l.a.createElement("div",{className:"fieldset"},l.a.createElement("div",{className:"label"},"Grid type: "),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:" button is-light ".concat(r===s.Hex?"is-dark":""," "),onClick:c},l.a.createElement("span",null,"Hexagon"))),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:" button is-light ".concat(r===s.Box?"is-dark":""),onClick:o},l.a.createElement("span",null,"Rectangle"))))))},Yt=function(e){var t=e.gridItemW,a=e.onChange_gridItemW,n=e.gridItemH,i=e.onChange_gridItemH;return l.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"center",marginRight:"15px"}},l.a.createElement("div",{className:"fieldset"},l.a.createElement("div",{className:"label"},"Grid size: "),l.a.createElement(nt.a,{allowNegative:!1,allowEmptyFormatting:!0,max:99,min:1,maxLength:2,value:t,onValueChange:function(e){a(e.floatValue)},placeholder:"width",style:{color:"#4a4a4a",textAlign:"center",border:"1px solid #aeaeae",fontFamily:"Open Sans, sans-serif",fontSize:"13px",fontWeight:400,lineHeight:"1.5",padding:"0px 10px",marginBottom:"0px",marginTop:"0px",maxWidth:"70px",marginRight:"5px"}}),l.a.createElement(nt.a,{allowNegative:!1,allowEmptyFormatting:!0,max:99,min:1,maxLength:2,value:n,onValueChange:function(e){i(e.floatValue)},placeholder:"height",style:{color:"#4a4a4a",textAlign:"center",border:"1px solid #aeaeae",fontFamily:"Open Sans, sans-serif",fontSize:"13px",fontWeight:400,lineHeight:"1.5",padding:"0px 10px",marginBottom:"0px",marginTop:"0px",maxWidth:"70px"}})))},Ut=function(e){var t=e.hexSize,a=e.onChange_hexSize;return l.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"center",marginRight:"15px"}},l.a.createElement("div",{className:"fieldset"},l.a.createElement("div",{className:"label"},"Hex size: "),l.a.createElement(nt.a,{allowNegative:!1,allowEmptyFormatting:!0,max:99,min:5,maxLength:2,value:t,onValueChange:function(e){a(e.floatValue)},placeholder:"width",style:{color:"#4a4a4a",textAlign:"center",border:"1px solid #aeaeae",fontFamily:"Open Sans, sans-serif",fontSize:"13px",fontWeight:400,lineHeight:"1.5",padding:"0px 10px",marginBottom:"0px",marginTop:"0px",maxWidth:"70px",marginRight:"5px"}})))},qt=function(e){return!0===e.isVisible?l.a.createElement(Jt,null):l.a.createElement(l.a.Fragment,null)},Jt=function(){var e=Object(b.c)((function(e){return e.ui.brush})),t=e.type,a=e.color,n=e.size;return t===c.Color?l.a.createElement(Kt,{color:a,size:n}):l.a.createElement(l.a.Fragment,null)},Kt=function(e){var t=e.color,a=e.size,n=Object(b.b)(),i=Object(o.useState)(!1),r=Object(te.a)(i,2),s=r[0],c=r[1],d=Object(o.useState)(!1),u=Object(te.a)(d,2),f=u[0],p=u[1],h=Object(o.useState)(0),g=Object(te.a)(h,2),m=g[0],v=g[1],S=Object(o.useState)(0),E=Object(te.a)(S,2),y=E[0],x=E[1],O=Object(o.useState)(null),j=Object(te.a)(O,2),C=j[0],B=j[1],D=Object(o.useRef)(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent",zIndex:20,cursor:"cell"},ref:D,onMouseDown:function(e){if(p(!0),null===C&&D.current){var t=D.current.getBoundingClientRect();B(t);var i=e.clientX-t.left-a/2,r=e.clientY-t.top-a/2;v(i),x(r),n(Z.Paint.action_applyColorBrush(i,r))}if(null!==C){var s=e.clientX-C.left-a/2,c=e.clientY-C.top-a/2;v(s),x(c),n(Z.Paint.action_applyColorBrush(s,c))}},onMouseUp:function(e){p(!1)},onMouseEnter:function(e){c(!0)},onMouseLeave:function(e){c(!1)},onMouseMove:function(e){if(null===C&&D.current&&B(D.current.getBoundingClientRect()),null!==C){var t=e.clientX-C.left-a/2,i=e.clientY-C.top-a/2;v(t),x(i),f&&n(Z.Paint.action_applyColorBrush(t,i))}}}),l.a.createElement(Zt,{y:y,x:m,color:t,size:a,isVisible:s}))},Zt=function(e){var t=e.x,a=e.y,n=e.color,i=e.size,r=e.isVisible;return l.a.createElement("div",{style:{position:"absolute",top:0,left:0,transform:ae(t,a),backgroundColor:n,width:i,height:i,border:"5px solid #aeaeae",borderRadius:"100%",opacity:!0===r?.8:0,zIndex:19}},"\xa0")},$t=function(e){var t=e.value,a=e.onChange;return l.a.createElement(Fe,{selected:t,label:"Size",icon:l.a.createElement(p.a,{icon:h.a,color:g,size:"lg"})},l.a.createElement(Je,{value:t,onChange:a}))},Qt=function(e){return!0===e.isVisible?l.a.createElement(ea,null):l.a.createElement(l.a.Fragment,null)},ea=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ta,null),l.a.createElement(aa,null))},ta=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.brush.size}));if(!t)return l.a.createElement(l.a.Fragment,null);return l.a.createElement($t,{value:t,onChange:function(t){var a=t;void 0!==t&&null!==t&&!0!==isNaN(t)||(a=0),e(Z.Toolbar.action_updateBrushSize(a))}})},aa=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.ui.brush.color}));if(!t)return l.a.createElement(l.a.Fragment,null);return l.a.createElement(He,{onChange:function(t){e(Z.Toolbar.action_updateBrushColor(t))},value:t})},na=function(){var e=Object(b.c)((function(e){return e.mode})),t=Object(b.d)().getState();return console.log("EditorRerender: ",t),t?l.a.createElement("div",{className:"scene"},l.a.createElement("div",{className:"topbar-wrapper"},l.a.createElement(zt,null),l.a.createElement(Vt,null)),l.a.createElement("div",{className:"actions-wrapper"},l.a.createElement(Q,{editorMode:e})),l.a.createElement("div",{className:"scene-wrapper"},l.a.createElement(re,{isActive:e===i.AddLine}),l.a.createElement(le,{isVisible:e===i.EditLines}),l.a.createElement(oe,{isVisible:e===i.EditBeads}),l.a.createElement(ue,{mode:e}),l.a.createElement(xe,{mode:e}),l.a.createElement(Ft,{isVisible:e===i.EditLines}),l.a.createElement(_e,{mode:e}),l.a.createElement(qt,{isVisible:e===i.Paint})),l.a.createElement("div",{className:"toolbar-wrapper"},l.a.createElement(rt,{isVisible:e===i.EditLines}),l.a.createElement(bt,{isVisible:e===i.EditBeads}),l.a.createElement(jt,{isVisible:e===i.AddLine}),l.a.createElement(Mt,{isVisible:e===i.Idle}),l.a.createElement(Qt,{isVisible:e===i.Paint}))):l.a.createElement("div",null,"Error in app")},ia=a(45),ra=function(){var e=Object(ia.b)($,"__REDUX_DEVTOOLS_EXTENSION__"in window&&window.__REDUX_DEVTOOLS_EXTENSION__());return l.a.createElement("div",{className:"App"},l.a.createElement(b.a,{store:e},l.a.createElement(na,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(l.a.createElement(ra,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[102,1,2]]]);
//# sourceMappingURL=main.e3884810.chunk.js.map